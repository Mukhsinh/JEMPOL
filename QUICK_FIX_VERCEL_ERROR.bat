@echo off
chcp 65001 >nul
color 0A
echo.
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘                                                            â•‘
echo â•‘        ğŸš€ QUICK FIX VERCEL ERROR - PANDUAN CEPAT         â•‘
echo â•‘                                                            â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo.

echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚  LANGKAH 1: DEPLOY PERBAIKAN                                â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo Menambahkan file yang diubah...
git add vercel.json
git add PERBAIKAN_ERROR_VERCEL_DEPLOY.md
git add CEK_VERCEL_ENV_VARS.md
git add test-vercel-api-fixed.html
git add RINGKASAN_PERBAIKAN_ERROR_VERCEL.md
git add DEPLOY_VERCEL_FIX_ERROR.bat
git add QUICK_FIX_VERCEL_ERROR.bat

echo.
echo Commit perubahan...
git commit -m "fix: perbaiki routing dan CORS Vercel API untuk mengatasi error 405 dan non-JSON response"

echo.
echo Push ke GitHub...
git push origin main

echo.
echo âœ… Kode sudah di-push ke GitHub!
echo â³ Vercel akan otomatis deploy dalam 1-2 menit...
echo.
timeout /t 3 >nul

echo.
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚  LANGKAH 2: SET ENVIRONMENT VARIABLES (MANUAL)              â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo ğŸŒ Buka browser dan kunjungi:
echo    https://vercel.com/dashboard
echo.
echo ğŸ“ Langkah-langkah:
echo.
echo    1. Pilih project Anda
echo    2. Klik "Settings" â†’ "Environment Variables"
echo    3. Tambahkan 4 environment variables:
echo.
echo       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo       â”‚ Name: VITE_SUPABASE_URL                             â”‚
echo       â”‚ Value: https://xxxxxxxxxx.supabase.co               â”‚
echo       â”‚ Environment: Production, Preview, Development       â”‚
echo       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo       â”‚ Name: VITE_SUPABASE_ANON_KEY                        â”‚
echo       â”‚ Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...      â”‚
echo       â”‚ Environment: Production, Preview, Development       â”‚
echo       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo       â”‚ Name: VITE_SUPABASE_SERVICE_ROLE_KEY                â”‚
echo       â”‚ Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...      â”‚
echo       â”‚ Environment: Production, Preview, Development       â”‚
echo       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo       â”‚ Name: NODE_ENV                                      â”‚
echo       â”‚ Value: production                                   â”‚
echo       â”‚ Environment: Production (only)                      â”‚
echo       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo    4. Klik "Save" untuk setiap variable
echo    5. Setelah semua tersimpan, klik "Deployments"
echo    6. Klik titik tiga (...) di deployment terakhir
echo    7. Klik "Redeploy"
echo    8. Tunggu 2-5 menit hingga selesai
echo.
echo ğŸ’¡ TIP: Copy value dari file .env atau frontend/.env lokal Anda
echo.
timeout /t 5 >nul

echo.
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚  LANGKAH 3: VERIFIKASI                                      â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo Setelah redeploy selesai:
echo.
echo 1. Buka file: test-vercel-api-fixed.html di browser
echo 2. Masukkan Vercel App URL Anda
echo 3. Klik "Test Semua Endpoint"
echo 4. Pastikan semua test âœ… Success
echo.
echo ATAU test manual:
echo.
echo 1. Buka aplikasi di browser
echo 2. Tekan F12 (Developer Tools)
echo 3. Buka tab Console
echo 4. Refresh halaman (F5)
echo 5. Pastikan tidak ada error merah
echo.
timeout /t 3 >nul

echo.
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚  ğŸ“š DOKUMENTASI LENGKAP                                     â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo Baca file-file berikut untuk detail lengkap:
echo.
echo ğŸ“„ RINGKASAN_PERBAIKAN_ERROR_VERCEL.md
echo    â†’ Ringkasan lengkap masalah dan solusi
echo.
echo ğŸ“„ PERBAIKAN_ERROR_VERCEL_DEPLOY.md
echo    â†’ Panduan detail perbaikan
echo.
echo ğŸ“„ CEK_VERCEL_ENV_VARS.md
echo    â†’ Cara set environment variables
echo.
echo ğŸ§ª test-vercel-api-fixed.html
echo    â†’ Tool test API setelah deploy
echo.
timeout /t 3 >nul

echo.
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚  âš ï¸  TROUBLESHOOTING                                        â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo Jika masih ada error:
echo.
echo âŒ Error 405 Method Not Allowed
echo    â†’ Clear cache Vercel: Settings â†’ Clear Cache â†’ Redeploy
echo.
echo âŒ Non-JSON Response (HTML)
echo    â†’ Cek environment variables sudah diset
echo    â†’ Pastikan sudah redeploy setelah set env vars
echo.
echo âŒ Missing Supabase credentials
echo    â†’ Cek nama env vars PERSIS: VITE_SUPABASE_URL
echo    â†’ Pastikan tidak ada spasi di value
echo    â†’ Redeploy setelah fix
echo.
echo âŒ Timeout
echo    â†’ Sudah dinaikkan ke 30 detik
echo    â†’ Cek query Supabase tidak terlalu lambat
echo.
timeout /t 5 >nul

echo.
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚  âœ… CHECKLIST                                               â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo [ ] Kode sudah di-push ke GitHub
echo [ ] Vercel sudah deploy otomatis
echo [ ] Environment variables sudah diset (4 variables)
echo [ ] Sudah redeploy setelah set env vars
echo [ ] Test dengan test-vercel-api-fixed.html
echo [ ] Semua endpoint return JSON (bukan HTML)
echo [ ] Form bisa submit tiket
echo [ ] Data masuk ke Supabase
echo [ ] Tidak ada error di Console browser
echo.
echo.
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘                                                            â•‘
echo â•‘  ğŸ‰ SELESAI! Ikuti langkah 2 dan 3 secara manual          â•‘
echo â•‘                                                            â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo.

pause
