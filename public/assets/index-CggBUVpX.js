const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/authService-D1MvrsyH.js","assets/react-vendor-DNc2NRLZ.js","assets/router-CMiEwkfl.js","assets/supabase-client-0LnPeXwf.js","assets/http-client-B9ygI19o.js","assets/ui-components-B8NipDi_.js"])))=>i.map(i=>d[i]);
import{r as Ge,a as He,g as Qe}from"./react-vendor-DNc2NRLZ.js";import{r as l,u as Ke,N as $e,a as H,L as I,b as he,c as ge,R as pe,d as U,B as Je,e as Ve}from"./router-CMiEwkfl.js";import{c as We}from"./supabase-client-0LnPeXwf.js";import{a as Ze}from"./http-client-B9ygI19o.js";import{B as Se,F as Ce,E as Ye,D as Xe,U as et,S as tt}from"./ui-components-B8NipDi_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))d(j);new MutationObserver(j=>{for(const v of j)if(v.type==="childList")for(const f of v.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&d(f)}).observe(document,{childList:!0,subtree:!0});function s(j){const v={};return j.integrity&&(v.integrity=j.integrity),j.referrerPolicy&&(v.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?v.credentials="include":j.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function d(j){if(j.ep)return;j.ep=!0;const v=s(j);fetch(j.href,v)}})();var oe={exports:{}},X={};var Te;function at(){if(Te)return X;Te=1;var a=Ge(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,j=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v={key:!0,ref:!0,__self:!0,__source:!0};function f(g,b,h){var N,p={},r=null,k=null;h!==void 0&&(r=""+h),b.key!==void 0&&(r=""+b.key),b.ref!==void 0&&(k=b.ref);for(N in b)d.call(b,N)&&!v.hasOwnProperty(N)&&(p[N]=b[N]);if(g&&g.defaultProps)for(N in b=g.defaultProps,b)p[N]===void 0&&(p[N]=b[N]);return{$$typeof:t,type:g,key:r,ref:k,props:p,_owner:j.current}}return X.Fragment=s,X.jsx=f,X.jsxs=f,X}var Ae;function st(){return Ae||(Ae=1,oe.exports=at()),oe.exports}var e=st(),ae={},Pe;function rt(){if(Pe)return ae;Pe=1;var a=He();return ae.createRoot=a.createRoot,ae.hydrateRoot=a.hydrateRoot,ae}var lt=rt();const it=Qe(lt),nt="modulepreload",dt=function(a){return"/"+a},De={},Z=function(t,s,d){let j=Promise.resolve();if(s&&s.length>0){let b=function(h){return Promise.all(h.map(N=>Promise.resolve(N).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=f?.nonce||f?.getAttribute("nonce");j=b(s.map(h=>{if(h=dt(h),h in De)return;De[h]=!0;const N=h.endsWith(".css"),p=N?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const r=document.createElement("link");if(r.rel=N?"stylesheet":nt,N||(r.as="script"),r.crossOrigin="",r.href=h,g&&r.setAttribute("nonce",g),document.head.appendChild(r),N)return new Promise((k,u)=>{r.addEventListener("load",k),r.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${h}`)))})}))}function v(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return j.then(f=>{for(const g of f||[])g.status==="rejected"&&v(g.reason);return t().catch(v)})},ot="https://jxxzbdivafzzwqhagwrf.supabase.co",ct="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4eHpiZGl2YWZ6endxaGFnd3JmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5MTkwNTEsImV4cCI6MjA4MDQ5NTA1MX0.ICOtGuxrD19GtawdR9JAsnFn9XsHxWkr1aHCEkgHqXg";let se=null;const xt=()=>{if(se)return console.log("‚ôªÔ∏è Reusing existing Supabase client instance"),se;try{return se=We(ot,ct,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,flowType:"pkce",storage:window.localStorage,storageKey:"supabase.auth.token",debug:!1},global:{headers:{Accept:"application/json","Content-Type":"application/json",Prefer:"return=representation"},fetch:(a,t={})=>fetch(a,{...t,signal:AbortSignal.timeout(5e3)})},realtime:{params:{eventsPerSecond:10}}}),console.log("‚úÖ Supabase client initialized successfully"),se}catch(a){throw console.error("‚ùå Failed to initialize Supabase client:",a),a}},B=xt();let W=!0,ce=0;const mt=3e4;let Le=!1;if(!Le&&typeof window<"u")try{B.auth.onAuthStateChange((a,t)=>{console.log("üîê Auth state changed:",a,t?"Session exists":"No session"),a==="SIGNED_IN"?(console.log("‚úÖ User signed in:",t?.user?.email),W=!0,t?.access_token&&(console.log("üîë Updating authorization header with new token"),Z(async()=>{const{api:s}=await Promise.resolve().then(()=>xe);return{api:s}},void 0).then(({api:s})=>{s.defaults.headers.common.Authorization=`Bearer ${t.access_token}`}).catch(s=>{console.warn("Could not update API headers:",s)}))):a==="SIGNED_OUT"?(console.log("üëã User signed out"),Z(async()=>{const{api:s}=await Promise.resolve().then(()=>xe);return{api:s}},void 0).then(({api:s})=>{delete s.defaults.headers.common.Authorization}).catch(s=>{console.warn("Could not clear API headers:",s)})):a==="TOKEN_REFRESHED"&&(console.log("üîÑ Token refreshed"),W=!0,t?.access_token&&(console.log("üîë Updating authorization header with refreshed token"),Z(async()=>{const{api:s}=await Promise.resolve().then(()=>xe);return{api:s}},void 0).then(({api:s})=>{s.defaults.headers.common.Authorization=`Bearer ${t.access_token}`}).catch(s=>{console.warn("Could not update API headers:",s)})))}),Le=!0}catch(a){console.error("‚ùå Failed to setup auth listener:",a)}const ut=async()=>{const a=Date.now();if(a-ce<mt&&W)return W;try{const t=new Promise((j,v)=>{setTimeout(()=>v(new Error("Connection check timeout")),2e3)}),s=B.from("admins").select("count").limit(1),{error:d}=await Promise.race([s,t]);return W=!d,ce=a,W}catch(t){return console.warn("Connection check failed:",t),W=!1,ce=a,!1}};typeof window<"u"&&setTimeout(()=>{ut().then(a=>{console.log("üåê Initial connection status:",a?"Connected":"Disconnected")}).catch(a=>{console.warn("Initial connection check failed:",a)})},1e3);const Be=l.createContext(void 0);function pt({children:a}){const[t,s]=l.useState(null),[d,j]=l.useState(!0),[v,f]=l.useState(!1);l.useEffect(()=>{if(v)return;(async()=>{try{console.log("üîÑ Initializing auth...");const u=new Promise((_,m)=>{setTimeout(()=>m(new Error("Auth initialization timeout")),3e3)}),x=(async()=>{try{console.log("‚ö° Skipping connection test for faster initialization");const{data:{session:_},error:m}=await B.auth.getSession();if(m)return console.error("‚ùå Error getting session:",m),null;if(!_?.user)return console.log("‚ÑπÔ∏è No active session found"),null;console.log("‚úÖ Found existing session for:",_.user.email);const c=B.from("admins").select("id, username, full_name, email, role, is_active").eq("email",_.user.email).eq("is_active",!0).single(),o=new Promise((E,P)=>{setTimeout(()=>P(new Error("Profile fetch timeout")),2e3)}),{data:i,error:n}=await Promise.race([c,o]);if(n||!i)return console.error("‚ùå Admin profile not found or not active:",n),await B.auth.signOut(),null;const w={id:i.id,username:i.username,full_name:i.full_name,email:i.email,role:i.role||"admin"};return console.log("‚úÖ User restored from session:",w.email),w}catch(_){return console.error("‚ùå Auth promise error:",_),null}})(),y=await Promise.race([x,u]);y&&s(y)}catch(u){console.error("‚ùå Auth initialization error:",u)}finally{j(!1),f(!0),console.log("‚úÖ Auth initialization complete")}})();const{data:{subscription:k}}=B.auth.onAuthStateChange(async(u,x)=>{if(console.log("üîî Auth state changed:",u),u==="SIGNED_IN"&&x?.user)try{const y=B.from("admins").select("id, username, full_name, email, role, is_active").eq("email",x.user.email).eq("is_active",!0).single(),_=new Promise((o,i)=>{setTimeout(()=>i(new Error("Profile fetch timeout")),2e3)}),{data:m,error:c}=await Promise.race([y,_]);!c&&m&&s({id:m.id,username:m.username,full_name:m.full_name,email:m.email,role:m.role||"admin"})}catch(y){console.error("Error fetching profile on sign in:",y)}else u==="SIGNED_OUT"?s(null):u==="TOKEN_REFRESHED"&&console.log("‚úÖ Token refreshed successfully")});return()=>{k.unsubscribe()}},[v]);const g=async(r,k)=>{j(!0);try{console.log("üîÑ Attempting login..."),await B.auth.signOut(),await new Promise(n=>setTimeout(n,200));const u=r.trim().toLowerCase();if(!u||!k)return{success:!1,error:"Email dan password harus diisi"};console.log("üìß Login attempt for:",u);const x=B.auth.signInWithPassword({email:u,password:k}),y=new Promise((n,w)=>{setTimeout(()=>w(new Error("Login timeout")),5e3)}),{data:_,error:m}=await Promise.race([x,y]);if(m){console.error("‚ùå Auth error:",m);let n="Login gagal";return m.message?.includes("Invalid login credentials")?n="Email atau password salah. Pastikan menggunakan: admin@jempol.com / admin123":m.message?.includes("Email not confirmed")?n="Email belum dikonfirmasi":m.message?.includes("timeout")?n="Koneksi timeout, silakan coba lagi":m.message?.includes("network")&&(n="Masalah koneksi jaringan, periksa internet Anda"),{success:!1,error:n}}if(!_?.user||!_?.session)return{success:!1,error:"Login gagal - tidak ada data user"};console.log("‚úÖ Auth successful, fetching admin profile...");let c=null,o=null;for(let n=1;n<=2;n++)try{const w=B.from("admins").select("id, username, full_name, email, role, is_active").eq("email",u).eq("is_active",!0).single(),E=new Promise((L,C)=>{setTimeout(()=>C(new Error("Profile timeout")),1500)}),{data:P,error:K}=await Promise.race([w,E]);if(!K&&P){c=P;break}else o=K,console.warn(`‚ö†Ô∏è Profile fetch attempt ${n} failed:`,K),n<2&&await new Promise(L=>setTimeout(L,200))}catch(w){o=w,console.warn(`‚ö†Ô∏è Profile fetch attempt ${n} error:`,w),n<2&&await new Promise(E=>setTimeout(E,200))}if(!c)return console.error("‚ùå Profile error after all attempts:",o),await B.auth.signOut(),{success:!1,error:"Admin tidak ditemukan atau tidak aktif. Silakan hubungi administrator."};const i={id:c.id,username:c.username,full_name:c.full_name,email:c.email,role:c.role||"admin"};return s(i),console.log("‚úÖ Login successful:",i.email,"Role:",i.role),{success:!0}}catch(u){console.error("‚ùå Unexpected login error:",u);let x="Terjadi kesalahan yang tidak terduga";return u.message?.includes("timeout")?x="Koneksi timeout, silakan coba lagi":u.message?.includes("network")&&(x="Masalah koneksi jaringan"),{success:!1,error:x}}finally{j(!1)}},b=async()=>{try{await B.auth.signOut(),s(null),console.log("‚úÖ Logout successful")}catch(r){console.error("‚ùå Logout error:",r),s(null)}},h=!!t,N=t?.role==="admin"||t?.role==="superadmin",p=t?.role==="superadmin";return e.jsx(Be.Provider,{value:{user:t,isLoading:d,isAuthenticated:h,login:g,logout:b,isAdmin:N,isSuperAdmin:p},children:a})}function ne(){const a=l.useContext(Be);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a}function ht({children:a,requireAdmin:t=!1,requireSuperAdmin:s=!1}){const{isAuthenticated:d,isAdmin:j,isSuperAdmin:v,isLoading:f}=ne(),g=Ke(),[b,h]=l.useState(!1),[N,p]=l.useState(!1);l.useEffect(()=>{if(f){const k=setTimeout(()=>{h(!0)},5e3),u=setTimeout(()=>{p(!0)},8e3);return()=>{clearTimeout(k),clearTimeout(u)}}else h(!1),p(!1)},[f]);const r=()=>{window.location.reload()};return f?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 max-w-md text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Memverifikasi akses..."}),b&&e.jsxs("div",{className:"text-sm text-orange-600 dark:text-orange-400 mt-4 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:["‚ö†Ô∏è Proses verifikasi memakan waktu lebih lama dari biasanya.",e.jsx("br",{}),"Ini bisa terjadi karena koneksi internet yang lambat."]}),N&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:"Refresh Halaman"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Atau coba buka di tab baru jika masalah berlanjut"})]})]})}):d?s&&!v?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Akses Ditolak"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Anda tidak memiliki izin untuk mengakses halaman ini."}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Diperlukan akses Super Admin."})]})}):t&&!j?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Akses Ditolak"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Anda tidak memiliki izin untuk mengakses halaman ini."}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Diperlukan akses Admin."})]})}):e.jsx(e.Fragment,{children:a}):e.jsx($e,{to:"/login",state:{from:g},replace:!0})}function gt(){const a=Ke(),t=H(),{user:s,logout:d}=ne(),[j,v]=l.useState(!1),[f,g]=l.useState(!1),[b,h]=l.useState(!1),[N,p]=l.useState(!1),r=m=>!!(m==="/"&&a.pathname==="/"||m!=="/"&&a.pathname.startsWith(m)),k=()=>a.pathname.startsWith("/master-data"),u=()=>a.pathname.startsWith("/tickets"),x=()=>a.pathname.startsWith("/survey"),y=()=>a.pathname.startsWith("/settings");l.useEffect(()=>{k()&&v(!0),u()&&g(!0),x()&&h(!0),y()&&p(!0)},[a.pathname]);const _=()=>{d(),t("/login")};return e.jsxs("aside",{className:"w-64 flex-shrink-0 bg-surface-light dark:bg-surface-dark border-r border-slate-200 dark:border-slate-800 flex flex-col h-full transition-colors duration-200 z-20",children:[e.jsx("div",{className:"flex-shrink-0 p-4 pb-2",children:e.jsxs("div",{className:"flex items-center gap-3 px-2",children:[e.jsx("div",{className:"bg-primary/10 flex items-center justify-center rounded-lg h-10 w-10 shrink-0",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"local_hospital"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-slate-900 dark:text-white text-base font-bold leading-tight",children:"Rumah Sakit Kota"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-medium",children:"Sistem Manajemen"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4 sidebar-scroll",children:e.jsxs("nav",{className:"flex flex-col gap-1",children:[e.jsxs(I,{to:"/",className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors group ${r("/")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"dashboard"}),e.jsx("p",{className:"text-sm font-medium",children:"Dasbor"})]}),e.jsx("div",{className:"pt-2 pb-1",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Layanan Publik"})}),e.jsxs(I,{to:"/ticket-tracker",className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ${r("/ticket-tracker")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"search"}),e.jsx("p",{className:"text-sm font-medium",children:"Lacak Tiket"})]}),e.jsx("div",{className:"pt-2 pb-1",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Operasional"})}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>g(!f),className:`w-full flex items-center justify-between gap-3 px-3 py-2.5 rounded-lg transition-colors ${u()?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined",children:"confirmation_number"}),e.jsx("p",{className:"text-sm font-medium",children:"Tickets"})]}),e.jsx("span",{className:`material-symbols-outlined text-sm transition-transform ${f?"rotate-180":""}`,children:"expand_more"})]}),f&&e.jsxs("div",{className:"mt-2 ml-6 flex flex-col gap-1",children:[e.jsxs(I,{to:"/tickets",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${a.pathname==="/tickets"?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Semua Tiket"})]}),e.jsxs(I,{to:"/tickets/create/internal",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/tickets/create/internal")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Buat Tiket Internal"})]}),e.jsxs(I,{to:"/tickets/tiket-eksternal",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/tickets/tiket-eksternal")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Tiket Eksternal"})]}),e.jsxs(I,{to:"/tickets/qr-management",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/tickets/qr-management")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"QR Code Management"})]}),e.jsxs(I,{to:"/tickets/ai-escalation",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/tickets/ai-escalation")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"AI Driven Eskalasi"})]}),e.jsxs(I,{to:"/tickets/escalation",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/tickets/escalation")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Eskalasi"})]})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>h(!b),className:`w-full flex items-center justify-between gap-3 px-3 py-2.5 rounded-lg transition-colors ${x()?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined",children:"sentiment_satisfied"}),e.jsx("p",{className:"text-sm font-medium",children:"Survei Kepuasan"})]}),e.jsx("span",{className:`material-symbols-outlined text-sm transition-transform ${b?"rotate-180":""}`,children:"expand_more"})]}),b&&e.jsxs("div",{className:"mt-2 ml-6 flex flex-col gap-1",children:[e.jsxs(I,{to:"/survey",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${a.pathname==="/survey"?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Survei Kepuasan"})]}),e.jsxs(I,{to:"/survey/report",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/survey/report")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Laporan Survei"})]})]})]}),e.jsx("div",{className:"pt-2 pb-1",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Manajemen"})}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>v(!j),className:`w-full flex items-center justify-between gap-3 px-3 py-2.5 rounded-lg transition-colors ${k()?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined",children:"database"}),e.jsx("p",{className:"text-sm font-medium",children:"Master Data"})]}),e.jsx("span",{className:`material-symbols-outlined text-sm transition-transform ${j?"rotate-180":""}`,children:"expand_more"})]}),j&&e.jsxs("div",{className:"mt-2 ml-6 flex flex-col gap-1",children:[e.jsxs(I,{to:"/master-data/units",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/master-data/units")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Unit Kerja"})]}),e.jsxs(I,{to:"/master-data/unit-types",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/master-data/unit-types")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Tipe Unit Kerja"})]}),e.jsxs(I,{to:"/master-data/service-categories",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/master-data/service-categories")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Kategori Layanan"})]}),e.jsxs(I,{to:"/master-data/ticket-types",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/master-data/ticket-types")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Tipe Tiket"})]}),e.jsxs(I,{to:"/master-data/ticket-classifications",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/master-data/ticket-classifications")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Klasifikasi Tiket"})]}),e.jsxs(I,{to:"/master-data/ticket-statuses",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/master-data/ticket-statuses")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Status Tiket"})]}),e.jsxs(I,{to:"/master-data/patient-types",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/master-data/patient-types")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Jenis Pasien"})]}),e.jsxs(I,{to:"/master-data/sla-settings",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/master-data/sla-settings")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Pengaturan SLA"})]}),e.jsxs(I,{to:"/master-data/roles-permissions",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/master-data/roles-permissions")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),e.jsx("p",{className:"text-sm font-medium",children:"Peran & Akses"})]})]})]}),e.jsxs(I,{to:"/reports",className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ${r("/reports")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"assessment"}),e.jsx("p",{className:"text-sm font-medium",children:"Laporan & Analitik"})]}),e.jsxs(I,{to:"/users",className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ${r("/users")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"group"}),e.jsx("p",{className:"text-sm font-medium",children:"Pengguna"})]}),e.jsxs(I,{to:"/realtime-notification",className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ${r("/realtime-notification")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"notifications"}),e.jsx("p",{className:"text-sm font-medium",children:"Notifikasi"})]}),e.jsx("div",{className:"pt-2 pb-1",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Dokumentasi"})}),e.jsxs(I,{to:"/buku-petunjuk",className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ${r("/buku-petunjuk")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"menu_book"}),e.jsx("p",{className:"text-sm font-medium",children:"Buku Petunjuk"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>p(!N),className:`w-full flex items-center justify-between gap-3 px-3 py-2.5 rounded-lg transition-colors ${y()?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined",children:"settings"}),e.jsx("p",{className:"text-sm font-medium",children:"Pengaturan"})]}),e.jsx("span",{className:`material-symbols-outlined text-sm transition-transform ${N?"rotate-180":""}`,children:"expand_more"})]}),N&&e.jsxs("div",{className:"mt-2 ml-6 flex flex-col gap-1",children:[e.jsxs(I,{to:"/settings/app",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/settings/app")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-green-500",children:"settings_applications"}),e.jsx("p",{className:"text-sm font-medium",children:"Pengaturan Aplikasi"})]}),e.jsxs(I,{to:"/settings/roles-permissions",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/settings/roles-permissions")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"security"}),e.jsx("p",{className:"text-sm font-medium",children:"Peran & Hak Akses"})]}),e.jsxs(I,{to:"/settings/response-templates",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/settings/response-templates")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-slate-600",children:"chat"}),e.jsx("p",{className:"text-sm font-medium",children:"Template Respon"})]}),e.jsxs(I,{to:"/settings/ai-trust",className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r("/settings/ai-trust")?"bg-primary text-white shadow-md shadow-blue-500/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-purple-500",children:"psychology"}),e.jsx("p",{className:"text-sm font-medium",children:"Pengaturan Kepercayaan AI"})]})]})]})]})}),e.jsx("div",{className:"flex-shrink-0 p-4 border-t border-slate-200 dark:border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-3 px-2 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors cursor-pointer group relative",children:[e.jsx("div",{className:"bg-center bg-no-repeat bg-cover rounded-full h-9 w-9 ring-2 ring-slate-100 dark:ring-slate-700 bg-slate-200 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"person"})}),e.jsxs("div",{className:"flex flex-col overflow-hidden",children:[e.jsx("p",{className:"text-slate-900 dark:text-white text-sm font-medium truncate",children:s?.full_name||s?.username||"Admin"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs truncate capitalize",children:s?.role||"Admin"})]}),e.jsx("button",{onClick:_,className:"ml-auto p-1.5 text-slate-400 hover:text-red-500 transition-colors",title:"Keluar",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"logout"})})]})})]})}const bt=({children:a})=>e.jsxs("div",{className:"flex h-screen overflow-hidden bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 font-display transition-colors duration-200",children:[e.jsx(gt,{}),e.jsx("main",{className:"flex-1 overflow-y-auto h-full relative",children:e.jsx("div",{className:"max-w-[1400px] mx-auto p-6 md:p-8 flex flex-col gap-6",children:a})})]}),ft=()=>"/api",te=ft();console.log("API Base URL:",te);const S=Ze.create({baseURL:te,headers:{"Content-Type":"application/json"},timeout:6e4,withCredentials:!1});S.interceptors.request.use(async a=>{try{const{authService:t}=await Z(async()=>{const{authService:d}=await import("./authService-D1MvrsyH.js");return{authService:d}},__vite__mapDeps([0,1,2,3,4,5])),s=await t.getToken();s?(a.headers.Authorization=`Bearer ${s}`,console.log("üîë Token added to request:",a.url)):console.log("‚ö†Ô∏è No token available for request:",a.url)}catch(t){console.error("‚ùå Error getting token:",t)}return a},a=>Promise.reject(a));S.interceptors.response.use(a=>a,async a=>{let t="Terjadi kesalahan";if(a.code==="ECONNABORTED")t="Koneksi timeout. Periksa koneksi internet Anda.";else if(a.code==="ERR_NETWORK")t="Tidak dapat terhubung ke server. Pastikan server backend berjalan di "+te;else if(a.code==="ERR_CONNECTION_REFUSED")t="Koneksi ditolak. Pastikan server backend berjalan di "+te;else if(a.code==="ERR_BAD_REQUEST")t=a.response?.data?.error||"Permintaan tidak valid";else if(a.response){if(t=a.response.data?.error||a.message||"Terjadi kesalahan",a.response.status===401||a.response.status===403)if(console.warn("üîê Authentication error:",{status:a.response.status,message:t,url:a.config?.url,code:a.response.data?.code}),a.response.data?.code==="ERR_INVALID_TOKEN"||a.response.data?.code==="ERR_BAD_REQUEST"||a.response.data?.error==="Token tidak valid. Silakan login ulang."){console.log("üö´ Backend rejected token as invalid, forcing logout...");try{const{authService:d}=await Z(async()=>{const{authService:v}=await import("./authService-D1MvrsyH.js");return{authService:v}},__vite__mapDeps([0,1,2,3,4,5]));return await d.logout(),(window.location.pathname.startsWith("/admin")||window.location.pathname.startsWith("/dashboard")||window.location.pathname.startsWith("/tickets")||window.location.pathname.startsWith("/master-data"))&&(window.location.href="/login"),Promise.reject(new Error("Sesi telah berakhir. Silakan login kembali."))}catch(d){console.error("Error during forced logout:",d)}}else console.log("‚ö†Ô∏è Auth error but token may be valid (permission issue)"),t=a.response.data?.error||"Anda tidak memiliki izin untuk mengakses resource ini."}else a.request&&(t="Server tidak merespons. Periksa koneksi internet Anda dan pastikan server backend berjalan.");return console.error("API Error:",{message:t,code:a.code,status:a.response?.status,url:a.config?.url,baseURL:te,data:a.response?.data}),Promise.reject(new Error(t))});const xe=Object.freeze(Object.defineProperty({__proto__:null,api:S,default:S},Symbol.toStringTag,{value:"Module"}));class kt{async getPublicTickets(t={}){try{return(await S.get("/complaints/public/tickets",{params:t})).data}catch(s){return console.error("Fallback getPublicTickets error:",s),{success:!1,error:"Tidak dapat mengambil data tiket",data:[]}}}async getPublicUnits(){try{return(await S.get("/complaints/public/units")).data}catch(t){console.error("Fallback getPublicUnits error:",t);try{return(await S.get("/public/units")).data}catch(s){return console.error("Alternative public units error:",s),{success:!1,error:"Tidak dapat mengambil data unit",data:[]}}}}async getPublicCategories(){try{return(await S.get("/complaints/public/categories")).data}catch(t){return console.error("Fallback getPublicCategories error:",t),{success:!1,error:"Tidak dapat mengambil data kategori",data:[]}}}async testConnection(){try{return(await S.get("/health")).data}catch(t){return console.error("Connection test failed:",t),{success:!1,error:"Tidak dapat terhubung ke server"}}}async testComplaints(){try{return(await S.get("/complaints/test")).data}catch(t){return console.error("Complaints test failed:",t),{success:!1,error:"Tidak dapat mengakses endpoint complaints"}}}}const me=new kt;class jt{async getTickets(t){try{return(await S.get("/complaints/tickets",{params:t})).data}catch(s){return console.error("Error in getTickets:",s),s.message?.includes("Token akses diperlukan")||s.message?.includes("401")||s.message?.includes("Unauthorized")?(console.log("Trying fallback public tickets..."),await me.getPublicTickets(t)):{success:!1,error:s.message||"Gagal mengambil data tiket",data:[]}}}async getTicket(t){try{return(await S.get(`/complaints/tickets/${t}`)).data}catch(s){return console.error("Error in getTicket:",s),{success:!1,error:s.message||"Gagal mengambil data tiket",data:null}}}async createTicket(t){try{return(await S.post("/complaints/tickets",t)).data}catch(s){return console.error("Error in createTicket:",s),{success:!1,error:s.message||"Gagal membuat tiket",data:null}}}async updateTicket(t,s){return(await S.put(`/complaints/tickets/${t}`,s)).data}async updateComplaint(t,s){return this.updateTicket(t,s)}async getComplaintById(t){return this.getTicket(t)}async getComplaintsByUnit(t){try{return(await S.get(`/complaints/unit/${t}`)).data}catch(s){return console.error("Error in getComplaintsByUnit:",s),{success:!1,error:s.message||"Gagal mengambil data tiket berdasarkan unit",data:[]}}}async addResponse(t,s){return(await S.post(`/complaints/tickets/${t}/responses`,s)).data}async getUnits(){try{return(await S.get("/complaints/units")).data}catch(t){return console.error("Error in getUnits:",t),t.message?.includes("Token akses diperlukan")||t.message?.includes("401")||t.message?.includes("Unauthorized")?(console.log("Trying fallback public units..."),await me.getPublicUnits()):{success:!1,error:t.message||"Gagal mengambil data unit",data:[]}}}async getCategories(){try{return(await S.get("/complaints/categories")).data}catch(t){return console.error("Error in getCategories:",t),t.message?.includes("Token akses diperlukan")||t.message?.includes("401")||t.message?.includes("Unauthorized")?(console.log("Trying fallback public categories..."),await me.getPublicCategories()):{success:!1,error:t.message||"Gagal mengambil data kategori",data:[]}}}async getDashboardMetrics(){try{return(await S.get("/complaints/dashboard/metrics")).data}catch(t){return console.error("Error in getDashboardMetrics:",t),{success:!1,error:t.message||"Gagal mengambil data dashboard",data:{statusCounts:{},recentTickets:[],categoryStats:{}}}}}async getDashboardMetricsFiltered(t){return(await S.get("/complaints/dashboard/metrics/filtered",{params:t})).data}async getPublicCategories(){return(await S.get("/public/categories")).data}async getQRCodeInfo(t){return(await S.get(`/public/qr/${t}`)).data}async createPublicTicket(t,s){return(await S.post(`/public/qr/${t}/tickets`,s)).data}async getPublicTicket(t){return(await S.get(`/public/tickets/${t}`)).data}async submitSurvey(t,s){return(await S.post(`/public/surveys/${t}`,s)).data}}const G=new jt,re=({title:a,value:t,icon:s,trend:d,trendDirection:j,trendColor:v,iconBgColor:f,iconColor:g,subValue:b})=>e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col justify-between gap-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:`p-2 ${f} rounded-lg`,children:e.jsx("span",{className:`material-symbols-outlined ${g} text-2xl`,children:s})}),e.jsxs("span",{className:`flex items-center text-${v}-600 dark:text-${v}-400 text-sm font-medium bg-${v}-50 dark:bg-${v}-900/20 px-2 py-0.5 rounded-full`,children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] mr-1",children:j==="up"?"trending_up":"trending_down"}),d]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:a}),e.jsxs("div",{className:"flex items-baseline gap-2 mt-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:t}),b&&e.jsx("span",{className:"text-sm text-slate-400",children:b})]})]})]}),yt=({metrics:a})=>{const[t,s]=l.useState([]),[d,j]=l.useState(!0);l.useEffect(()=>{(async()=>{try{if(a?.categoryStats){const h=Object.entries(a.categoryStats).map(([r,k])=>({name:r,count:k,percentage:0})),N=h.reduce((r,k)=>r+k.count,0),p=h.map(r=>({...r,percentage:N>0?r.count/N*100:0}));s(p.sort((r,k)=>k.count-r.count).slice(0,6)),j(!1);return}const[g,b]=await Promise.all([G.getUnits(),G.getTickets({limit:1e3})]);if(g.success&&b.success){const h=g.data||[],N=b.data||[],r=h.map(k=>{const u=N.filter(x=>x.unit_id===k.id);return{name:k.name,count:u.length,percentage:N.length>0?u.length/N.length*100:0}}).sort((k,u)=>u.count-k.count).slice(0,6);s(r)}}catch(g){console.error("Error fetching chart data:",g)}finally{j(!1)}})()},[a]);const v=Math.max(...t.map(f=>f.count),1);return e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:a?.categoryStats?"Tickets by Category":"Tickets by Unit"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Volume across departments"})]}),e.jsx("button",{className:"text-primary text-sm font-medium hover:underline",children:"View Report"})]}),d?e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Loading chart data..."})]})}):t.length===0?e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No data available"})}):e.jsx("div",{className:"h-64 flex flex-col justify-end gap-2",children:e.jsx("div",{className:"flex items-end justify-between h-full gap-4 px-2",children:t.map((f,g)=>e.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 group",children:[e.jsxs("div",{className:"relative w-full max-w-[40px] bg-blue-100 dark:bg-blue-900/30 rounded-t-sm h-full flex flex-col justify-end overflow-hidden",children:[e.jsx("div",{className:"w-full bg-primary hover:bg-blue-600 transition-all duration-500",style:{height:`${f.count/v*100}%`}}),e.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:[f.count," Tickets"]})]}),e.jsx("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 text-center leading-tight",children:f.name.length>10?f.name.substring(0,8)+"...":f.name})]},g))})})]})},vt=({filters:a})=>{const[t,s]=l.useState([]),[d,j]=l.useState(!0),[v,f]=l.useState(null),[g,b]=l.useState(""),h=H(),N=async()=>{try{j(!0),f(null);const m={limit:10};a?.status&&a.status!=="all"&&(m.status=a.status),a?.unit_id&&a.unit_id!=="all"&&(m.unit_id=a.unit_id);const c=await G.getTickets(m);c.success?s(c.data||[]):f(c.error||"Failed to fetch tickets")}catch(m){console.error("Error fetching tickets:",m),f(m.message||"Failed to fetch tickets")}finally{j(!1)}};l.useEffect(()=>{N()},[a]);const p=m=>{h(`/tickets/${m}`)},r=m=>{b(m.target.value)},k=t.filter(m=>m.title.toLowerCase().includes(g.toLowerCase())||m.ticket_number.toLowerCase().includes(g.toLowerCase())||(m.units?.name||"").toLowerCase().includes(g.toLowerCase())),u=m=>{switch(m.toLowerCase()){case"escalated":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 border-orange-200 dark:border-orange-900/50";case"over_sla":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 border-red-200 dark:border-red-900/50";case"in_progress":return"bg-primary/10 text-primary dark:bg-blue-900/30 dark:text-blue-300 border-blue-100 dark:border-blue-900/50";case"open":return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-600";case"resolved":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300 border-emerald-200 dark:border-emerald-900/50";case"closed":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300 border-emerald-200 dark:border-emerald-900/50";default:return"bg-slate-100 text-slate-700"}},x=m=>{switch(m.toLowerCase()){case"critical":return"text-red-600 dark:text-red-400";case"high":return"text-orange-600 dark:text-orange-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"low":return"text-green-600 dark:text-green-400";default:return"text-slate-500 dark:text-slate-400"}},y=m=>{const c=new Date(m);return c.toLocaleDateString()+" "+c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},_=g?k:t;return e.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden flex flex-col flex-1 min-h-[300px]",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex flex-wrap gap-4 justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary",children:"list_alt"}),"Recent Tickets"]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Latest tickets based on current filters"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"search"})}),e.jsx("input",{className:"pl-10 pr-4 py-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 dark:text-white w-64",placeholder:"Search tickets...",type:"text",value:g,onChange:r})]}),e.jsx("button",{onClick:N,className:"px-3 py-2 bg-primary text-white rounded-lg text-sm hover:bg-blue-600 transition-colors",children:"Refresh"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Ticket ID"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Unit"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider text-right",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mr-2"}),"Loading tickets..."]})})}):v?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8 text-red-600",children:v})}):_.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8 text-slate-500",children:"No tickets found"})}):_.map(m=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors cursor-pointer",onClick:()=>p(m.id),children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:m.ticket_number||"#REQ-????"}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-700 dark:text-slate-300 max-w-xs truncate",children:m.title}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:m.units?.name||"Unknown"}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:y(m.created_at)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${u(m.status)}`,children:m.status.replace("_"," ")})}),e.jsx("td",{className:`px-6 py-4 text-sm font-medium ${x(m.priority)}`,children:m.priority}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:c=>{c.stopPropagation(),p(m.id)},className:"text-primary hover:text-blue-700 dark:hover:text-blue-400 font-medium text-sm",children:"View"})})]},m.id))})]})})]})},Ee=()=>{const[a,t]=l.useState(null),[s,d]=l.useState(!0),[j,v]=l.useState([]),[f,g]=l.useState([]),[b,h]=l.useState({dateRange:"last_7_days",unit_id:"all",status:"all",category_id:"all"}),[N,p]=l.useState(!1),[r,k]=l.useState(!1),[u,x]=l.useState(!1),[y,_]=l.useState(!1);l.useEffect(()=>{(async()=>{try{const[C,D]=await Promise.all([G.getUnits(),G.getCategories()]);C.success&&v(C.data),D.success&&g(D.data)}catch(C){console.error("Error loading initial data:",C)}})()},[]),l.useEffect(()=>{(async()=>{d(!0);try{const C=await G.getDashboardMetricsFiltered(b);C.success&&t(C.data)}catch(C){console.error("Error fetching dashboard metrics:",C)}finally{d(!1)}})()},[b]),l.useEffect(()=>{const L=C=>{C.target.closest(".relative")||(p(!1),k(!1),x(!1),_(!1))};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[]);const m=L=>a?.statusCounts?.[L]||0,c=a?.statusCounts?Object.values(a.statusCounts).reduce((L,C)=>L+C,0):0,o=()=>{d(!0),(async()=>{try{const C=await G.getDashboardMetricsFiltered(b);C.success&&t(C.data)}catch(C){console.error("Error fetching dashboard metrics:",C)}finally{d(!1)}})()},i=()=>{const C=[["Metric","Value"],["Total Tickets",c.toString()],["Open Tickets",m("open").toString()],["In Progress",m("in_progress").toString()],["Escalated",m("escalated").toString()],["Resolved",m("resolved").toString()],["Closed",m("closed").toString()]].map(R=>R.join(",")).join(`
`),D=new Blob([C],{type:"text/csv"}),M=window.URL.createObjectURL(D),T=document.createElement("a");T.href=M,T.download=`dashboard-report-${new Date().toISOString().split("T")[0]}.csv`,T.click(),window.URL.revokeObjectURL(M)},n=(L,C)=>{h(D=>({...D,[L]:C})),p(!1),k(!1),x(!1),_(!1)},w=L=>{switch(L){case"last_7_days":return"Last 7 Days";case"last_30_days":return"Last 30 Days";case"last_90_days":return"Last 90 Days";case"this_month":return"This Month";case"last_month":return"Last Month";default:return"Last 7 Days"}},E=L=>{if(L==="all")return"All Units";const C=j.find(D=>D.id===L);return C?C.name:"All Units"},P=L=>{switch(L){case"all":return"All Statuses";case"open":return"Open";case"in_progress":return"In Progress";case"escalated":return"Escalated";case"resolved":return"Resolved";case"closed":return"Closed";default:return"All Statuses"}},K=L=>{if(L==="all")return"All Categories";const C=f.find(D=>D.id===L);return C?C.name:"All Categories"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Dashboard Overview"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Welcome back, Director Johnson. Here's what's happening today."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:o,disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors disabled:opacity-50",children:[e.jsx("span",{className:`material-symbols-outlined text-[20px] ${s?"animate-spin":""}`,children:"refresh"}),e.jsx("span",{children:s?"Refreshing...":"Refresh"})]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors shadow-sm shadow-blue-500/30",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"download"}),e.jsx("span",{children:"Export Report"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white dark:bg-surface-dark p-2 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("div",{className:"pl-2 pr-4 border-r border-slate-200 dark:border-slate-700",children:e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Filters"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{p(!N),k(!1),x(!1),_(!1)},className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors text-sm font-medium text-slate-700 dark:text-slate-200",children:[e.jsx("span",{children:w(b.dateRange)}),e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"keyboard_arrow_down"})]}),N&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-10 min-w-[160px]",children:[{value:"last_7_days",label:"Last 7 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"last_90_days",label:"Last 90 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"}].map(L=>e.jsx("button",{onClick:()=>n("dateRange",L.value),className:`w-full text-left px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700 ${b.dateRange===L.value?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-slate-700 dark:text-slate-300"}`,children:L.label},L.value))})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{k(!r),p(!1),x(!1),_(!1)},className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors text-sm font-medium text-slate-700 dark:text-slate-200",children:[e.jsx("span",{children:E(b.unit_id)}),e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"keyboard_arrow_down"})]}),r&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-10 min-w-[200px] max-h-60 overflow-y-auto",children:[e.jsx("button",{onClick:()=>n("unit_id","all"),className:`w-full text-left px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700 ${b.unit_id==="all"?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-slate-700 dark:text-slate-300"}`,children:"All Units"}),j.map(L=>e.jsx("button",{onClick:()=>n("unit_id",L.id),className:`w-full text-left px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700 ${b.unit_id===L.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-slate-700 dark:text-slate-300"}`,children:L.name},L.id))]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{x(!u),p(!1),k(!1),_(!1)},className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors text-sm font-medium text-slate-700 dark:text-slate-200",children:[e.jsx("span",{children:P(b.status)}),e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"keyboard_arrow_down"})]}),u&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-10 min-w-[160px]",children:[{value:"all",label:"All Statuses"},{value:"open",label:"Open"},{value:"in_progress",label:"In Progress"},{value:"escalated",label:"Escalated"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}].map(L=>e.jsx("button",{onClick:()=>n("status",L.value),className:`w-full text-left px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700 ${b.status===L.value?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-slate-700 dark:text-slate-300"}`,children:L.label},L.value))})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{_(!y),p(!1),k(!1),x(!1)},className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors text-sm font-medium text-slate-700 dark:text-slate-200",children:[e.jsx("span",{children:K(b.category_id)}),e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"keyboard_arrow_down"})]}),y&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-10 min-w-[200px] max-h-60 overflow-y-auto",children:[e.jsx("button",{onClick:()=>n("category_id","all"),className:`w-full text-left px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700 ${b.category_id==="all"?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-slate-700 dark:text-slate-300"}`,children:"All Categories"}),f.map(L=>e.jsx("button",{onClick:()=>n("category_id",L.id),className:`w-full text-left px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700 ${b.category_id===L.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-slate-700 dark:text-slate-300"}`,children:L.name},L.id))]})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("button",{onClick:()=>{h({dateRange:"last_7_days",unit_id:"all",status:"all",category_id:"all"})},className:"p-1.5 text-slate-400 hover:text-primary transition-colors",title:"Reset Filters",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"filter_list_off"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(re,{title:"Total Tickets",value:s?"...":c.toString(),icon:"confirmation_number",trend:"+12%",trendDirection:"up",trendColor:"emerald",iconBgColor:"bg-blue-50 dark:bg-blue-900/20",iconColor:"text-primary"}),e.jsx(re,{title:"Open Tickets",value:s?"...":m("open").toString(),icon:"timer_off",trend:"-2%",trendDirection:"down",trendColor:"emerald",iconBgColor:"bg-red-50 dark:bg-red-900/20",iconColor:"text-red-600 dark:text-red-400"}),e.jsx(re,{title:"In Progress",value:s?"...":m("in_progress").toString(),icon:"history",trend:"-10m",trendDirection:"down",trendColor:"emerald",iconBgColor:"bg-orange-50 dark:bg-orange-900/20",iconColor:"text-orange-600 dark:text-orange-400"}),e.jsx(re,{title:"Resolved",value:s?"...":m("resolved").toString(),subValue:"",icon:"thumb_up",trend:"+0.2",trendDirection:"up",trendColor:"emerald",iconBgColor:"bg-purple-50 dark:bg-purple-900/20",iconColor:"text-purple-600 dark:text-purple-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(yt,{}),e.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm p-6 flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Status Distribution"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Current workload"})]})}),e.jsxs("div",{className:"flex flex-col gap-5 flex-1 justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-400"})," Open"]}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:m("open")})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-slate-400 rounded-full",style:{width:`${c>0?m("open")/c*100:0}%`}})})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-primary"})," In Progress"]}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:m("in_progress")})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${c>0?m("in_progress")/c*100:0}%`}})})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"})," Escalated"]}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:m("escalated")})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-orange-500 rounded-full",style:{width:`${c>0?m("escalated")/c*100:0}%`}})})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," Resolved"]}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:m("resolved")})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${c>0?m("resolved")/c*100:0}%`}})})]})]})]})]}),e.jsx(vt,{})]})};function Nt(){const[a,t]=l.useState(""),[s,d]=l.useState(""),[j,v]=l.useState(""),[f,g]=l.useState(!1),{login:b}=ne(),h=H(),N=async p=>{p.preventDefault(),v(""),g(!0);try{const r=await b(a,s);if(!r.success)throw new Error(r.error);h("/")}catch(r){v(r.message||"Login gagal. Periksa email dan kata sandi Anda.")}finally{g(!1)}};return e.jsx("div",{className:"bg-background-light dark:bg-background-dark text-[#0d141b] dark:text-white font-display min-h-screen flex flex-col",children:e.jsxs("div",{className:"flex min-h-screen w-full flex-1",children:[e.jsxs("div",{className:"flex w-full flex-col justify-center px-6 py-12 md:w-1/2 lg:px-20 xl:px-32 bg-white dark:bg-[#15202b] shadow-xl md:shadow-none z-10 relative",children:[e.jsxs("div",{className:"mb-10 flex items-center gap-3",children:[e.jsx("div",{className:"size-8 text-primary",children:e.jsx("span",{className:"material-symbols-outlined text-4xl",children:"local_hospital"})}),e.jsx("h2",{className:"text-[#0d141b] dark:text-white text-xl font-bold leading-tight tracking-[-0.015em]",children:"SARAH"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-[#0d141b] dark:text-white tracking-tight text-[32px] font-bold leading-tight text-left pb-2",children:"Akses Portal Staf"}),e.jsx("p",{className:"text-[#4c739a] dark:text-slate-400 text-base font-normal leading-normal",children:"Silakan masuk ke Sistem Pengaduan & Layanan."})]}),j&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-3",children:[e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"error"}),e.jsx("p",{className:"text-sm text-red-800",children:j})]}),e.jsxs("form",{onSubmit:N,className:"flex flex-col gap-5 max-w-[480px]",children:[e.jsxs("label",{className:"flex flex-col flex-1",children:[e.jsx("p",{className:"text-[#0d141b] dark:text-slate-200 text-sm font-medium leading-normal pb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#0d141b] dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-[#cfdbe7] dark:border-slate-600 bg-slate-50 dark:bg-slate-800 focus:border-primary h-14 placeholder:text-[#4c739a] p-[15px] pl-12 text-base font-normal leading-normal transition-all",placeholder:"admin@jempol.com",type:"email",value:a,onChange:p=>t(p.target.value),required:!0}),e.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-[#4c739a]",children:"email"})]})]}),e.jsxs("label",{className:"flex flex-col flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2",children:[e.jsx("p",{className:"text-[#0d141b] dark:text-slate-200 text-sm font-medium leading-normal",children:"Kata Sandi"}),e.jsx("a",{className:"text-primary text-sm font-medium hover:underline",href:"#",children:"Lupa Kata Sandi?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#0d141b] dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-[#cfdbe7] dark:border-slate-600 bg-slate-50 dark:bg-slate-800 focus:border-primary h-14 placeholder:text-[#4c739a] p-[15px] pl-12 pr-12 text-base font-normal leading-normal transition-all",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",type:"password",value:s,onChange:p=>d(p.target.value),required:!0}),e.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-[#4c739a]",children:"lock"})]})]}),e.jsx("div",{className:"flex flex-col gap-4 mt-2",children:e.jsx("button",{className:"flex w-full items-center justify-center rounded-lg bg-primary px-4 h-14 text-white text-base font-bold leading-normal hover:bg-blue-600 transition-colors shadow-md shadow-blue-500/20",type:"submit",disabled:f,children:f?"Sedang Masuk...":"Masuk Sistem"})})]}),e.jsx("div",{className:"mt-auto pt-10",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("p",{className:"text-xs text-[#4c739a] flex items-center gap-1.5",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"verified_user"}),"Dilindungi Standar Keamanan Enterprise"]}),e.jsxs("div",{className:"flex gap-4 text-xs text-[#4c739a]",children:[e.jsx("a",{className:"hover:text-primary",href:"#",children:"Bantuan IT"}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("a",{className:"hover:text-primary",href:"/ticket-tracker",children:"Lacak Tiket Publik"}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("a",{className:"hover:text-primary",href:"#",children:"Kebijakan Privasi"}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:"v3.0.0"})]})]})})]}),e.jsxs("div",{className:"hidden md:flex md:w-1/2 relative bg-slate-900 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-60 mix-blend-overlay",style:{backgroundImage:"url('https://images.unsplash.com/photo-1519494026892-80bbd2d6fd0d?ixlib=rb-4.0.3&auto=format&fit=crop&w=2053&q=80')"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#101922] via-[#101922]/80 to-transparent"}),e.jsx("div",{className:"relative z-10 flex flex-col justify-end p-12 lg:p-20 w-full",children:e.jsxs("div",{className:"max-w-lg",children:[e.jsxs("div",{className:"mb-6 inline-flex items-center justify-center rounded-full bg-primary/20 backdrop-blur-sm border border-primary/30 px-4 py-1.5 text-sm font-medium text-blue-200",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"medical_services"}),"Sistem Internal"]}),e.jsx("h2",{className:"text-white text-4xl font-bold leading-tight tracking-tight mb-4",children:"Manajemen Layanan Terpadu Rumah Sakit Kota"}),e.jsx("p",{className:"text-slate-300 text-lg font-normal leading-relaxed mb-8",children:"Meningkatkan efisiensi operasional dan kepuasan pasien melalui sistem pelaporan terintegrasi berbasis AI."}),e.jsxs("div",{className:"flex gap-8 border-t border-white/10 pt-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:"99.9%"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Reliabilitas Uptime"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:"256-bit"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Enkripsi SSL"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:"ISO"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Standar Internasional"})]})]})]})})]})]})})}class wt{async withPublicFallback(t,s,d=[]){try{return(await S.get(t)).data||[]}catch(j){console.warn(`Primary endpoint ${t} failed, trying public fallback...`,j);try{return(await S.get(s)).data||[]}catch(v){return console.error(`Public fallback ${s} also failed:`,v),d}}}async getReportData(t){try{return(await S.get("/reports",{params:t})).data||{data:[],summary:{total_tickets:0,open_tickets:0,in_progress_tickets:0,resolved_tickets:0,closed_tickets:0,average_resolution_time:0},pagination:{page:1,limit:10,total:0,totalPages:0}}}catch(s){return console.error("Error fetching report data:",s),{data:[],summary:{total_tickets:0,open_tickets:0,in_progress_tickets:0,resolved_tickets:0,closed_tickets:0,average_resolution_time:0},pagination:{page:1,limit:10,total:0,totalPages:0}}}}async getUnits(){return this.withPublicFallback("/reports/units","/master-data/public/units")}async getServiceCategories(){return this.withPublicFallback("/reports/categories","/master-data/public/service-categories")}async exportToExcel(t){try{return(await S.get("/reports/export/excel",{params:t,responseType:"blob"})).data}catch(s){throw console.error("Error exporting to Excel:",s),s}}async exportToPDF(t){try{return(await S.get("/reports/export/pdf",{params:t,responseType:"blob"})).data}catch(s){throw console.error("Error exporting to PDF:",s),s}}async getSurveyReports(t,s){try{return(await S.get("/reports/surveys",{params:{start_date:t,end_date:s}})).data||[]}catch(d){return console.error("Error fetching survey reports:",d),[]}}async getSurveyStats(t,s){try{return(await S.get("/reports/surveys/stats",{params:{start_date:t,end_date:s}})).data||{total_surveys:0,total_responses:0,average_completion_rate:0,active_surveys:0}}catch(d){return console.error("Error fetching survey stats:",d),{total_surveys:0,total_responses:0,average_completion_rate:0,active_surveys:0}}}async exportSurveyReport(t,s){try{const d=await S.get("/reports/surveys/export",{params:{start_date:t,end_date:s},responseType:"blob"}),j=window.URL.createObjectURL(new Blob([d.data])),v=document.createElement("a");v.href=j,v.setAttribute("download",`survey-report-${t}-to-${s}.xlsx`),document.body.appendChild(v),v.click(),v.remove(),window.URL.revokeObjectURL(j)}catch(d){throw console.error("Error exporting survey report:",d),d}}}const J=new wt,_t=()=>{const[a,t]=l.useState(null),[s,d]=l.useState(!0),[j,v]=l.useState(null),[f,g]=l.useState({dateRange:"month",unitId:"",categoryId:"",status:"",priority:""}),[b,h]=l.useState([]),[N,p]=l.useState([]),[r,k]=l.useState(1),[u,x]=l.useState({dateRange:!1,unit:!1,category:!1});l.useEffect(()=>{y(),_()},[]),l.useEffect(()=>{y()},[f,r]);const y=async()=>{try{d(!0),v(null);const C=await J.getReportData({...f,page:r,limit:10});t(C)}catch(C){console.error("Error loading report data:",C),v("Gagal memuat data laporan")}finally{d(!1)}},_=async()=>{try{const[C,D]=await Promise.all([J.getUnits(),J.getServiceCategories()]);h(C),p(D)}catch(C){console.error("Error loading filter options:",C)}},m=(C,D)=>{g(M=>({...M,[C]:D})),k(1)},c=()=>{y(),x({dateRange:!1,unit:!1,category:!1})},o=async()=>{try{const C=await J.exportToPDF(f),D=window.URL.createObjectURL(C),M=document.createElement("a");M.href=D,M.download=`laporan-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(M),M.click(),window.URL.revokeObjectURL(D),document.body.removeChild(M)}catch(C){console.error("Error exporting PDF:",C),alert("Gagal mengekspor PDF")}},i=async()=>{try{const C=await J.exportToExcel(f),D=window.URL.createObjectURL(C),M=document.createElement("a");M.href=D,M.download=`laporan-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(M),M.click(),window.URL.revokeObjectURL(D),document.body.removeChild(M)}catch(C){console.error("Error exporting Excel:",C),alert("Gagal mengekspor Excel")}},n=()=>{switch(f.dateRange){case"week":return"Minggu Ini";case"month":return"Bulan Ini";case"quarter":return"Kuartal Ini";case"year":return"Tahun Ini";default:return"Bulan Ini"}},w=()=>{if(!f.unitId)return"Semua Unit";const C=b.find(D=>D.id===f.unitId);return C?C.name:"Semua Unit"},E=()=>{if(!f.categoryId)return"Semua Kategori";const C=N.find(D=>D.id===f.categoryId);return C?C.name:"Semua Kategori"},P=C=>{switch(C){case"open":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300";case"in_progress":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300";case"resolved":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300";case"closed":return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300";case"escalated":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}},K=C=>{switch(C){case"open":return"Baru";case"in_progress":return"Sedang Proses";case"resolved":return"Selesai";case"closed":return"Ditutup";case"escalated":return"Eskalasi";default:return C}},L=C=>{switch(C){case"critical":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-primary";default:return"bg-gray-500"}};return s&&!a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Memuat data laporan..."})]})}):j?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"‚ö†Ô∏è"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Terjadi Kesalahan"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:j}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Coba Lagi"})]})}):e.jsxs("div",{className:"flex flex-col gap-6 p-6 md:p-8 max-w-[1600px] mx-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-[#4c739a] dark:text-slate-400",children:[e.jsx("a",{className:"hover:text-primary transition-colors",href:"/",children:"Beranda"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-[#0d141b] dark:text-white font-medium",children:"Laporan & Analitik"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-[#0d141b] dark:text-white text-3xl font-black leading-tight tracking-[-0.033em]",children:"Laporan & Analitik"}),e.jsx("p",{className:"text-[#4c739a] dark:text-slate-400 text-base font-normal",children:"Wawasan mendalam mengenai tren komplain dan performa pelayanan RS."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-surface-dark border border-[#e7edf3] dark:border-slate-700 rounded-lg text-[#0d141b] dark:text-white text-sm font-medium hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"picture_as_pdf"}),"Ekspor PDF"]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-surface-dark border border-[#e7edf3] dark:border-slate-700 rounded-lg text-[#0d141b] dark:text-white text-sm font-medium hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"table_view"}),"Ekspor Excel"]})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-surface-dark rounded-xl border border-[#e7edf3] dark:border-slate-700 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 flex-1 w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>x(C=>({...C,dateRange:!C.dateRange})),className:"flex h-10 shrink-0 items-center justify-between gap-x-2 rounded-lg bg-[#f6f7f8] dark:bg-slate-800 hover:bg-[#eef2f6] dark:hover:bg-slate-700 px-4 min-w-[180px] text-left transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[#4c739a] text-[20px]",children:"calendar_month"}),e.jsx("p",{className:"text-[#0d141b] dark:text-white text-sm font-medium",children:n()})]}),e.jsx("span",{className:"material-symbols-outlined text-[#0d141b] dark:text-white text-[20px]",children:"expand_more"})]}),u.dateRange&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg z-10 min-w-[180px]",children:[{value:"week",label:"Minggu Ini"},{value:"month",label:"Bulan Ini"},{value:"quarter",label:"Kuartal Ini"},{value:"year",label:"Tahun Ini"}].map(C=>e.jsx("button",{onClick:()=>{m("dateRange",C.value),x(D=>({...D,dateRange:!1}))},className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-slate-700 text-sm",children:C.label},C.value))})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>x(C=>({...C,unit:!C.unit})),className:"flex h-10 shrink-0 items-center justify-between gap-x-2 rounded-lg bg-[#f6f7f8] dark:bg-slate-800 hover:bg-[#eef2f6] dark:hover:bg-slate-700 px-4 min-w-[160px] text-left transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[#4c739a] text-[20px]",children:"domain"}),e.jsx("p",{className:"text-[#0d141b] dark:text-white text-sm font-medium",children:w()})]}),e.jsx("span",{className:"material-symbols-outlined text-[#0d141b] dark:text-white text-[20px]",children:"expand_more"})]}),u.unit&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg z-10 min-w-[200px] max-h-60 overflow-y-auto",children:[e.jsx("button",{onClick:()=>{m("unitId",""),x(C=>({...C,unit:!1}))},className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-slate-700 text-sm border-b border-gray-100 dark:border-slate-700",children:"Semua Unit"}),b.map(C=>e.jsx("button",{onClick:()=>{m("unitId",C.id),x(D=>({...D,unit:!1}))},className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-slate-700 text-sm",children:C.name},C.id))]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>x(C=>({...C,category:!C.category})),className:"flex h-10 shrink-0 items-center justify-between gap-x-2 rounded-lg bg-[#f6f7f8] dark:bg-slate-800 hover:bg-[#eef2f6] dark:hover:bg-slate-700 px-4 min-w-[160px] text-left transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[#4c739a] text-[20px]",children:"category"}),e.jsx("p",{className:"text-[#0d141b] dark:text-white text-sm font-medium",children:E()})]}),e.jsx("span",{className:"material-symbols-outlined text-[#0d141b] dark:text-white text-[20px]",children:"expand_more"})]}),u.category&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg z-10 min-w-[200px] max-h-60 overflow-y-auto",children:[e.jsx("button",{onClick:()=>{m("categoryId",""),x(C=>({...C,category:!1}))},className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-slate-700 text-sm border-b border-gray-100 dark:border-slate-700",children:"Semua Kategori"}),N.map(C=>e.jsx("button",{onClick:()=>{m("categoryId",C.id),x(D=>({...D,category:!1}))},className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-slate-700 text-sm",children:C.name},C.id))]})]})]}),e.jsx("button",{onClick:c,className:"h-10 px-6 bg-primary hover:bg-blue-600 text-white text-sm font-medium rounded-lg shadow-sm transition-colors w-full md:w-auto",children:"Terapkan Filter"})]})}),a&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-5 rounded-xl border border-[#e7edf3] dark:border-slate-700 shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-primary p-2 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined",children:"inbox"})}),e.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"arrow_upward"}),"5%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#4c739a] dark:text-slate-400 text-sm font-medium",children:"Total Komplain"}),e.jsx("h3",{className:"text-[#0d141b] dark:text-white text-2xl font-bold",children:a.summary?.total_tickets||0})]})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-5 rounded-xl border border-[#e7edf3] dark:border-slate-700 shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 p-2 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined",children:"check_circle"})}),e.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"arrow_upward"}),"3%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#4c739a] dark:text-slate-400 text-sm font-medium",children:"Diselesaikan"}),e.jsx("h3",{className:"text-[#0d141b] dark:text-white text-2xl font-bold",children:a.summary?.resolved_tickets||0})]})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-5 rounded-xl border border-[#e7edf3] dark:border-slate-700 shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 p-2 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined",children:"timer"})}),e.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"arrow_downward"}),"2m"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#4c739a] dark:text-slate-400 text-sm font-medium",children:"Rata-rata Respon"}),e.jsxs("h3",{className:"text-[#0d141b] dark:text-white text-2xl font-bold",children:[a.summary?.average_resolution_time||0," Menit"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-white dark:to-surface-dark p-5 rounded-xl border border-primary/20 shadow-sm flex flex-col gap-2 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:e.jsx("span",{className:"material-symbols-outlined text-6xl text-primary",children:"auto_awesome"})}),e.jsxs("div",{className:"flex justify-between items-start relative z-10",children:[e.jsx("div",{className:"bg-primary/10 text-primary p-2 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined",children:"trending_up"})}),e.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded-full border border-primary/20 text-primary bg-white dark:bg-slate-800",children:"Prediksi AI"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-[#4c739a] dark:text-slate-400 text-sm font-medium",children:"Proyeksi Minggu Depan"}),e.jsxs("h3",{className:"text-[#0d141b] dark:text-white text-2xl font-bold",children:["~",Math.ceil((a.summary?.total_tickets||0)*1.1)," ",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"Kasus"})]})]})]})]}),a&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-surface-dark p-6 rounded-xl border border-[#e7edf3] dark:border-slate-700 shadow-sm flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-[#0d141b] dark:text-white text-lg font-bold",children:"Tren Komplain (30 Hari)"}),e.jsx("button",{className:"text-primary text-sm font-medium hover:underline",children:"Lihat Detail"})]}),e.jsxs("div",{className:"w-full h-64 flex flex-col justify-end relative pl-8 pb-6",children:[e.jsxs("div",{className:"absolute left-0 top-0 h-full flex flex-col justify-between text-xs text-gray-400 pb-6 pr-2",children:[e.jsx("span",{children:"100"}),e.jsx("span",{children:"75"}),e.jsx("span",{children:"50"}),e.jsx("span",{children:"25"}),e.jsx("span",{children:"0"})]}),e.jsx("div",{className:"absolute bottom-6 left-8 right-0 border-b border-gray-200 dark:border-gray-700"}),e.jsx("div",{className:"w-full h-full flex items-end justify-between gap-1 z-10 pt-2",children:a.data&&a.data.slice(-7).map((C,D)=>{const M=Math.max(...a.data.map(R=>1)),T=M>0?1/M*100:0;return e.jsx("div",{className:"flex flex-col items-center flex-1",children:e.jsx("div",{className:"w-full bg-primary rounded-t-sm min-h-[4px]",style:{height:`${T}%`},title:"1 komplain"})},D)})}),e.jsx("div",{className:"absolute bottom-0 left-8 right-0 flex justify-between text-xs text-gray-400 pt-2",children:a.data&&a.data.slice(-7).map((C,D)=>e.jsx("span",{className:"text-center flex-1",children:new Date(C.created_at).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit"})},D))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl border border-[#e7edf3] dark:border-slate-700 shadow-sm flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-orange-500",children:"warning"}),e.jsx("h3",{className:"text-[#0d141b] dark:text-white text-lg font-bold",children:"Risiko Tinggi"})]}),e.jsx("div",{className:"flex flex-col gap-4 flex-1 justify-center",children:[{unitName:"Unit A",riskLevel:"high",riskPercentage:75},{unitName:"Unit B",riskLevel:"medium",riskPercentage:45},{unitName:"Unit C",riskLevel:"low",riskPercentage:20}].map((C,D)=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:C.unitName}),e.jsxs("span",{className:`font-bold ${C.riskLevel==="critical"?"text-red-600":C.riskLevel==="high"?"text-orange-500":C.riskLevel==="medium"?"text-yellow-500":"text-primary"}`,children:[C.riskPercentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${L(C.riskLevel)}`,style:{width:`${C.riskPercentage}%`}})})]},D))}),e.jsxs("div",{className:"mt-2 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg text-xs text-[#4c739a] dark:text-blue-300 flex gap-2 items-start",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-primary mt-0.5",children:"info"}),e.jsx("p",{children:"Prediksi risiko berdasarkan volume komplain dan waktu respon lambat dalam 7 hari terakhir."})]})]})]}),a&&e.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl border border-[#e7edf3] dark:border-slate-700 shadow-sm overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-[#e7edf3] dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h3",{className:"text-[#0d141b] dark:text-white text-lg font-bold",children:"Detail Laporan Komplain"}),e.jsx("button",{className:"text-[#4c739a] hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"filter_list"})})]}),e.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800 text-xs uppercase text-[#4c739a] dark:text-slate-400 font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 rounded-tl-lg",children:"ID Tiket"}),e.jsx("th",{className:"px-6 py-4",children:"Tanggal"}),e.jsx("th",{className:"px-6 py-4",children:"Unit Kerja"}),e.jsx("th",{className:"px-6 py-4",children:"Kategori"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4 rounded-tr-lg",children:"Waktu Respon"})]})}),e.jsx("tbody",{className:"text-sm text-[#0d141b] dark:text-white divide-y divide-[#e7edf3] dark:divide-slate-700",children:a.data&&a.data.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-medium",children:C.ticketNumber}),e.jsx("td",{className:"px-6 py-4 text-[#4c739a] dark:text-slate-400",children:C.date}),e.jsx("td",{className:"px-6 py-4",children:C.unitName}),e.jsx("td",{className:"px-6 py-4",children:C.categoryName}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${P(C.status)}`,children:K(C.status)})}),e.jsx("td",{className:"px-6 py-4",children:C.responseTime!==null?e.jsxs("span",{className:`font-medium ${C.responseTime>60?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[C.responseTime," Menit ",C.responseTime>60?"(Lambat)":""]}):e.jsx("span",{className:"text-[#4c739a] dark:text-slate-400",children:"-"})})]},C.id))})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-[#e7edf3] dark:border-slate-700 flex justify-between items-center bg-gray-50 dark:bg-slate-800",children:[e.jsxs("span",{className:"text-sm text-[#4c739a] dark:text-slate-400",children:["Menampilkan ",(r-1)*10+1,"-",Math.min(r*10,a.pagination?.total||0)," dari ",a.pagination?.total||0," laporan"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>k(C=>Math.max(1,C-1)),disabled:r===1,className:"size-8 flex items-center justify-center rounded border border-[#e7edf3] dark:border-slate-700 bg-white dark:bg-slate-800 text-[#4c739a] dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-700 disabled:opacity-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"chevron_left"})}),Array.from({length:Math.min(3,Math.ceil((a.pagination?.total||0)/10))},(C,D)=>{const M=r+D-1;return M<1||M>Math.ceil((a.pagination?.total||0)/10)?null:e.jsx("button",{onClick:()=>k(M),className:`size-8 flex items-center justify-center rounded border text-sm font-medium ${M===r?"border-primary bg-primary text-white":"border-[#e7edf3] dark:border-slate-700 bg-white dark:bg-slate-800 text-[#0d141b] dark:text-white hover:bg-gray-100 dark:hover:bg-slate-700"}`,children:M},M)}),e.jsx("button",{onClick:()=>k(C=>Math.min(Math.ceil((a.pagination?.total||0)/10),C+1)),disabled:r>=Math.ceil((a.pagination?.total||0)/10),className:"size-8 flex items-center justify-center rounded border border-[#e7edf3] dark:border-slate-700 bg-white dark:bg-slate-800 text-[#4c739a] dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-700 disabled:opacity-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"chevron_right"})})]})]})]})]})},St=async()=>{try{return(await S.get("/notification-settings")).data}catch(a){throw console.error("Error fetching notification settings:",a),a}},Ct=async(a,t)=>{try{return(await S.put(`/notification-settings/${a}`,t)).data}catch(s){throw console.error("Error updating notification setting:",s),s}},Tt=async a=>{try{return(await S.put("/notification-settings/bulk",{updates:a})).data}catch(t){throw console.error("Error bulk updating notification settings:",t),t}},ue={getNotificationSettings:St,updateNotificationSetting:Ct,bulkUpdateNotificationSettings:Tt},At=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(null),[f,g]=l.useState(!1);l.useEffect(()=>{b()},[]);const b=async()=>{try{d(!0),v(null);const p=await ue.getNotificationSettings(),r=[{id:"1",type:"ticket_created",enabled:!0,email_enabled:!0,sms_enabled:!1,push_enabled:!0,description:"Notifikasi ketika tiket baru dibuat"},{id:"2",type:"ticket_updated",enabled:!0,email_enabled:!0,sms_enabled:!1,push_enabled:!0,description:"Notifikasi ketika status tiket diperbarui"},{id:"3",type:"ticket_resolved",enabled:!0,email_enabled:!0,sms_enabled:!0,push_enabled:!0,description:"Notifikasi ketika tiket diselesaikan"},{id:"4",type:"escalation_triggered",enabled:!0,email_enabled:!0,sms_enabled:!0,push_enabled:!0,description:"Notifikasi ketika eskalasi dipicu"},{id:"5",type:"survey_reminder",enabled:!1,email_enabled:!0,sms_enabled:!1,push_enabled:!1,description:"Pengingat untuk mengisi survei"}];t(p.length>0?p:r)}catch(p){console.error("Error fetching notification settings:",p),v(p.message||"Failed to fetch notification settings"),t([{id:"1",type:"ticket_created",enabled:!0,email_enabled:!0,sms_enabled:!1,push_enabled:!0,description:"Notifikasi ketika tiket baru dibuat"}])}finally{d(!1)}},h=async(p,r,k)=>{try{g(!0),t(u=>u.map(x=>x.id===p?{...x,[r]:k}:x)),await ue.updateNotificationSetting(p,{[r]:k})}catch(u){console.error("Error updating notification setting:",u),v(u.message||"Failed to update notification setting"),await b()}finally{g(!1)}},N=async(p,r)=>{try{g(!0);const k=a.map(u=>({id:u.id,[p]:r}));await ue.bulkUpdateNotificationSettings(k),await b()}catch(k){console.error("Error bulk updating notification settings:",k),v(k.message||"Failed to bulk update notification settings")}finally{g(!1)}};return s?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notification Settings"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>N("enabled",!0),disabled:f,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:"Enable All"}),e.jsx("button",{onClick:()=>N("enabled",!1),disabled:f,className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 disabled:opacity-50",children:"Disable All"})]})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:e.jsx("div",{className:"text-sm text-red-700",children:j})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notification Type"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enabled"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SMS"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Push"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(p=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.type.replace(/_/g," ").replace(/ w/g,r=>r.toUpperCase())}),e.jsx("div",{className:"text-sm text-gray-500",children:p.description})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:p.enabled,onChange:r=>h(p.id,"enabled",r.target.checked),disabled:f,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:p.email_enabled,onChange:r=>h(p.id,"email_enabled",r.target.checked),disabled:f||!p.enabled,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:p.sms_enabled,onChange:r=>h(p.id,"sms_enabled",r.target.checked),disabled:f||!p.enabled,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:p.push_enabled,onChange:r=>h(p.id,"push_enabled",r.target.checked),disabled:f||!p.enabled,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})})]},p.id))})]})})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{children:"Saving..."})]})})})]})},Pt=()=>{const[a,t]=l.useState(null),s=[{id:"gambaran-umum",title:"E-Book Gambaran Umum Aplikasi KISS",subtitle:"Kanal Informasi Saran dan Survei",description:"Dokumentasi lengkap tentang gambaran umum, latar belakang, dasar regulasi, dan landasan hukum aplikasi KISS. Mencakup fitur-fitur utama, arsitektur sistem, dan manfaat implementasi.",pages:156,category:"Gambaran Umum",htmlFile:"KISS_Gambaran_Umum.html",pdfFile:"KISS_Gambaran_Umum.pdf"},{id:"alur-teknis",title:"E-Book Alur Teknis Aplikasi KISS",subtitle:"Dokumentasi Teknis Lengkap",description:"Panduan teknis komprehensif meliputi arsitektur sistem, struktur database, API endpoints, alur data, keamanan, monitoring, dan deployment aplikasi KISS.",pages:198,category:"Teknis",htmlFile:"KISS_Alur_Teknis.html",pdfFile:"KISS_Alur_Teknis.pdf"},{id:"petunjuk-teknis",title:"E-Book Petunjuk Teknis Aplikasi KISS",subtitle:"Panduan Operasional",description:"Petunjuk operasional lengkap untuk instalasi, setup, konfigurasi, pengelolaan keluhan, survei kepuasan, QR Code management, dashboard, dan troubleshooting.",pages:224,category:"Operasional",htmlFile:"KISS_Petunjuk_Teknis.html",pdfFile:"KISS_Petunjuk_Teknis.pdf"}],d=g=>{const b=`/ebooks/${g.htmlFile}`;window.open(b,"_blank")},j=async g=>{try{t(g.id);const b=document.createElement("a");b.href=`/ebooks/${g.pdfFile}`,b.download=g.pdfFile,document.body.appendChild(b),b.click(),document.body.removeChild(b),setTimeout(()=>t(null),1e3)}catch(b){console.error("Error downloading PDF:",b),t(null)}},v=g=>{switch(g){case"Gambaran Umum":return e.jsx(Se,{className:"w-6 h-6"});case"Teknis":return e.jsx(tt,{className:"w-6 h-6"});case"Operasional":return e.jsx(et,{className:"w-6 h-6"});default:return e.jsx(Ce,{className:"w-6 h-6"})}},f=g=>{switch(g){case"Gambaran Umum":return"bg-blue-100 text-blue-800";case"Teknis":return"bg-green-100 text-green-800";case"Operasional":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-white p-4 rounded-full shadow-lg",children:e.jsx(Se,{className:"w-12 h-12 text-blue-600"})})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"üìö Buku Petunjuk Aplikasi KISS"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Koleksi lengkap dokumentasi dan panduan untuk Kanal Informasi Saran dan Survei (KISS). Unduh e-book profesional dalam format PDF atau baca langsung dalam format HTML."})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Penulis dan Pengembang"}),e.jsx("p",{className:"text-blue-600 font-medium",children:"MUKHSIN HADI, SE, M.Si, CGAA, CPFRM, CSEP, CRP, CPRM, CSCAP, CPABC"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Praktisi dan akademisi di bidang sistem informasi manajemen dengan pengalaman lebih dari 15 tahun dalam pengembangan aplikasi enterprise untuk sektor publik."})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:s.map(g=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v(g.category),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f(g.category)} bg-white`,children:g.category})]}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:g.title}),e.jsx("p",{className:"text-blue-100 text-sm",children:g.subtitle})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-4",children:g.description}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Ce,{className:"w-4 h-4 mr-1"}),g.pages," halaman"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Format: PDF & HTML"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>d(g),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center space-x-2",children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsx("span",{children:"Baca Online (HTML)"})]}),e.jsx("button",{onClick:()=>j(g),disabled:a===g.id,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors duration-200 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a===g.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Mengunduh..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{children:"Unduh E-Book (PDF)"})]})})]})]})]},g.id))}),e.jsx("div",{className:"mt-12 bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informasi Hak Cipta"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsx("p",{children:"¬© 2024 MUKHSIN HADI, SE, M.Si, CGAA, CPFRM, CSEP, CRP, CPRM, CSCAP, CPABC"}),e.jsx("p",{children:"aplikasiKISS@2024.Mukhsin Hadi"}),e.jsx("p",{className:"font-medium",children:"Hak Cipta dilindungi oleh Undang-Undang"}),e.jsx("p",{className:"text-xs",children:"Dilarang memperbanyak sebagian atau seluruh isi e-book ini tanpa izin tertulis dari penulis."})]})]})}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"3"}),e.jsx("div",{className:"text-gray-600",children:"E-Book Tersedia"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"578"}),e.jsx("div",{className:"text-gray-600",children:"Total Halaman"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"2"}),e.jsx("div",{className:"text-gray-600",children:"Format Tersedia"})]})]})]})})};function Dt(){const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(null),[f,g]=l.useState("all"),[b,h]=l.useState("all"),[N,p]=l.useState(""),{isAuthenticated:r,isLoading:k}=ne();l.useEffect(()=>{!k&&r?(console.log("TicketList: User is authenticated, fetching tickets..."),u()):!k&&!r?(console.log("TicketList: User is not authenticated"),v("Anda harus login terlebih dahulu"),d(!1)):console.log("TicketList: Auth is loading...")},[r,k]);async function u(){if(!r){console.log("TicketList: Cannot fetch tickets - user not authenticated"),v("Anda harus login terlebih dahulu"),d(!1);return}console.log("TicketList: Starting to fetch tickets..."),d(!0),v(null);try{const c=await G.getTickets();console.log("TicketList: API response received:",c),c.success?(t(c.data||[]),console.log("TicketList: Successfully loaded",c.data?.length||0,"tickets")):(console.error("TicketList: API returned error:",c.error),v(c.error||"Failed to fetch tickets"),t([]))}catch(c){console.error("TicketList: Exception while fetching tickets:",c),v(c.message||"Failed to fetch tickets"),t([])}finally{d(!1)}}const x=a.filter(c=>{const o=f==="all"||c.status===f,i=b==="all"||c.priority===b,n=N===""||c.title.toLowerCase().includes(N.toLowerCase())||(c.ticket_number||"").toLowerCase().includes(N.toLowerCase())||(c.units?.name||"").toLowerCase().includes(N.toLowerCase());return o&&i&&n}),y=c=>{switch(c){case"open":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 border-blue-200 dark:border-blue-900/50";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 border-yellow-200 dark:border-yellow-900/50";case"escalated":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 border-orange-200 dark:border-orange-900/50";case"resolved":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300 border-emerald-200 dark:border-emerald-900/50";case"closed":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 border-red-200 dark:border-red-900/50";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-600"}},_=c=>({open:"Baru",in_progress:"Diproses",escalated:"Eskalasi",resolved:"Selesai",closed:"Ditutup"})[c]||c,m=c=>({low:"Rendah",medium:"Sedang",high:"Tinggi",critical:"Kritis"})[c]||c;return e.jsxs("div",{className:"p-6 md:p-8 max-w-[1600px] mx-auto flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Daftar Tiket"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Kelola semua tiket masuk dan status penyelesaian."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:u,className:"p-2 text-slate-500 hover:text-primary transition-colors bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined",children:"refresh"})}),e.jsxs("div",{className:"text-xs text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:["API: ","/api"]}),!r&&e.jsx("button",{onClick:async()=>{try{const{authService:c}=await Z(async()=>{const{authService:i}=await import("./authService-D1MvrsyH.js");return{authService:i}},__vite__mapDeps([0,1,2,3,4,5])),o=await c.login("admin@jempol.com","password");o.success?window.location.reload():alert("Login failed: "+o.error)}catch(c){alert("Login error: "+c.message)}},className:"px-3 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 transition-colors",children:"Quick Login (Test)"}),e.jsxs(I,{to:"/tickets/create/internal",className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors shadow-sm shadow-blue-500/30",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"add"}),e.jsx("span",{children:"Buat Tiket Baru"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"search"})}),e.jsx("input",{className:"pl-10 pr-4 py-2 w-full border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 dark:text-white",placeholder:"Cari ID tiket, judul, atau unit...",type:"text",value:N,onChange:c=>p(c.target.value)})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[e.jsxs("select",{className:"px-3 py-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 dark:text-white",value:f,onChange:c=>g(c.target.value),children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"open",children:"Baru"}),e.jsx("option",{value:"in_progress",children:"Diproses"}),e.jsx("option",{value:"escalated",children:"Eskalasi"}),e.jsx("option",{value:"resolved",children:"Selesai"}),e.jsx("option",{value:"closed",children:"Ditutup"})]}),e.jsxs("select",{className:"px-3 py-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 dark:text-white",value:b,onChange:c=>h(c.target.value),children:[e.jsx("option",{value:"all",children:"Semua Prioritas"}),e.jsx("option",{value:"low",children:"Rendah"}),e.jsx("option",{value:"medium",children:"Sedang"}),e.jsx("option",{value:"high",children:"Tinggi"}),e.jsx("option",{value:"critical",children:"Kritis"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"ID Tiket"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Judul & Deskripsi"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Unit"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Prioritas"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"SLA"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider text-right",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:k||s?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:k?"Memverifikasi autentikasi...":"Memuat data tiket..."})}):j?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-6 py-8 text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:j}),!r&&e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-600 mb-4",children:"Silakan login untuk mengakses data tiket."}),e.jsx(I,{to:"/login",className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Login Sekarang"})]})]})}):x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:"Tidak ada tiket yang ditemukan sesuai filter."})}):x.map(c=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx(I,{to:`/tickets/${c.id}`,className:"text-primary hover:underline font-medium text-sm",children:c.ticket_number}),e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:new Date(c.created_at).toLocaleDateString("id-ID")})]}),e.jsxs("td",{className:"px-6 py-4 max-w-xs",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:c.title}),e.jsx("p",{className:"text-xs text-slate-500 mt-0.5 truncate",children:c.description||"Tidak ada deskripsi"})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:c.units?.name||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${y(c.status)} capitalize`,children:_(c.status)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`capitalize text-sm font-medium ${c.priority==="critical"?"text-red-600":c.priority==="high"?"text-orange-600":"text-slate-600"}`,children:m(c.priority)})}),e.jsx("td",{className:"px-6 py-4",children:c.sla_deadline?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${new Date(c.sla_deadline).getTime()<new Date().getTime()&&c.status!=="resolved"?"bg-red-500":"bg-emerald-500"}`}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:new Date(c.sla_deadline).toLocaleDateString("id-ID",{day:"numeric",month:"short"})})]}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx(I,{to:`/tickets/${c.id}`,className:"text-slate-400 hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"visibility"})})})]},c.id))})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Menampilkan ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:x.length})," tiket"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-1 border border-slate-200 dark:border-slate-700 rounded-lg text-sm disabled:opacity-50",disabled:!0,children:"Sebelumnya"}),e.jsx("button",{className:"px-3 py-1 border border-slate-200 dark:border-slate-700 rounded-lg text-sm disabled:opacity-50",disabled:!0,children:"Selanjutnya"})]})]})]})]})}const Y=async(a,t,s=[])=>{try{console.log(`Trying primary endpoint: ${a}`);const d=await S.get(a);return console.log(`Primary endpoint ${a} success:`,d.data?.length||0,"records"),d.data||[]}catch(d){console.warn(`Primary endpoint ${a} failed, trying public fallback...`,d.message);try{console.log(`Trying public fallback: ${t}`);const j=await S.get(t);return console.log(`Public fallback ${t} success:`,j.data?.length||0,"records"),j.data||[]}catch(j){return console.error(`Public fallback ${t} also failed:`,j.message),console.log(`Using default data for ${a}:`,s.length,"records"),s}}},Lt=async()=>Y("/master-data/unit-types","/master-data/public/unit-types",[{id:"1",name:"Administratif",code:"ADM",description:"Unit Administratif",icon:"business",color:"#6B7280",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",name:"Layanan Medis",code:"MED",description:"Unit Layanan Medis",icon:"local_hospital",color:"#3B82F6",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),Et=async a=>(await S.post("/master-data/unit-types",a)).data,Rt=async(a,t)=>(await S.put(`/master-data/unit-types/${a}`,t)).data,Ut=async a=>{await S.delete(`/master-data/unit-types/${a}`)},Mt=async()=>Y("/master-data/service-categories","/master-data/public/service-categories"),It=async a=>(await S.post("/master-data/service-categories",a)).data,Ft=async(a,t)=>(await S.put(`/master-data/service-categories/${a}`,t)).data,Kt=async a=>{await S.delete(`/master-data/service-categories/${a}`)},$t=async()=>Y("/master-data/ticket-types","/master-data/public/ticket-types"),Bt=async a=>(await S.post("/master-data/ticket-types",a)).data,Ot=async(a,t)=>(await S.put(`/master-data/ticket-types/${a}`,t)).data,zt=async a=>{await S.delete(`/master-data/ticket-types/${a}`)},qt=async()=>Y("/master-data/ticket-classifications","/master-data/public/ticket-classifications"),Gt=async a=>(await S.post("/master-data/ticket-classifications",a)).data,Ht=async(a,t)=>(await S.put(`/master-data/ticket-classifications/${a}`,t)).data,Qt=async a=>{await S.delete(`/master-data/ticket-classifications/${a}`)},Jt=async()=>Y("/master-data/ticket-statuses","/master-data/public/ticket-statuses"),Vt=async a=>(await S.post("/master-data/ticket-statuses",a)).data,Wt=async(a,t)=>(await S.put(`/master-data/ticket-statuses/${a}`,t)).data,Zt=async a=>{await S.delete(`/master-data/ticket-statuses/${a}`)},Yt=async()=>{try{console.log("üîç Fetching patient types...");const a=await S.get("/master-data/patient-types");return console.log("‚úÖ Primary endpoint success:",a.data?.length||0,"records"),Array.isArray(a.data)?a.data:[]}catch(a){if(console.warn("‚ö†Ô∏è  Primary endpoint failed:",a.message),a.message.includes("403")||a.message.includes("401")||a.message.includes("Token tidak valid"))try{console.log("üîÑ Trying public fallback endpoint...");const t=await S.get("/master-data/public/patient-types");return console.log("‚úÖ Public fallback success:",t.data?.length||0,"records"),Array.isArray(t.data)?t.data:[]}catch(t){console.error("‚ùå Public fallback also failed:",t.message)}return console.log("üîÑ Using default patient types data"),[{id:"1",name:"Pasien Umum",code:"UMUM",description:"Pasien dengan layanan umum",priority_level:3,default_sla_hours:24,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",name:"Pasien VIP",code:"VIP",description:"Pasien dengan layanan VIP",priority_level:2,default_sla_hours:4,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",name:"Pasien Darurat",code:"DARURAT",description:"Pasien dengan kondisi darurat",priority_level:1,default_sla_hours:1,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]}},Xt=async a=>(await S.post("/master-data/patient-types",a)).data,ea=async(a,t)=>(await S.put(`/master-data/patient-types/${a}`,t)).data,ta=async a=>{await S.delete(`/master-data/patient-types/${a}`)},aa=async()=>Y("/master-data/roles","/master-data/public/roles"),sa=async a=>(await S.post("/master-data/roles",a)).data,ra=async(a,t)=>(await S.put(`/master-data/roles/${a}`,t)).data,la=async a=>{await S.delete(`/master-data/roles/${a}`)},ia=async()=>{try{return(await S.get("/master-data/response-templates")).data||[]}catch(a){return console.warn("Failed to fetch response templates:",a),[]}},na=async a=>(await S.post("/master-data/response-templates",a)).data,da=async(a,t)=>(await S.put(`/master-data/response-templates/${a}`,t)).data,oa=async a=>{await S.delete(`/master-data/response-templates/${a}`)},ca=async()=>{try{return(await S.get("/master-data/ai-trust-settings")).data||[]}catch(a){return console.warn("Failed to fetch AI trust settings:",a),[]}},xa=async(a,t)=>(await S.put(`/master-data/ai-trust-settings/${a}`,t)).data,$={getUnitTypes:Lt,createUnitType:Et,updateUnitType:Rt,deleteUnitType:Ut,getServiceCategories:Mt,createServiceCategory:It,updateServiceCategory:Ft,deleteServiceCategory:Kt,getTicketTypes:$t,createTicketType:Bt,updateTicketType:Ot,deleteTicketType:zt,getTicketClassifications:qt,createTicketClassification:Gt,updateTicketClassification:Ht,deleteTicketClassification:Qt,getTicketStatuses:Jt,createTicketStatus:Vt,updateTicketStatus:Wt,deleteTicketStatus:Zt,getPatientTypes:Yt,createPatientType:Xt,updatePatientType:ea,deletePatientType:ta,getRoles:aa,createRole:sa,updateRole:ra,deleteRole:la,getResponseTemplates:ia,createResponseTemplate:na,updateResponseTemplate:da,deleteResponseTemplate:oa,getAITrustSettings:ca,updateAITrustSetting:xa},ma=()=>{const{id:a}=he(),t=H(),[s,d]=l.useState(null),[j,v]=l.useState(!0),[f,g]=l.useState(null),[b,h]=l.useState([]),[N,p]=l.useState([]);l.useEffect(()=>{(async()=>{try{if(v(!0),g(null),a){const y=await G.getTicket(a);y.success?d(y.data):g(y.error||"Gagal mengambil data tiket")}const[u,x]=await Promise.all([$.getPatientTypes(),$.getUnitTypes()]);h(u),p(x)}catch(u){console.error("Error fetching ticket details:",u),g(u.message||"Failed to fetch ticket details")}finally{v(!1)}})()},[a]);const r=async k=>{try{if(!s)return;d({...s,status:k}),console.log("Status updated to:",k)}catch(u){console.error("Error updating ticket status:",u),g(u.message||"Failed to update ticket status")}};return j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):f?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:f})]})})}):s?e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.title}),e.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.status==="open"?"bg-green-100 text-green-800":s.status==="in_progress"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:s.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Created: ",new Date(s.created_at).toLocaleDateString()]})]})]}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Ticket Details"}),e.jsxs("dl",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.description})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Priority"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.priority})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Patient Type"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:b.find(k=>k.id===s.patient_type)?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Unit Type"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:N.find(k=>k.id===s.unit_type)?.name||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>r("in_progress"),className:"w-full bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700",disabled:s.status==="in_progress",children:"Mark In Progress"}),e.jsx("button",{onClick:()=>r("resolved"),className:"w-full bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",disabled:s.status==="resolved",children:"Mark Resolved"}),e.jsx("button",{onClick:()=>t("/tickets"),className:"w-full bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Back to Tickets"})]})]})]})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Ticket not found"}),e.jsx("button",{onClick:()=>t("/tickets"),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Back to Tickets"})]})},ua=()=>e.jsxs("div",{className:"flex flex-col h-full min-w-0 bg-background-light dark:bg-background-dark",children:[e.jsxs("header",{className:"flex flex-none items-center justify-between whitespace-nowrap border-b border-solid border-[#e7edf3] dark:border-slate-800 bg-white dark:bg-[#101922] px-6 py-3 z-20 rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"size-8 text-primary",children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M44 4H30.6666V17.3334H17.3334V30.6666H4V44H44V4Z"})})}),e.jsx("h2",{className:"text-[#0d141b] dark:text-white text-lg font-bold leading-tight tracking-[-0.015em]",children:"GovAssist CMS"})]}),e.jsx("label",{className:"hidden md:flex flex-col min-w-40 !h-10 max-w-64",children:e.jsxs("div",{className:"flex w-full flex-1 items-stretch rounded-lg h-full",children:[e.jsx("div",{className:"text-[#4c739a] flex border-none bg-[#f0f4f8] dark:bg-slate-800 items-center justify-center pl-4 rounded-l-lg border-r-0",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"search"})}),e.jsx("input",{className:"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#0d141b] dark:text-white focus:outline-0 focus:ring-0 border-none bg-[#f0f4f8] dark:bg-slate-800 focus:border-none h-full placeholder:text-[#4c739a] px-4 rounded-l-none border-l-0 pl-2 text-sm font-normal leading-normal",placeholder:"Search tickets...",defaultValue:""})]})})]}),e.jsxs("div",{className:"flex flex-1 justify-end gap-6 md:gap-8 items-center",children:[e.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[e.jsx("a",{className:"text-[#0d141b] dark:text-slate-200 text-sm font-medium leading-normal hover:text-primary transition-colors",href:"#",children:"Dashboard"}),e.jsx("a",{className:"text-primary text-sm font-medium leading-normal",href:"#",children:"Tickets"}),e.jsx("a",{className:"text-[#0d141b] dark:text-slate-200 text-sm font-medium leading-normal hover:text-primary transition-colors",href:"#",children:"Reports"}),e.jsx("a",{className:"text-[#0d141b] dark:text-slate-200 text-sm font-medium leading-normal hover:text-primary transition-colors",href:"#",children:"Settings"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"flex items-center justify-center text-[#4c739a] dark:text-slate-400 hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"notifications"})}),e.jsx("div",{className:"bg-center bg-no-repeat bg-cover rounded-full size-9 border-2 border-white dark:border-slate-700 shadow-sm cursor-pointer","data-alt":"User profile avatar showing a professional in business attire",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuBrbYkm9l-v9iHmYaen7iCX-2W8W0kg4LQkNVv-WG45JhvwqNk8x_cE5hlwNCeUDUgIBzlNFiAfFnPR5-hE7gUI3JpJaMt9ikSPo9Ldi0r0hSGKj16vZgQje_gf_qDv8CjtG0_h5Vx0Z-oONloCUhAUKHbTW79nJ0Mqi0MVbotMzkd9henNEcyjVza03zlzH3jn7LLi3Dn1ZapYvMVZqDPQ9HPxeScDcHhzjCjZBz8210GtNXJwvLHVTuN4qiz82d_L8GqdsTMRTUXA")'}})]})]})]}),e.jsx("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:e.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-8 py-6 pb-20 scrollbar-hide",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[e.jsx("a",{className:"text-[#4c739a] font-medium hover:text-primary transition-colors",href:"#",children:"Home"}),e.jsx("span",{className:"material-symbols-outlined text-[#4c739a] text-[16px]",children:"chevron_right"}),e.jsx("a",{className:"text-[#4c739a] font-medium hover:text-primary transition-colors",href:"#",children:"Tickets"}),e.jsx("span",{className:"material-symbols-outlined text-[#4c739a] text-[16px]",children:"chevron_right"}),e.jsx("span",{className:"text-[#0d141b] dark:text-white font-medium",children:"Ticket #4920"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 border-b border-[#e7edf3] dark:border-slate-800 pb-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-[#0d141b] dark:text-white text-3xl font-black leading-tight tracking-[-0.033em]",children:"Ticket #4920: Sanitation Issue in Ward B"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-[#4c739a]",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"calendar_today"})," Created Oct 24, 2023 ‚Ä¢ 10:00 AM"]}),e.jsx("span",{className:"hidden sm:inline",children:"‚Ä¢"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"apartment"})," Unit: Facilities Management"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2 h-10 px-4 bg-primary hover:bg-blue-600 text-white text-sm font-bold rounded-lg shadow-sm transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),e.jsx("span",{children:"Resolve"})]}),e.jsxs("button",{className:"flex items-center gap-2 h-10 px-4 bg-white dark:bg-slate-800 border border-[#e7edf3] dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 text-[#0d141b] dark:text-white text-sm font-bold rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"warning"}),e.jsx("span",{children:"Escalate"})]}),e.jsxs("button",{className:"flex items-center gap-2 h-10 px-4 bg-white dark:bg-slate-800 border border-[#e7edf3] dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 text-[#0d141b] dark:text-white text-sm font-bold rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"person_add"}),e.jsx("span",{children:"Assign"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border-l-4 border-indigo-500 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-white dark:from-indigo-900/30 dark:to-slate-800 px-6 py-4 border-b border-indigo-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-2 rounded-lg text-indigo-600 dark:text-indigo-300",children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"psychology"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-[#0d141b] dark:text-white",children:"AI Analysis & Insights"}),e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-indigo-200",children:"Powered by GovAI Engine v2.4"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"px-2 py-1 bg-white dark:bg-slate-700 rounded text-xs font-semibold text-indigo-600 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-900",children:"Analysis Complete"})})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-[#4c739a] mb-2",children:"Classification Result"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Complaint"}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"High Urgency"}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Sanitation Unit"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-1",children:[e.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-[#4c739a]",children:"AI Confidence Score"}),e.jsx("span",{className:"text-2xl font-black text-indigo-600 dark:text-indigo-400",children:"95%"})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-indigo-500 h-3 rounded-full relative",style:{width:"95%"},children:e.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})}),e.jsx("p",{className:"text-[11px] text-[#4c739a] mt-1.5 italic",children:"High confidence based on image pattern matching and keyword density."})]})]}),e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/10 rounded-lg p-4 border border-indigo-100 dark:border-indigo-900/30 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-indigo-700 dark:text-indigo-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"lightbulb"}),e.jsx("h4",{className:"text-sm font-bold",children:"Recommended Actions"})]}),e.jsxs("ul",{className:"space-y-2.5",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm text-[#0d141b] dark:text-slate-200",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-indigo-500 mt-0.5",children:"check_small"}),e.jsx("span",{children:"Dispatch cleaning crew immediately (SLA risk)."})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm text-[#0d141b] dark:text-slate-200",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-indigo-500 mt-0.5",children:"check_small"}),e.jsx("span",{children:"Follow-up call within 2 hours to confirm resolution."})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm text-[#0d141b] dark:text-slate-200",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-indigo-500 mt-0.5",children:"check_small"}),e.jsx("span",{children:"Log incident for weekly sanitation review."})]})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-indigo-100 dark:border-indigo-800/30 flex gap-2",children:e.jsxs("button",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200 flex items-center gap-1 transition-colors",children:["Apply All Recommendations ",e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"arrow_forward"})]})})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-[#e7edf3] dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-[#0d141b] dark:text-white mb-4",children:"Description"}),e.jsx("p",{className:"text-[#4c739a] dark:text-slate-300 leading-relaxed mb-6",children:"Patient reported overflowing bins in the main hallway of Ward B near the nurses' station. The smell is becoming noticeable and creating discomfort for visitors and patients in the waiting area. Several visitors have complained about the lack of timely cleaning. Attached photos show the condition as of 9:45 AM today."}),e.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2",children:[e.jsx("div",{className:"flex-none w-32 h-32 rounded-lg bg-gray-100 dark:bg-slate-700 overflow-hidden relative group cursor-pointer border border-[#e7edf3] dark:border-slate-600",children:e.jsx("div",{className:"bg-cover bg-center w-full h-full hover:scale-105 transition-transform duration-300","data-alt":"Photo of overflowing waste bin in a hospital corridor",style:{backgroundImage:"url('https://lh3.googleusercontent.com/aida-public/AB6AXuCA4CHH3a-NS7bVRvGht1TmBSQNBD0LTRgff88ppgrHzAkwbRrWBpPBotsT6pKxonmY_mkG7v-QRNbt7KkFL4LkInM6_RyeJNNFx5llGEZV7RZC9wfZwydw-TPIXe37doFJYJU33-nu5CLN8rC9uQvX8wh7nrAyi1r9kROdY6y9Q9vaoY5grOsg8askdvnrAu4xyc4HxIfN350Bzqi_-RxoXZmNbrKUJQ-laGW-yN86QZLHpvk5XAl_2Jv6ZHYGHpDh4GAFV28YHzGY')"}})}),e.jsx("div",{className:"flex-none w-32 h-32 rounded-lg bg-gray-100 dark:bg-slate-700 overflow-hidden relative group cursor-pointer border border-[#e7edf3] dark:border-slate-600",children:e.jsx("div",{className:"bg-cover bg-center w-full h-full hover:scale-105 transition-transform duration-300","data-alt":"Close up photo of trash on the floor",style:{backgroundImage:"url('https://lh3.googleusercontent.com/aida-public/AB6AXuDKcaduEKUl2AaXLswRe-a72BI_EL8kdTD5Y2pVsAOEkqTGn1ZVqw1WOnOrg6tXjkqrWj0jJwlsamafF2UfhIYRQ23qREqD8CXI6mVv2apUsgtnXO0xn7yfofxmXh0c0YAMArT7Xu6iSG6u_dr1o8eC6BdUgcgJg3JUk_lngR1FvSex2l7qUHEeZbwJvSIHbGx3umzVd76Tz55rMaF9f1hF5j-ROkdOqwECvgBrHJoPadno_AzO_OBpx8_VbTLNXZWQRYyNzT5VZS7_')"}})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-[#e7edf3] dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-[#0d141b] dark:text-white mb-6",children:"Activity History"}),e.jsxs("div",{className:"relative pl-8 border-l border-[#e7edf3] dark:border-slate-700 space-y-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -left-[39px] top-1 h-5 w-5 rounded-full bg-slate-200 dark:bg-slate-600 border-4 border-white dark:border-slate-800"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-[#0d141b] dark:text-white",children:"Agent Sarah Jenkins"}),e.jsx("span",{className:"text-xs text-[#4c739a]",children:"10:15 AM"})]}),e.jsx("p",{className:"text-sm text-[#4c739a] dark:text-slate-300",children:"Notified cleaning supervisor via internal radio. Expected resolution within 30 mins."})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -left-[39px] top-1 h-5 w-5 rounded-full bg-indigo-100 dark:bg-indigo-900 border-4 border-white dark:border-slate-800 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-[10px] text-indigo-600 dark:text-indigo-300",children:"smart_toy"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-indigo-600 dark:text-indigo-400",children:"System AI"}),e.jsx("span",{className:"text-xs text-[#4c739a]",children:"10:01 AM"})]}),e.jsxs("p",{className:"text-sm text-[#4c739a] dark:text-slate-300",children:["Auto-classified as ",e.jsx("span",{className:"font-medium text-[#0d141b] dark:text-white",children:"Sanitation / Hygiene"})," with High Priority."]})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -left-[39px] top-1 h-5 w-5 rounded-full bg-green-100 dark:bg-green-900 border-4 border-white dark:border-slate-800 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-[10px] text-green-600 dark:text-green-300",children:"add"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-[#0d141b] dark:text-white",children:"Ticket Created"}),e.jsx("span",{className:"text-xs text-[#4c739a]",children:"10:00 AM"})]}),e.jsx("p",{className:"text-sm text-[#4c739a] dark:text-slate-300",children:"Submitted via Mobile App by Guest User."})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-[#e7edf3] dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-sm font-bold text-[#0d141b] dark:text-white",children:"Add Internal Note or Response"}),e.jsxs("button",{className:"text-xs text-primary font-medium hover:underline flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"auto_awesome"})," Insert AI Suggestion"]})]}),e.jsxs("div",{className:"bg-[#f6f7f8] dark:bg-slate-900 rounded-lg p-3",children:[e.jsx("textarea",{className:"w-full bg-transparent border-none focus:ring-0 text-sm p-0 min-h-[100px] text-[#0d141b] dark:text-white placeholder-[#4c739a]",placeholder:"Type your response here..."}),e.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-1 text-[#4c739a] hover:text-primary rounded",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"attach_file"})}),e.jsx("button",{className:"p-1 text-[#4c739a] hover:text-primary rounded",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"format_bold"})})]}),e.jsxs("button",{className:"bg-primary hover:bg-blue-600 text-white text-sm font-bold px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx("span",{children:"Send Response"}),e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"send"})]})]})]})]})})]})]}),e.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-[#e7edf3] dark:border-slate-700 p-5 shadow-sm flex flex-col gap-4",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-[#4c739a] mb-1",children:"Ticket Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-[#4c739a]",children:"Status"}),e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-yellow-500 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-[#0d141b] dark:text-white",children:"In Progress"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-[#4c739a]",children:"Priority"}),e.jsxs("div",{className:"inline-flex items-center gap-1 text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded-md w-fit",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"priority_high"}),e.jsx("span",{className:"text-sm font-bold",children:"High"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 col-span-2",children:[e.jsx("span",{className:"text-xs text-[#4c739a]",children:"Assigned Unit"}),e.jsxs("select",{className:"form-select text-sm border-[#e7edf3] dark:border-slate-600 bg-[#f6f7f8] dark:bg-slate-700 rounded-lg py-2 pl-3 pr-8 focus:border-primary focus:ring-0 text-[#0d141b] dark:text-white",children:[e.jsx("option",{children:"Ward B - Sanitation"}),e.jsx("option",{children:"General Maintenance"}),e.jsx("option",{children:"Security"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-[#e7edf3] dark:border-slate-700 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-sm font-bold text-[#0d141b] dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[#4c739a]",children:"timer"})," SLA Timer"]}),e.jsx("span",{className:"text-xs font-bold text-orange-600 bg-orange-100 dark:bg-orange-900/30 px-2 py-1 rounded",children:"Near Breach"})]}),e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("span",{className:"text-2xl font-black text-[#0d141b] dark:text-white",children:"01h 45m"}),e.jsx("span",{className:"text-xs text-[#4c739a]",children:"remaining"})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2.5 overflow-hidden",children:e.jsx("div",{className:"bg-orange-500 h-2.5 rounded-full",style:{width:"75%"}})}),e.jsx("p",{className:"text-xs text-[#4c739a] mt-2",children:"Target resolution: Today, 2:00 PM"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-[#e7edf3] dark:border-slate-700 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-[#0d141b] dark:text-white",children:"Customer Sentiment"}),e.jsx("span",{className:"material-symbols-outlined text-[#4c739a]",children:"sentiment_dissatisfied"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative w-16 h-16 flex-none",children:[e.jsxs("svg",{className:"size-full -rotate-90",viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{className:"text-gray-200 dark:text-slate-700",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"text-red-500",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeDasharray:"80, 100",strokeWidth:"4"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-red-500 font-bold text-sm",children:"-0.8"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:"Negative"}),e.jsx("span",{className:"text-xs text-[#4c739a] leading-tight",children:"User language indicates frustration and urgency."})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-[#e7edf3] dark:border-slate-700 p-5 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-bold text-[#0d141b] dark:text-white mb-4",children:"Reporter Info"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"size-10 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center text-[#4c739a] dark:text-white font-bold text-sm",children:"JD"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-[#0d141b] dark:text-white",children:"John Doe"}),e.jsx("p",{className:"text-xs text-[#4c739a]",children:"Patient Family Member"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{className:"flex items-center gap-3 text-sm text-[#4c739a] hover:text-primary transition-colors",href:"#",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"mail"}),"john.doe@example.com"]}),e.jsxs("a",{className:"flex items-center gap-3 text-sm text-[#4c739a] hover:text-primary transition-colors",href:"#",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"call"}),"+1 (555) 123-4567"]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-[#4c739a]",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"history"}),e.jsx("span",{children:"2 previous tickets"})]})]})]})]})]})]})})})]}),pa=()=>{const[a,t]=l.useState(""),[s,d]=l.useState(null),[j,v]=l.useState(!1),[f,g]=l.useState(""),[b,h]=l.useState(!1),N=async p=>{if(p.preventDefault(),!!a.trim()){v(!0),g(""),d(null),h(!0);try{const r=await G.getPublicTicket(a);r.success?d(r.data):g(r.error||"Tiket tidak ditemukan. Mohon periksa kembali nomor tiket Anda.")}catch(r){console.error("Error fetching ticket:",r),g("Tiket tidak ditemukan. Mohon periksa kembali nomor tiket Anda.")}finally{v(!1)}}};return e.jsxs("div",{className:"bg-background-light dark:bg-background-dark font-display text-[#0d141b] dark:text-white flex flex-col min-h-screen overflow-x-hidden",children:[e.jsxs("header",{className:"flex items-center justify-between whitespace-nowrap border-b border-solid border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2634] px-4 py-3 md:px-10 sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"size-8 text-primary",children:e.jsxs("svg",{className:"w-full h-full",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{clipPath:"url(#clip0_6_319)",children:e.jsx("path",{d:"M8.57829 8.57829C5.52816 11.6284 3.451 15.5145 2.60947 19.7452C1.76794 23.9758 2.19984 28.361 3.85056 32.3462C5.50128 36.3314 8.29667 39.7376 11.8832 42.134C15.4698 44.5305 19.6865 45.8096 24 45.8096C28.3135 45.8096 32.5302 44.5305 36.1168 42.134C39.7033 39.7375 42.4987 36.3314 44.1494 32.3462C45.8002 28.361 46.2321 23.9758 45.3905 19.7452C44.549 15.5145 42.4718 11.6284 39.4217 8.57829L24 24L8.57829 8.57829Z",fill:"currentColor"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_6_319",children:e.jsx("rect",{fill:"white",height:"48",width:"48"})})})]})}),e.jsx("h2",{className:"text-[#0d141b] dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] hidden sm:block",children:"Portal Layanan Publik"})]}),e.jsxs("div",{className:"flex items-center gap-4 md:gap-8",children:[e.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[e.jsx("a",{className:"text-[#0d141b] dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors text-sm font-medium leading-normal",href:"/",children:"Beranda"}),e.jsx("a",{className:"text-[#0d141b] dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors text-sm font-medium leading-normal",href:"#",children:"Panduan"}),e.jsx("a",{className:"text-[#0d141b] dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors text-sm font-medium leading-normal",href:"#",children:"Kontak"})]}),e.jsx("a",{href:"/login",className:"flex cursor-pointer items-center justify-center overflow-hidden rounded-lg h-9 px-4 bg-primary text-slate-50 text-sm font-bold leading-normal tracking-[0.015em] hover:bg-blue-600 transition-colors",children:e.jsx("span",{className:"truncate",children:"Masuk Petugas"})})]})]}),e.jsxs("main",{className:"flex-grow flex flex-col items-center",children:[e.jsx("section",{className:"w-full bg-gradient-to-b from-[#eef4fa] to-background-light dark:from-[#15202b] dark:to-background-dark py-12 md:py-20 px-4 flex justify-center",children:e.jsxs("div",{className:"w-full max-w-4xl flex flex-col items-center text-center gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("h1",{className:"text-[#0d141b] dark:text-white text-3xl md:text-5xl font-black leading-tight tracking-[-0.033em]",children:"Layanan Pelacakan Tiket Terpadu"}),e.jsx("p",{className:"text-[#4c739a] dark:text-gray-400 text-base md:text-lg font-normal leading-relaxed max-w-2xl mx-auto",children:"Pantau status aduan Anda secara real-time. Masukkan nomor tiket unik Anda untuk melihat perkembangan terbaru penanganan laporan."})]}),e.jsxs("div",{className:"w-full max-w-xl mx-auto relative group",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-200 to-blue-400 rounded-xl blur opacity-25 group-hover:opacity-50 transition duration-200"}),e.jsxs("form",{onSubmit:N,className:"relative flex flex-col md:flex-row h-auto md:h-16 w-full rounded-xl bg-white dark:bg-[#1e2936] shadow-lg p-1",children:[e.jsxs("div",{className:"flex w-full items-center px-4 py-3 md:py-0 border-b md:border-b-0 md:border-r border-slate-100 dark:border-slate-700",children:[e.jsx("span",{className:"material-symbols-outlined text-[#4c739a] mr-3",children:"search"}),e.jsx("input",{className:"w-full bg-transparent border-none p-0 text-[#0d141b] dark:text-white placeholder:text-[#94a3b8] focus:ring-0 text-base",placeholder:"Nomor Tiket (Contoh: TKT-2024-0001)",value:a,onChange:p=>t(p.target.value)})]}),e.jsx("div",{className:"p-1 md:w-auto w-full",children:e.jsx("button",{type:"submit",disabled:j,className:"w-full md:w-auto h-12 px-6 bg-primary hover:bg-blue-600 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2 whitespace-nowrap shadow-md disabled:opacity-70",children:j?e.jsx("span",{children:"Mencari..."}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Lacak Tiket"}),e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_forward"})]})})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#4c739a] dark:text-gray-500 bg-white/50 dark:bg-white/5 px-3 py-1 rounded-full border border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"lock"}),e.jsx("span",{children:"Data sensitif disembunyikan untuk menjaga privasi Anda"})]})]})}),b&&!j&&e.jsx("section",{className:"w-full max-w-5xl px-4 pb-20 -mt-8",children:f?e.jsxs("div",{className:"bg-white dark:bg-[#1a2634] rounded-xl shadow p-8 text-center border border-red-100 dark:border-red-900/30",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500 text-5xl mb-4",children:"error_outline"}),e.jsx("h3",{className:"text-xl font-bold text-[#0d141b] dark:text-white mb-2",children:"Tiket Tidak Ditemukan"}),e.jsx("p",{className:"text-[#4c739a] dark:text-gray-400",children:f})]}):s?e.jsxs("div",{className:"bg-white dark:bg-[#1a2634] rounded-xl shadow-[0_4px_20px_rgba(0,0,0,0.05)] border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center p-6 border-b border-slate-100 dark:border-slate-700 gap-4 bg-slate-50/50 dark:bg-slate-800/30",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h2",{className:"text-xl font-bold text-[#0d141b] dark:text-white",children:"Detail Status Tiket"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider ${s.status==="resolved"||s.status==="closed"?"bg-green-100 text-green-700":s.status==="in_progress"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:s.status})]}),e.jsxs("p",{className:"text-[#4c739a] dark:text-gray-400 text-sm",children:["Dibuat pada: ",new Date(s.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-xs text-[#4c739a] dark:text-gray-400 uppercase font-semibold tracking-wider",children:"Nomor Referensi"}),e.jsxs("span",{className:"text-lg font-mono font-bold text-[#0d141b] dark:text-white selection:bg-primary selection:text-white",children:["#",s.ticket_number]})]})]}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-[#0d141b] dark:text-white mb-4",children:"Informasi Aduan"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-500 mb-1",children:"Judul"}),e.jsx("p",{className:"text-base font-medium text-[#0d141b] dark:text-white",children:s.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-500 mb-1",children:"Deskripsi"}),e.jsx("p",{className:"text-sm text-[#0d141b] dark:text-gray-300 leading-relaxed",children:s.description||"-"})]}),s.ticket_responses&&s.ticket_responses.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-500 mb-2",children:"Respon Terbaru"}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border-l-4 border-blue-500",children:[e.jsx("p",{className:"text-sm text-[#0d141b] dark:text-gray-300",children:s.ticket_responses[0].message}),e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-500 mt-1",children:new Date(s.ticket_responses[0].created_at).toLocaleDateString("id-ID")})]})]})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-5 border border-slate-100 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-sm font-bold text-[#0d141b] dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"info"}),"Status & Metadata"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-500 mb-1",children:"Prioritas"}),e.jsx("p",{className:"text-sm font-medium text-[#0d141b] dark:text-white capitalize",children:s.priority})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-500 mb-1",children:"Kategori"}),e.jsx("p",{className:"text-sm font-medium text-[#0d141b] dark:text-white",children:s.service_categories?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-500 mb-1",children:"Unit"}),e.jsx("p",{className:"text-sm font-medium text-[#0d141b] dark:text-white",children:s.units?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-500 mb-1",children:"Tipe"}),e.jsx("p",{className:"text-sm font-medium text-[#0d141b] dark:text-white capitalize",children:s.type})]}),s.resolved_at&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-500 mb-1",children:"Diselesaikan pada"}),e.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:new Date(s.resolved_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]})})]}):null}),e.jsxs("section",{className:"w-full max-w-4xl px-4 pb-20 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-white dark:bg-[#1a2634] shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition-shadow cursor-pointer flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"help"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-[#0d141b] dark:text-white",children:"Butuh Bantuan?"}),e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-400",children:"Hubungi call center 112"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white dark:bg-[#1a2634] shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition-shadow cursor-pointer flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg text-green-600",children:e.jsx("span",{className:"material-symbols-outlined",children:"chat"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-[#0d141b] dark:text-white",children:"Live Chat"}),e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-400",children:"Senin - Jumat, 08:00 - 16:00"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white dark:bg-[#1a2634] shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition-shadow cursor-pointer flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-orange-600",children:e.jsx("span",{className:"material-symbols-outlined",children:"menu_book"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-[#0d141b] dark:text-white",children:"Panduan Pengaduan"}),e.jsx("p",{className:"text-xs text-[#4c739a] dark:text-gray-400",children:"Pelajari alur penyelesaian"})]})]})]})]}),e.jsx("footer",{className:"bg-white dark:bg-[#1a2634] border-t border-slate-200 dark:border-slate-800 py-8 px-4 md:px-10 mt-auto",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("p",{className:"text-[#4c739a] dark:text-gray-500 text-sm",children:"¬© 2023 Sistem Manajemen Pengaduan Terpadu. Pemerintah Kota Jakarta."}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("a",{className:"text-[#4c739a] dark:text-gray-500 text-sm hover:text-primary transition-colors",href:"#",children:"Kebijakan Privasi"}),e.jsx("a",{className:"text-[#4c739a] dark:text-gray-500 text-sm hover:text-primary transition-colors",href:"#",children:"Syarat & Ketentuan"}),e.jsx("a",{className:"text-[#4c739a] dark:text-gray-500 text-sm hover:text-primary transition-colors",href:"#",children:"Aksesibilitas"})]})]})})]})};class ha{async getUnits(t){try{console.log("üîÑ Fetching units from main endpoint...");const s=await S.get("/units",{params:t});return Array.isArray(s.data)?(console.log("‚úÖ Units fetched successfully from main endpoint"),{units:s.data}):s.data&&Array.isArray(s.data.units)?(console.log("‚úÖ Units fetched successfully from main endpoint"),s.data):(console.log("‚úÖ Units fetched successfully from main endpoint (transformed)"),{units:s.data||[]})}catch(s){console.warn("‚ö†Ô∏è Main endpoint failed, trying public fallback:",s.message);try{const j=(await S.get("/public/units",{params:t})).data||[];return console.log("‚úÖ Units fetched successfully from public fallback"),{units:Array.isArray(j)?j:[]}}catch(d){return console.error("‚ùå Public fallback also failed:",d.message),console.warn("‚ö†Ô∏è Returning empty units array due to API failures"),{units:[]}}}}async createUnit(t){return(await S.post("/units",t)).data}async updateUnit(t,s){return(await S.put(`/units/${t}`,s)).data}async deleteUnit(t){await S.delete(`/units/${t}`)}async getUnitTypes(){try{return(await S.get("/units/unit-types")).data}catch(t){console.warn("‚ö†Ô∏è Unit types main endpoint failed, trying public fallback:",t.message);try{return(await S.get("/public/unit-types")).data||[]}catch(s){return console.error("‚ùå Unit types public fallback failed, using defaults:",s.message),[{id:"1",name:"Administratif",code:"ADM",description:"Unit Administratif",icon:"business",color:"#6B7280",is_active:!0},{id:"2",name:"Layanan Medis",code:"MED",description:"Unit Layanan Medis",icon:"local_hospital",color:"#3B82F6",is_active:!0}]}}}async getServiceCategories(){try{return(await S.get("/units/service-categories")).data}catch(t){console.warn("‚ö†Ô∏è Service categories main endpoint failed, trying public fallback:",t.message);try{return(await S.get("/master-data/public/service-categories")).data||[]}catch(s){return console.error("‚ùå Service categories public fallback failed, using defaults:",s.message),[{id:"1",name:"Layanan Umum",code:"GEN",description:"Layanan umum rumah sakit",default_sla_hours:24,requires_attachment:!1,is_active:!0}]}}}async getTicketTypes(){try{return(await S.get("/units/ticket-types")).data}catch(t){console.warn("‚ö†Ô∏è Ticket types main endpoint failed, trying public fallback:",t.message);try{return(await S.get("/master-data/public/ticket-types")).data||[]}catch(s){return console.error("‚ùå Ticket types public fallback failed, using defaults:",s.message),[{id:"1",name:"Keluhan",code:"COMPLAINT",description:"Keluhan layanan",icon:"report_problem",color:"#EF4444",default_priority:"medium",default_sla_hours:24,is_active:!0}]}}}async getTicketStatuses(){try{return(await S.get("/units/ticket-statuses")).data}catch(t){console.warn("‚ö†Ô∏è Ticket statuses main endpoint failed, trying public fallback:",t.message);try{return(await S.get("/master-data/public/ticket-statuses")).data||[]}catch(s){return console.error("‚ùå Ticket statuses public fallback failed, using defaults:",s.message),[{id:"1",name:"Terbuka",code:"OPEN",description:"Tiket baru yang belum ditangani",status_type:"open",color:"#3B82F6",is_final:!1,display_order:1,is_active:!0}]}}}async getPatientTypes(){try{return(await S.get("/units/patient-types")).data}catch(t){console.warn("‚ö†Ô∏è Patient types main endpoint failed, trying public fallback:",t.message);try{return(await S.get("/master-data/public/patient-types")).data||[]}catch(s){return console.error("‚ùå Patient types public fallback failed, using defaults:",s.message),[{id:"1",name:"Pasien Umum",code:"GENERAL",description:"Pasien umum",priority_level:3,default_sla_hours:24,is_active:!0}]}}}async getSlaSettings(){try{return(await S.get("/units/sla-settings")).data}catch(t){console.warn("‚ö†Ô∏è SLA settings main endpoint failed, trying public fallback:",t.message);try{return(await S.get("/master-data/public/sla-settings")).data||[]}catch(s){return console.error("‚ùå SLA settings public fallback failed, using defaults:",s.message),[{id:"1",name:"SLA Default",response_time_hours:1,resolution_time_hours:24,escalation_time_hours:48,business_hours_only:!1,is_active:!0}]}}}async getAiTrustSettings(){return(await S.get("/units/ai-trust-settings")).data}async updateAiTrustSettings(t){return(await S.put("/units/ai-trust-settings",t)).data}}const z=new ha,ga=()=>{const a=H(),[t,s]=l.useState([]),[d,j]=l.useState([]),[v,f]=l.useState([]),[g,b]=l.useState(!1),[h,N]=l.useState(null),[p,r]=l.useState(""),[k,u]=l.useState(""),[x,y]=l.useState("medium"),[_,m]=l.useState(""),[c,o]=l.useState(""),[i,n]=l.useState(""),[w,E]=l.useState([]);l.useEffect(()=>{P()},[]);const P=async()=>{try{const D=await z.getUnits();s(D?.units||[]);const M=await $.getServiceCategories();j(M||[]);const T=await $.getTicketTypes();f(T||[])}catch(D){console.error("Error fetching master data:",D),N("Gagal memuat data master. Silakan refresh halaman.")}},K=D=>{D.target.files&&E(Array.from(D.target.files))},L=async()=>{if(!p||!k||!x||!_||!c||!i){N("Harap isi semua field yang diperlukan.");return}b(!0),N(null);try{const D={type:c,category_id:k,title:p,description:i,unit_id:_,priority:x},M=await G.createTicket(D);M.success?a("/tickets"):N(M.error||"Gagal membuat tiket")}catch(D){console.error("Error creating ticket:",D),N(D.message||"Terjadi kesalahan saat membuat tiket")}finally{b(!1)}},C=[{value:"low",label:"Rendah",color:"#10B981"},{value:"medium",label:"Sedang",color:"#F59E0B"},{value:"high",label:"Tinggi",color:"#EF4444"},{value:"critical",label:"Kritis",color:"#DC2626"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 mb-4",children:[e.jsx(I,{to:"/tickets",className:"hover:text-primary transition-colors",children:"Tiket"}),e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"chevron_right"}),e.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:"Buat Tiket Internal"})]}),e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Buat Tiket Baru"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Catat masalah atau permintaan baru atas nama departemen atau pasien."})]}),h&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-3",children:[e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"error"}),e.jsx("p",{className:"text-sm text-red-800",children:h})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Informasi Tiket"})}),e.jsxs("div",{className:"p-6 flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Judul ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all",placeholder:"Ringkasan singkat masalah...",value:p,onChange:D=>r(D.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Tipe ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full appearance-none px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all cursor-pointer",value:c,onChange:D=>o(D.target.value),children:[e.jsx("option",{value:"",disabled:!0,children:"Pilih tipe..."}),v.map(D=>e.jsx("option",{value:D.code.toLowerCase(),children:D.name},D.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"expand_more"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full appearance-none px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all cursor-pointer",value:k,onChange:D=>u(D.target.value),children:[e.jsx("option",{value:"",disabled:!0,children:"Pilih kategori..."}),d.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"expand_more"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Prioritas ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{className:"w-full appearance-none px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all cursor-pointer",value:x,onChange:D=>y(D.target.value),children:C.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"expand_more"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full appearance-none px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all cursor-pointer",value:_,onChange:D=>m(D.target.value),children:[e.jsx("option",{value:"",disabled:!0,children:"Pilih unit..."}),t.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"expand_more"})})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Deskripsi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{className:"w-full px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all h-32 resize-none",placeholder:"Berikan informasi detail tentang masalah...",value:i,onChange:D=>n(D.target.value)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Harap sertakan detail lokasi spesifik dan kode error yang relevan."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Lampiran"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg p-6 flex flex-col items-center justify-center text-center hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors cursor-pointer group relative",children:[e.jsx("input",{type:"file",multiple:!0,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:K}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 dark:text-slate-500",children:"cloud_upload"})}),e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:w.length>0?`${w.length} file terpilih`:"Klik untuk upload atau drag and drop"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"SVG, PNG, JPG atau GIF (maks. 10MB)"})]}),w.length>0&&e.jsx("ul",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:w.map((D,M)=>e.jsxs("li",{children:[D.name," (",(D.size/1024).toFixed(1)," KB)"]},M))})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 flex items-center justify-end gap-3",children:[e.jsx(I,{to:"/tickets",className:"px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 font-medium hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Batal"}),e.jsxs("button",{onClick:L,disabled:g,className:"px-6 py-2 rounded-lg bg-primary text-white font-medium hover:bg-blue-600 transition-colors shadow-sm shadow-blue-500/20 flex items-center gap-2 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"send"}),g?"Membuat...":"Buat Tiket"]})]})]})]}),e.jsx("div",{className:"h-10"})]})},Q={async getByCode(a){return(await S.get(`/qr-codes/scan/${a}`)).data},async createQRCode(a){try{console.log("üîÑ Creating QR code...");const t=await S.post("/qr-codes",a);return console.log("‚úÖ QR code created successfully"),t.data}catch(t){throw console.error("‚ùå Failed to create QR code:",t.message),t}},async getQRCodes(a){try{console.log("üîÑ Fetching QR codes...");const{authService:t}=await Z(async()=>{const{authService:j}=await import("./authService-D1MvrsyH.js");return{authService:j}},__vite__mapDeps([0,1,2,3,4,5]));if(!await t.getToken()){console.warn("‚ö†Ô∏è No authentication token available, trying public fallback...");try{const j=await S.get("/public/qr-codes",{params:a});return console.log("‚úÖ QR codes fetched from public fallback"),j.data}catch(j){return console.warn("‚ö†Ô∏è Public fallback also failed:",j.message),{qr_codes:[],pagination:{page:a?.page||1,limit:a?.limit||10,total:0,pages:0}}}}console.log("üîë Token available, making authenticated request...");const d=await S.get("/qr-codes",{params:a});return console.log("‚úÖ QR codes fetched successfully"),d.data}catch(t){console.error("‚ùå Failed to fetch QR codes:",t.message);try{console.log("üîÑ Trying public fallback for QR codes...");const s=await S.get("/public/qr-codes",{params:a});return console.log("‚úÖ QR codes fetched from public fallback"),s.data}catch(s){console.warn("‚ö†Ô∏è Public fallback also failed:",s.message)}return console.warn("‚ö†Ô∏è Returning empty QR codes data due to API failure"),{qr_codes:[],pagination:{page:a?.page||1,limit:a?.limit||10,total:0,pages:0}}}},async getQRCodeById(a){return(await S.get(`/qr-codes/${a}`)).data},async updateQRCode(a,t){try{console.log(`üîÑ Updating QR code ${a}...`);const s=await S.patch(`/qr-codes/${a}`,t);return console.log("‚úÖ QR code updated successfully"),s.data}catch(s){throw console.error("‚ùå Failed to update QR code:",s.message),s}},async deleteQRCode(a){try{console.log(`üîÑ Deleting QR code ${a}...`);const t=await S.delete(`/qr-codes/${a}`);return console.log("‚úÖ QR code deleted successfully"),t.data}catch(t){throw console.error("‚ùå Failed to delete QR code:",t.message),t}},async getAnalytics(a,t){return(await S.get(`/qr-codes/${a}/analytics`,{params:t})).data},async getStats(){return(await S.get("/qr-codes/stats")).data},generateQRUrl(a){return`${window.location.origin}/tiket-eksternal/${a}`},generateQRImageUrl(a,t=200){const s=this.generateQRUrl(a);return`https://api.qrserver.com/v1/create-qr-code/?size=${t}x${t}&data=${encodeURIComponent(s)}`}},ba={async createTicket(a){const t=new FormData;return Object.entries(a).forEach(([d,j])=>{d!=="attachments"&&j!==void 0&&t.append(d,j.toString())}),a.attachments&&a.attachments.forEach((d,j)=>{t.append(`attachment_${j}`,d)}),(await S.post("/external-tickets",t,{headers:{"Content-Type":"multipart/form-data"}})).data},async getTickets(a){return(await S.get("/external-tickets",{params:a})).data},async getTicketById(a){return(await S.get(`/external-tickets/${a}`)).data},async updateTicketStatus(a,t){return(await S.patch(`/external-tickets/${a}/status`,t)).data},async getStats(a){return(await S.get("/external-tickets/stats",{params:a})).data}},fa=()=>{const{qrCode:a}=he(),t=H(),[s,d]=l.useState(null),[j,v]=l.useState([]),[f,g]=l.useState(!0),[b,h]=l.useState(!1),[N,p]=l.useState(!1),[r,k]=l.useState(0),[u,x]=l.useState({reporter_identity_type:"personal",reporter_name:"",reporter_email:"",reporter_phone:"",reporter_address:"",service_type:"",category:"",title:"",description:"",attachments:[]});l.useEffect(()=>{y()},[a]);const y=async()=>{try{g(!0);const i=await $.getServiceCategories();if(v(i.filter(n=>n.is_active)),a)try{const n=await Q.getByCode(a);d(n)}catch(n){console.error("QR Code tidak ditemukan:",n),d({id:"default",unit_id:"default-unit",code:"DEFAULT",token:"default-token",name:"Formulir Umum",description:"Formulir pengaduan umum",is_active:!0,usage_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),units:{id:"default-unit",name:"Instalasi Gawat Darurat (IGD)",code:"IGD",description:"Unit default untuk pengaduan umum"}})}else d({id:"default",unit_id:"default-unit",code:"DEFAULT",token:"default-token",name:"Formulir Umum",description:"Formulir pengaduan umum",is_active:!0,usage_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),units:{id:"default-unit",name:"Instalasi Gawat Darurat (IGD)",code:"IGD",description:"Unit default untuk pengaduan umum"}})}catch(i){console.error("Error initializing form:",i)}finally{g(!1)}},_=i=>{const{name:n,value:w}=i.target;x(E=>({...E,[n]:w})),n==="description"&&k(w.length)},m=i=>{if(i.target.files){const n=Array.from(i.target.files);x(w=>({...w,attachments:[...w.attachments,...n]}))}},c=i=>{x(n=>({...n,attachments:n.attachments.filter((w,E)=>E!==i)}))},o=async i=>{if(i.preventDefault(),!N){alert("Silakan verifikasi captcha terlebih dahulu");return}h(!0);try{const n={qr_code_id:s?.id!=="default"?s?.id:void 0,unit_id:s?.unit_id||"default-unit",reporter_identity_type:u.reporter_identity_type,reporter_name:u.reporter_identity_type==="personal"?u.reporter_name:void 0,reporter_email:u.reporter_identity_type==="personal"?u.reporter_email:void 0,reporter_phone:u.reporter_identity_type==="personal"?u.reporter_phone:void 0,reporter_address:u.reporter_identity_type==="personal"?u.reporter_address:void 0,service_type:u.service_type,category:u.category,title:u.title,description:u.description,attachments:u.attachments},w=await ba.createTicket(n);alert(`Laporan berhasil dikirim! Nomor tiket: ${w.ticket_number}`),x({reporter_identity_type:"personal",reporter_name:"",reporter_email:"",reporter_phone:"",reporter_address:"",service_type:"",category:"",title:"",description:"",attachments:[]}),k(0),p(!1)}catch(n){console.error("Error submitting ticket:",n),alert("Terjadi kesalahan saat mengirim laporan. Silakan coba lagi.")}finally{h(!1)}};return f?e.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Memuat formulir..."})]})}):e.jsxs("div",{className:"bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-slate-100 min-h-screen flex flex-col",children:[e.jsxs("header",{className:"flex items-center justify-between whitespace-nowrap border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2632] px-6 lg:px-10 py-3 sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-8 text-primary flex items-center justify-center bg-primary/10 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"local_hospital"})}),e.jsx("h2",{className:"text-slate-900 dark:text-white text-lg font-bold leading-tight tracking-[-0.015em]",children:"Sistem Pengaduan Terpadu"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>t("/login"),className:"flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-9 px-4 bg-primary text-white hover:bg-primary/90 transition-colors text-sm font-bold leading-normal tracking-[0.015em]",children:e.jsx("span",{className:"truncate",children:"Masuk"})}),e.jsx("button",{className:"flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-9 px-4 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-sm font-bold leading-normal tracking-[0.015em]",children:e.jsx("span",{className:"truncate",children:"Bantuan"})})]})]}),e.jsx("main",{className:"flex-1 flex flex-col items-center py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-slate-900 dark:text-white text-3xl md:text-4xl font-black leading-tight tracking-[-0.033em]",children:"Sampaikan Laporan Anda"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base md:text-lg font-normal leading-normal max-w-2xl",children:"Silakan isi formulir di bawah ini untuk menyampaikan pengaduan, permintaan, saran, atau survei secara aman dan terpercaya."})]}),s?.units&&e.jsx("div",{className:"bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-stretch",children:[e.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary font-bold text-sm uppercase tracking-wide",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"verified"}),e.jsx("span",{children:"Unit Terverifikasi"})]}),e.jsx("h3",{className:"text-slate-900 dark:text-white text-xl font-bold leading-tight",children:s.units.name}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-normal leading-normal",children:a?"Anda sedang membuat laporan untuk unit ini berdasarkan kode QR yang dipindai.":"Formulir pengaduan umum untuk unit ini."})]}),e.jsx("div",{className:"h-32 md:h-auto md:w-48 bg-gradient-to-br from-primary/20 to-primary/10",children:e.jsx("div",{className:"h-full w-full bg-primary/10 backdrop-blur-[1px] flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-6xl text-primary/30",children:"local_hospital"})})})]})}),e.jsxs("form",{onSubmit:o,className:"bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-bold uppercase tracking-wider",children:"Identitas Pelapor"}),e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-lg w-full sm:w-fit",children:[e.jsxs("label",{className:"flex-1 sm:flex-none cursor-pointer",children:[e.jsx("input",{type:"radio",name:"reporter_identity_type",value:"personal",checked:u.reporter_identity_type==="personal",onChange:()=>x(i=>({...i,reporter_identity_type:"personal"})),className:"peer sr-only"}),e.jsxs("div",{className:"px-4 py-2 rounded-md text-sm font-medium text-slate-500 dark:text-slate-400 peer-checked:bg-white dark:peer-checked:bg-[#2c3b4b] peer-checked:text-primary peer-checked:shadow-sm transition-all text-center flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"person"}),"Identitas Pribadi"]})]}),e.jsxs("label",{className:"flex-1 sm:flex-none cursor-pointer",children:[e.jsx("input",{type:"radio",name:"reporter_identity_type",value:"anonymous",checked:u.reporter_identity_type==="anonymous",onChange:()=>x(i=>({...i,reporter_identity_type:"anonymous"})),className:"peer sr-only"}),e.jsxs("div",{className:"px-4 py-2 rounded-md text-sm font-medium text-slate-500 dark:text-slate-400 peer-checked:bg-white dark:peer-checked:bg-[#2c3b4b] peer-checked:text-primary peer-checked:shadow-sm transition-all text-center flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"visibility_off"}),"Anonim"]})]})]}),e.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:'Pilih "Anonim" jika Anda tidak ingin identitas Anda diketahui oleh unit terkait.'})]}),e.jsx("hr",{className:"border-slate-100 dark:border-slate-800"}),u.reporter_identity_type==="personal"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"reporter_name",children:"Nama Lengkap *"}),e.jsx("input",{type:"text",id:"reporter_name",name:"reporter_name",value:u.reporter_name,onChange:_,className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",placeholder:"Masukkan nama lengkap Anda",required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"reporter_email",children:"Email"}),e.jsx("input",{type:"email",id:"reporter_email",name:"reporter_email",value:u.reporter_email,onChange:_,className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",placeholder:"email@example.com"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"reporter_phone",children:"Nomor Telepon"}),e.jsx("input",{type:"tel",id:"reporter_phone",name:"reporter_phone",value:u.reporter_phone,onChange:_,className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",placeholder:"08xxxxxxxxxx"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"reporter_address",children:"Alamat"}),e.jsx("input",{type:"text",id:"reporter_address",name:"reporter_address",value:u.reporter_address,onChange:_,className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",placeholder:"Alamat lengkap"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-1",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"service_type",children:"Jenis Layanan *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"service_type",name:"service_type",value:u.service_type,onChange:_,className:"w-full appearance-none rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 pr-10 text-slate-900 dark:text-white focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",required:!0,children:[e.jsx("option",{value:"",children:"Pilih jenis layanan..."}),e.jsx("option",{value:"complaint",children:"Pengaduan"}),e.jsx("option",{value:"request",children:"Permintaan Informasi"}),e.jsx("option",{value:"suggestion",children:"Saran & Masukan"}),e.jsx("option",{value:"survey",children:"Survei Kepuasan"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"expand_more"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-1",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"category",children:"Kategori"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"category",name:"category",value:u.category,onChange:_,className:"w-full appearance-none rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 pr-10 text-slate-900 dark:text-white focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",children:[e.jsx("option",{value:"",children:"Pilih kategori..."}),j.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"expand_more"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"title",children:"Judul Laporan *"}),e.jsx("input",{type:"text",id:"title",name:"title",value:u.title,onChange:_,className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",placeholder:"Ringkasan singkat masalah Anda (Contoh: AC di ruang tunggu mati)",required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-2",children:[e.jsxs("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"description",children:["Deskripsi Lengkap *",e.jsx("span",{className:"text-slate-400 font-normal ml-1 text-xs",children:"(Jelaskan kronologi kejadian secara detail)"})]}),e.jsx("textarea",{id:"description",name:"description",value:u.description,onChange:_,rows:5,maxLength:2e3,className:"w-full resize-y rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",placeholder:"Sampaikan detail laporan anda di sini...",required:!0}),e.jsxs("div",{className:"text-right text-xs text-slate-400",children:[r," / 2000 karakter"]})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",children:"Lampiran Bukti (Opsional)"}),e.jsxs("div",{className:"group relative flex w-full cursor-pointer flex-col items-center justify-center rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 py-8 hover:border-primary hover:bg-primary/5 transition-all",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 pb-2 text-center",children:[e.jsx("div",{className:"rounded-full bg-slate-200 dark:bg-slate-700 p-3 text-slate-500 dark:text-slate-400 group-hover:bg-primary/10 group-hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"cloud_upload"})}),e.jsxs("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"text-primary font-bold",children:"Klik untuk unggah"})," atau seret file ke sini"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"JPG, PNG, PDF (Maks. 5MB)"})]}),e.jsx("input",{type:"file",className:"absolute h-full w-full cursor-pointer opacity-0",multiple:!0,accept:".jpg,.jpeg,.png,.pdf",onChange:m})]}),u.attachments.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"File terpilih:"}),e.jsx("ul",{className:"space-y-1",children:u.attachments.map((i,n)=>e.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-400 flex items-center justify-between gap-2 bg-slate-100 dark:bg-slate-800 p-2 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"attach_file"}),i.name," (",(i.size/1024/1024).toFixed(2)," MB)"]}),e.jsx("button",{type:"button",onClick:()=>c(n),className:"text-red-500 hover:text-red-700 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]},n))})]})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4 md:p-6 border border-slate-100 dark:border-slate-800 flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 bg-white dark:bg-[#1a2632] border border-slate-300 dark:border-slate-600 rounded-md p-3 shadow-sm min-w-[240px]",children:[e.jsx("div",{className:"relative flex items-center justify-center",children:e.jsx("input",{type:"checkbox",id:"captcha",checked:N,onChange:i=>p(i.target.checked),className:"peer size-6 cursor-pointer rounded border-slate-300 text-primary focus:ring-primary/20",required:!0})}),e.jsx("label",{htmlFor:"captcha",className:"text-sm text-slate-600 dark:text-slate-300 cursor-pointer select-none",children:"Saya bukan robot"}),e.jsxs("div",{className:"ml-auto flex flex-col items-center justify-center gap-0.5 opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"security"}),e.jsx("span",{className:"text-[8px] uppercase font-bold tracking-tighter",children:"Captcha"})]})]})}),e.jsxs("div",{className:"flex flex-col-reverse md:flex-row gap-4 items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center md:text-left max-w-sm",children:["Dengan mengirimkan laporan ini, Anda menyetujui"," ",e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Kebijakan Privasi"})," ","kami."]}),e.jsxs("div",{className:"flex w-full md:w-auto gap-3",children:[e.jsx("button",{type:"button",onClick:()=>t("/"),className:"flex-1 md:flex-none h-11 px-6 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-transparent text-slate-700 dark:text-slate-300 font-bold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:b||!N,className:"flex-1 md:flex-none h-11 px-8 rounded-lg bg-primary text-white shadow-lg shadow-primary/30 hover:bg-primary/90 hover:shadow-primary/40 active:translate-y-0.5 transition-all font-bold text-sm flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Mengirim..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"send"}),"Kirim Laporan"]})})]})]})]})]})]})}),e.jsx("footer",{className:"mt-auto border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2632] py-6",children:e.jsxs("div",{className:"px-6 lg:px-10 flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-slate-500 dark:text-slate-400",children:[e.jsx("p",{children:"¬© 2024 Sistem Pengaduan Terpadu. Hak Cipta Dilindungi."}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Tentang Kami"}),e.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Panduan"}),e.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Hubungi Kami"})]})]})})]})},Re=()=>{const{qrCode:a}=he(),t=H(),[s,d]=l.useState(null),[j,v]=l.useState(!0),[f,g]=l.useState(!1),[b,h]=l.useState({reporter_identity_type:"personal",reporter_name:"",reporter_email:"",reporter_phone:"",reporter_address:"",service_type:"",category:"",title:"",description:"",attachments:[]}),[N,p]=l.useState(!1),[r,k]=l.useState(0);l.useEffect(()=>{a?u():(d({id:"default",unit_id:"default-unit",code:"DEFAULT",name:"Formulir Umum",unit:{id:"default-unit",name:"Instalasi Gawat Darurat (IGD)",code:"IGD",description:"Unit default untuk pengaduan umum"}}),v(!1))},[a]);const u=async()=>{try{const m=await fetch(`/api/qr-codes/${a}`);if(m.ok){const c=await m.json();d(c)}else console.error("QR Code tidak ditemukan"),t("/")}catch(m){console.error("Error fetching QR code data:",m),t("/")}finally{v(!1)}},x=m=>{const{name:c,value:o}=m.target;h(i=>({...i,[c]:o})),c==="description"&&k(o.length)},y=m=>{if(m.target.files){const c=Array.from(m.target.files);h(o=>({...o,attachments:[...o.attachments,...c]}))}},_=async m=>{if(m.preventDefault(),!N){alert("Silakan verifikasi captcha terlebih dahulu");return}g(!0);try{const c=new FormData;Object.entries(b).forEach(([i,n])=>{i!=="attachments"&&c.append(i,n)}),s&&(c.append("qr_code_id",s.id),c.append("unit_id",s.unit_id)),b.attachments.forEach((i,n)=>{c.append(`attachment_${n}`,i)});const o=await fetch("/api/external-tickets",{method:"POST",body:c});if(o.ok){const i=await o.json();alert(`Laporan berhasil dikirim! Nomor tiket: ${i.ticket_number}`),h({reporter_identity_type:"personal",reporter_name:"",reporter_email:"",reporter_phone:"",reporter_address:"",service_type:"",category:"",title:"",description:"",attachments:[]}),k(0)}else{const i=await o.json();alert(`Error: ${i.message}`)}}catch(c){console.error("Error submitting ticket:",c),alert("Terjadi kesalahan saat mengirim laporan")}finally{g(!1)}};return j?e.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Memuat formulir..."})]})}):e.jsxs("div",{className:"bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-slate-100 min-h-screen flex flex-col",children:[e.jsxs("header",{className:"flex items-center justify-between whitespace-nowrap border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2632] px-6 lg:px-10 py-3 sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-8 text-primary flex items-center justify-center bg-primary/10 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"local_hospital"})}),e.jsx("h2",{className:"text-slate-900 dark:text-white text-lg font-bold leading-tight tracking-[-0.015em]",children:"Sistem Pengaduan Terpadu"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>t("/login"),className:"flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-9 px-4 bg-primary text-white hover:bg-primary/90 transition-colors text-sm font-bold leading-normal tracking-[0.015em]",children:e.jsx("span",{className:"truncate",children:"Masuk"})}),e.jsx("button",{className:"flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-9 px-4 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-sm font-bold leading-normal tracking-[0.015em]",children:e.jsx("span",{className:"truncate",children:"Bantuan"})})]})]}),e.jsx("main",{className:"flex-1 flex flex-col items-center py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-slate-900 dark:text-white text-3xl md:text-4xl font-black leading-tight tracking-[-0.033em]",children:"Sampaikan Laporan Anda"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base md:text-lg font-normal leading-normal max-w-2xl",children:"Silakan isi formulir di bawah ini untuk menyampaikan pengaduan, permintaan, saran, atau survei secara aman dan terpercaya."})]}),s?.unit&&e.jsx("div",{className:"bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-stretch",children:[e.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary font-bold text-sm uppercase tracking-wide",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"verified"}),e.jsx("span",{children:"Unit Terverifikasi"})]}),e.jsx("h3",{className:"text-slate-900 dark:text-white text-xl font-bold leading-tight",children:s.unit.name}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-normal leading-normal",children:a?"Anda sedang membuat laporan untuk unit ini berdasarkan kode QR yang dipindai.":"Formulir pengaduan umum untuk unit ini."})]}),e.jsx("div",{className:"h-32 md:h-auto md:w-48 bg-cover bg-center bg-gradient-to-br from-primary/20 to-primary/10",children:e.jsx("div",{className:"h-full w-full bg-primary/10 backdrop-blur-[1px] flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-6xl text-primary/30",children:"local_hospital"})})})]})}),e.jsxs("form",{onSubmit:_,className:"bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-bold uppercase tracking-wider",children:"Identitas Pelapor"}),e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-lg w-full sm:w-fit",children:[e.jsxs("label",{className:"flex-1 sm:flex-none cursor-pointer",children:[e.jsx("input",{checked:b.reporter_identity_type==="personal",onChange:()=>h(m=>({...m,reporter_identity_type:"personal"})),className:"peer sr-only",name:"identity",type:"radio",value:"personal"}),e.jsxs("div",{className:"px-4 py-2 rounded-md text-sm font-medium text-slate-500 dark:text-slate-400 peer-checked:bg-white dark:peer-checked:bg-[#2c3b4b] peer-checked:text-primary peer-checked:shadow-sm transition-all text-center flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"person"}),"Identitas Pribadi"]})]}),e.jsxs("label",{className:"flex-1 sm:flex-none cursor-pointer",children:[e.jsx("input",{checked:b.reporter_identity_type==="anonymous",onChange:()=>h(m=>({...m,reporter_identity_type:"anonymous"})),className:"peer sr-only",name:"identity",type:"radio",value:"anonymous"}),e.jsxs("div",{className:"px-4 py-2 rounded-md text-sm font-medium text-slate-500 dark:text-slate-400 peer-checked:bg-white dark:peer-checked:bg-[#2c3b4b] peer-checked:text-primary peer-checked:shadow-sm transition-all text-center flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"visibility_off"}),"Anonim"]})]})]}),e.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:'Pilih "Anonim" jika Anda tidak ingin identitas Anda diketahui oleh unit terkait.'})]}),e.jsx("hr",{className:"border-slate-100 dark:border-slate-800"}),b.reporter_identity_type==="personal"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"reporter_name",children:"Nama Lengkap *"}),e.jsx("input",{className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",id:"reporter_name",name:"reporter_name",value:b.reporter_name,onChange:x,placeholder:"Masukkan nama lengkap Anda",type:"text",required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"reporter_email",children:"Email"}),e.jsx("input",{className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",id:"reporter_email",name:"reporter_email",value:b.reporter_email,onChange:x,placeholder:"email@example.com",type:"email"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"reporter_phone",children:"Nomor Telepon"}),e.jsx("input",{className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",id:"reporter_phone",name:"reporter_phone",value:b.reporter_phone,onChange:x,placeholder:"08xxxxxxxxxx",type:"tel"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"reporter_address",children:"Alamat"}),e.jsx("input",{className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",id:"reporter_address",name:"reporter_address",value:b.reporter_address,onChange:x,placeholder:"Alamat lengkap",type:"text"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-1",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"service_type",children:"Jenis Layanan *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full appearance-none rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 pr-10 text-slate-900 dark:text-white focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",id:"service_type",name:"service_type",value:b.service_type,onChange:x,required:!0,children:[e.jsx("option",{disabled:!0,value:"",children:"Pilih jenis layanan..."}),e.jsx("option",{value:"complaint",children:"Pengaduan"}),e.jsx("option",{value:"request",children:"Permintaan Informasi"}),e.jsx("option",{value:"suggestion",children:"Saran & Masukan"}),e.jsx("option",{value:"survey",children:"Survei Kepuasan"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"expand_more"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-1",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"category",children:"Kategori"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full appearance-none rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 pr-10 text-slate-900 dark:text-white focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",id:"category",name:"category",value:b.category,onChange:x,children:[e.jsx("option",{disabled:!0,value:"",children:"Pilih kategori..."}),e.jsx("option",{value:"service",children:"Pelayanan Medis"}),e.jsx("option",{value:"facility",children:"Fasilitas & Sarana"}),e.jsx("option",{value:"staff",children:"Perilaku Petugas"}),e.jsx("option",{value:"admin",children:"Administrasi"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"expand_more"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"title",children:"Judul Laporan *"}),e.jsx("input",{className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",id:"title",name:"title",value:b.title,onChange:x,placeholder:"Ringkasan singkat masalah Anda (Contoh: AC di ruang tunggu mati)",type:"text",required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-2",children:[e.jsxs("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",htmlFor:"description",children:["Deskripsi Lengkap *",e.jsx("span",{className:"text-slate-400 font-normal ml-1 text-xs",children:"(Jelaskan kronologi kejadian secara detail)"})]}),e.jsx("textarea",{className:"w-full resize-y rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-4 py-3 text-slate-900 dark:text-white placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors",id:"description",name:"description",value:b.description,onChange:x,placeholder:"Sampaikan detail laporan anda di sini...",rows:5,maxLength:2e3,required:!0}),e.jsxs("div",{className:"text-right text-xs text-slate-400",children:[r," / 2000 karakter"]})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-2",children:[e.jsx("label",{className:"text-slate-900 dark:text-white text-sm font-semibold",children:"Lampiran Bukti (Opsional)"}),e.jsxs("div",{className:"group relative flex w-full cursor-pointer flex-col items-center justify-center rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 py-8 hover:border-primary hover:bg-primary/5 transition-all",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 pb-2 text-center",children:[e.jsx("div",{className:"rounded-full bg-slate-200 dark:bg-slate-700 p-3 text-slate-500 dark:text-slate-400 group-hover:bg-primary/10 group-hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"cloud_upload"})}),e.jsxs("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"text-primary font-bold",children:"Klik untuk unggah"})," atau seret file ke sini"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"JPG, PNG, PDF (Maks. 5MB)"})]}),e.jsx("input",{className:"absolute h-full w-full cursor-pointer opacity-0",type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.pdf",onChange:y})]}),b.attachments.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"File terpilih:"}),e.jsx("ul",{className:"space-y-1",children:b.attachments.map((m,c)=>e.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-400 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"attach_file"}),m.name," (",(m.size/1024/1024).toFixed(2)," MB)"]},c))})]})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4 md:p-6 border border-slate-100 dark:border-slate-800 flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 bg-white dark:bg-[#1a2632] border border-slate-300 dark:border-slate-600 rounded-md p-3 shadow-sm min-w-[240px]",children:[e.jsx("div",{className:"relative flex items-center justify-center",children:e.jsx("input",{className:"peer size-6 cursor-pointer rounded border-slate-300 text-primary focus:ring-primary/20",id:"captcha",type:"checkbox",checked:N,onChange:m=>p(m.target.checked)})}),e.jsx("label",{className:"text-sm text-slate-600 dark:text-slate-300 cursor-pointer select-none",htmlFor:"captcha",children:"Saya bukan robot"}),e.jsxs("div",{className:"ml-auto flex flex-col items-center justify-center gap-0.5 opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"security"}),e.jsx("span",{className:"text-[8px] uppercase font-bold tracking-tighter",children:"Captcha"})]})]})}),e.jsxs("div",{className:"flex flex-col-reverse md:flex-row gap-4 items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center md:text-left max-w-sm",children:["Dengan mengirimkan laporan ini, Anda menyetujui"," ",e.jsx("a",{className:"text-primary hover:underline",href:"#",children:"Kebijakan Privasi"})," kami."]}),e.jsxs("div",{className:"flex w-full md:w-auto gap-3",children:[e.jsx("button",{type:"button",onClick:()=>t("/"),className:"flex-1 md:flex-none h-11 px-6 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-transparent text-slate-700 dark:text-slate-300 font-bold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:f||!N,className:"flex-1 md:flex-none h-11 px-8 rounded-lg bg-primary text-white shadow-lg shadow-primary/30 hover:bg-primary/90 hover:shadow-primary/40 active:translate-y-0.5 transition-all font-bold text-sm flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Mengirim..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"send"}),"Kirim Laporan"]})})]})]})]})]})]})}),e.jsx("footer",{className:"mt-auto border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2632] py-6",children:e.jsxs("div",{className:"px-6 lg:px-10 flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-slate-500 dark:text-slate-400",children:[e.jsx("p",{children:"¬© 2024 Sistem Pengaduan Terpadu. Hak Cipta Dilindungi."}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("a",{className:"hover:text-primary transition-colors",href:"#",children:"Tentang Kami"}),e.jsx("a",{className:"hover:text-primary transition-colors",href:"#",children:"Panduan"}),e.jsx("a",{className:"hover:text-primary transition-colors",href:"#",children:"Hubungi Kami"})]})]})})]})},Ue=()=>{const[a,t]=l.useState([]),[s,d]=l.useState([]),[j,v]=l.useState(!0),[f,g]=l.useState(!1),[b,h]=l.useState(""),[N,p]=l.useState("all"),[r,k]=l.useState(1),[u,x]=l.useState(1),[y,_]=l.useState({unit_id:"",name:"",description:""});l.useEffect(()=>{m()},[r,b,N]);const m=async()=>{try{v(!0);const P=await z.getUnits();d(P.units||[]);const K={page:r,limit:10,include_analytics:!0};b&&(K.search=b),N!=="all"&&(K.is_active=N==="active");const L=await Q.getQRCodes(K);t(L.qr_codes||[]),x(L.pagination?.pages||1)}catch(P){console.error("Error loading data:",P)}finally{v(!1)}},c=async P=>{P.preventDefault();try{await Q.createQRCode(y),g(!1),_({unit_id:"",name:"",description:""}),m()}catch(K){console.error("Error creating QR code:",K),alert("Gagal membuat QR Code. Silakan coba lagi.")}},o=async(P,K)=>{try{const L=!K;confirm(`Apakah Anda yakin ingin ${L?"mengaktifkan":"menonaktifkan"} QR Code ini?`)&&(await Q.updateQRCode(P,{is_active:L}),m(),alert(`QR Code berhasil ${L?"diaktifkan":"dinonaktifkan"}.`))}catch(L){console.error("Error updating QR status:",L),alert("Gagal mengubah status QR Code.")}},i=async(P,K)=>{if(confirm(`Apakah Anda yakin ingin menghapus QR Code "${K}"? Tindakan ini tidak dapat dibatalkan.`))try{await Q.deleteQRCode(P),alert("QR Code berhasil dihapus"),m()}catch(L){console.error("Error deleting QR code:",L);const C=L.response?.data?.error||"Gagal menghapus QR Code";alert(C)}},n=P=>P?e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400 border border-green-200 dark:border-green-800/50",children:[e.jsx("span",{className:"size-1.5 rounded-full bg-green-500"}),"Aktif"]}):e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400 border border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"size-1.5 rounded-full bg-slate-400"}),"Tidak Aktif"]}),w=(P=[])=>{const K=Math.max(...P,1);return P.map((L,C)=>e.jsx("div",{className:"w-1 bg-green-500 dark:bg-green-600 rounded-t-sm",style:{height:`${L/K*100}%`}},C))},E=P=>{const K=Q.generateQRUrl(P);navigator.clipboard.writeText(K),alert("Link QR Code berhasil disalin!")};return e.jsxs("div",{className:"bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 min-h-screen flex flex-col overflow-x-hidden transition-colors duration-200",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-surface-light dark:bg-surface-dark border-b border-slate-200 dark:border-slate-800 px-6 py-3 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"size-8 text-primary flex items-center justify-center bg-primary/10 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"local_police"})}),e.jsx("h2",{className:"text-lg font-bold leading-tight tracking-tight text-slate-900 dark:text-white",children:"Sistem Manajemen Keluhan"})]}),e.jsxs("nav",{className:"hidden md:flex items-center gap-1",children:[e.jsx(I,{className:"text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors",to:"/dashboard",children:"Dashboard"}),e.jsx(I,{className:"text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors",to:"/tickets",children:"Keluhan"}),e.jsx(I,{className:"text-primary bg-primary/10 px-3 py-2 rounded-lg text-sm font-medium transition-colors",to:"/qr-codes",children:"Unit & QR Code"}),e.jsx(I,{className:"text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors",to:"/reports",children:"Laporan"}),e.jsx(I,{className:"text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors",to:"/settings",children:"Pengaturan"})]})]})}),e.jsxs("main",{className:"flex-1 w-full max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm",children:[e.jsx(I,{className:"text-slate-500 dark:text-slate-400 hover:text-primary transition-colors",to:"/dashboard",children:"Dashboard"}),e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"chevron_right"}),e.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:"Manajemen QR Code"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-6 mb-8",children:[e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900 dark:text-white mb-2",children:"Manajemen QR Code Unit"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base leading-relaxed",children:"Kelola titik akses fisik untuk pengajuan keluhan warga. Generate, cetak, dan lacak QR code untuk setiap unit departemen."})]}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center justify-center gap-2 bg-primary hover:bg-blue-600 text-white px-5 py-2.5 rounded-lg shadow-sm transition-all active:scale-95 font-semibold text-sm whitespace-nowrap",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"qr_code_2_add"}),"Buat QR Code Baru"]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm mb-6 flex flex-col lg:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"relative w-full lg:max-w-md",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"search"})}),e.jsx("input",{className:"block w-full pl-10 pr-3 py-2.5 border border-slate-200 dark:border-slate-700 rounded-lg leading-5 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Cari berdasarkan Nama Unit, ID atau Lokasi...",type:"text",value:b,onChange:P=>h(P.target.value)})]}),e.jsx("div",{className:"flex w-full lg:w-auto items-center gap-3 overflow-x-auto pb-1 lg:pb-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"hidden sm:block text-sm font-medium text-slate-500 dark:text-slate-400 mr-1",children:"Status:"}),e.jsxs("select",{className:"form-select block w-full pl-3 pr-10 py-2 text-base border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-lg bg-white dark:bg-slate-800 dark:text-white",value:N,onChange:P=>p(P.target.value),children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Tidak Aktif"})]})]})})]}),e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-6 py-3 text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-800 mb-2",children:[e.jsx("div",{className:"col-span-4",children:"Detail Unit"}),e.jsx("div",{className:"col-span-2",children:"QR Code"}),e.jsx("div",{className:"col-span-2",children:"Performa (30 Hari)"}),e.jsx("div",{className:"col-span-2",children:"Status"}),e.jsx("div",{className:"col-span-2 text-right",children:"Aksi"})]}),j?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"space-y-3",children:a.map(P=>e.jsxs("div",{className:"group relative bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md hover:border-primary/30 transition-all p-4 md:p-0 md:grid md:grid-cols-12 md:gap-4 md:items-center",children:[e.jsxs("div",{className:"md:hidden flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"text-xs font-bold uppercase text-slate-400 tracking-wider",children:["Unit #",P.units?.code||P.code]}),n(P.is_active)]}),e.jsx("div",{className:"col-span-4 md:pl-6 md:py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"hidden sm:flex size-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 items-center justify-center shrink-0",children:e.jsx("span",{className:"material-symbols-outlined",children:"business"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white group-hover:text-primary transition-colors",children:P.name}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:P.units?.name||"Unit tidak ditemukan"}),e.jsxs("span",{className:"md:hidden text-xs text-slate-400 mt-1 block",children:["ID: ",P.code]})]})]})}),e.jsxs("div",{className:"col-span-2 md:py-4 flex items-center gap-3",children:[e.jsx("div",{className:"size-12 bg-white p-1 rounded border border-slate-200 shrink-0",children:e.jsx("img",{alt:`QR Code untuk ${P.name}`,className:"w-full h-full object-contain opacity-80 group-hover:opacity-100 transition-opacity",src:Q.generateQRImageUrl(P.code,48)})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("button",{onClick:()=>window.open(Q.generateQRImageUrl(P.code,400),"_blank"),className:"text-xs font-medium text-primary hover:underline text-left",children:"Lihat"}),e.jsxs("button",{onClick:()=>E(P.code),className:"text-xs font-medium text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 text-left flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"content_copy"}),"Salin Link"]})]})]}),e.jsx("div",{className:"col-span-2 md:py-4 mt-4 md:mt-0",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Scan"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:P.analytics?.scans_30d||P.usage_count||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Tiket"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:P.analytics?.tickets_30d||0})]}),e.jsx("div",{className:"hidden lg:flex items-end gap-0.5 h-8 w-12 pb-1",children:w(P.analytics?.trend)})]})}),e.jsx("div",{className:"hidden md:flex col-span-2 md:py-4 items-center",children:n(P.is_active)}),e.jsxs("div",{className:"col-span-2 md:pr-6 md:py-4 flex justify-end items-center gap-2 mt-4 md:mt-0 border-t border-slate-100 dark:border-slate-800 md:border-0 pt-3 md:pt-0",children:[e.jsx("button",{onClick:()=>window.open(Q.generateQRImageUrl(P.code,400),"_blank"),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:"Lihat QR Code",children:e.jsx("span",{className:"material-symbols-outlined",children:"visibility"})}),e.jsx("button",{onClick:()=>window.print(),className:"p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:"Cetak QR Code",children:e.jsx("span",{className:"material-symbols-outlined",children:"print"})}),e.jsx("button",{onClick:()=>o(P.id,P.is_active),className:`p-2 rounded-lg transition-colors ${P.is_active?"text-orange-500 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-slate-700":"text-green-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-slate-700"}`,title:P.is_active?"Nonaktifkan QR Code":"Aktifkan QR Code",children:e.jsx("span",{className:"material-symbols-outlined",children:P.is_active?"toggle_on":"toggle_off"})}),e.jsx("button",{onClick:()=>i(P.id,P.name),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:"Hapus QR Code",children:e.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]})]},P.id))}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 dark:border-slate-800 mt-6 pt-4",children:[e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Menampilkan ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:(r-1)*10+1})," sampai"," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:Math.min(r*10,a.length)})," dari"," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:a.length})," unit"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>k(P=>Math.max(P-1,1)),disabled:r===1,className:"px-3 py-1 text-sm text-slate-500 dark:text-slate-400 border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Sebelumnya"}),e.jsx("button",{onClick:()=>k(P=>Math.min(P+1,u)),disabled:r===u,className:"px-3 py-1 text-sm text-slate-500 dark:text-slate-400 border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Selanjutnya"})]})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Buat QR Code Baru"}),e.jsx("button",{onClick:()=>g(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:y.unit_id,onChange:P=>_({...y,unit_id:P.target.value}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Pilih Unit"}),s.filter(P=>P.is_active).map(P=>e.jsxs("option",{value:P.id,children:[P.name," (",P.code,")"]},P.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Nama QR Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:y.name,onChange:P=>_({...y,name:P.target.value}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"Contoh: QR Loket Pendaftaran"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Deskripsi"}),e.jsx("textarea",{value:y.description,onChange:P=>_({...y,description:P.target.value}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-white dark:bg-slate-700 text-slate-900 dark:text-white",rows:3,placeholder:"Deskripsi lokasi atau tujuan QR Code..."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Buat QR Code"})]})]})]})})}),e.jsx("footer",{className:"bg-surface-light dark:bg-surface-dark border-t border-slate-200 dark:border-slate-800 py-6 mt-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-slate-500 dark:text-slate-400",children:[e.jsx("p",{children:"¬© 2024 Sistem Manajemen Keluhan Pemerintah. Hak cipta dilindungi."}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("a",{className:"hover:text-primary",href:"#",children:"Kebijakan Privasi"}),e.jsx("a",{className:"hover:text-primary",href:"#",children:"Syarat Layanan"}),e.jsx("a",{className:"hover:text-primary",href:"#",children:"Dukungan"})]})]})})]})},ka=()=>{const a=H(),[t,s]=l.useState([]),[d,j]=l.useState(null),[v,f]=l.useState(!0),[g,b]=l.useState(""),[h,N]=l.useState("all"),[p,r]=l.useState({confidence_threshold:85,auto_reminder:!0});l.useEffect(()=>{k()},[]);const k=async()=>{try{const[o,i]=await Promise.all([fetch("/api/escalation/rules"),fetch("/api/escalation/stats")]);if(o.ok){const n=await o.json();s(n)}if(i.ok){const n=await i.json();j(n)}}catch(o){console.error("Error fetching escalation data:",o)}finally{f(!1)}},u=async(o,i)=>{try{(await fetch(`/api/escalation/rules/${o}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!i})})).ok&&k()}catch(n){console.error("Error updating rule status:",n)}},x=async()=>{try{(await fetch("/api/ai-trust-settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok&&alert("Pengaturan AI berhasil diperbarui")}catch(o){console.error("Error updating AI settings:",o)}},y=t.filter(o=>{const i=o.name.toLowerCase().includes(g.toLowerCase())||o.description?.toLowerCase().includes(g.toLowerCase()),n=h==="all"||o.service_types.includes(h);return i&&n}),_=o=>o?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400 border-green-200 dark:border-green-800/50":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400 border-slate-200 dark:border-slate-700",m=o=>o?"bg-green-500":"bg-slate-400",c=o=>{switch(o){case"critical":return"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border-red-100 dark:border-red-900/50";case"high":return"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 border-orange-100 dark:border-orange-900/50";case"medium":return"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 border-yellow-100 dark:border-yellow-900/50";default:return"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-600"}};return v?e.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Memuat data eskalasi AI..."})]})}):e.jsxs("div",{className:"bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 min-h-screen flex flex-col overflow-x-hidden transition-colors duration-200",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-surface-light dark:bg-surface-dark border-b border-slate-200 dark:border-slate-800 px-6 py-3 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"size-8 text-primary flex items-center justify-center bg-primary/10 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"shield_person"})}),e.jsx("h2",{className:"text-lg font-bold leading-tight tracking-tight text-slate-900 dark:text-white",children:"CMS AI Admin"})]}),e.jsxs("nav",{className:"hidden md:flex items-center gap-1",children:[e.jsx("button",{onClick:()=>a("/dashboard"),className:"text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:"Dashboard"}),e.jsx("button",{onClick:()=>a("/tickets"),className:"text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:"Pengaduan"}),e.jsx("button",{className:"text-primary bg-primary/10 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:"Eskalasi AI"}),e.jsx("button",{onClick:()=>a("/sla-monitor"),className:"text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:"Monitor SLA"}),e.jsx("button",{onClick:()=>a("/settings"),className:"text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-50 dark:hover:bg-slate-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:"Pengaturan"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"relative p-2 text-slate-500 hover:text-primary transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined",children:"notifications"}),e.jsx("span",{className:"absolute top-2 right-2 size-2 bg-red-500 rounded-full border border-white dark:border-surface-dark"})]}),e.jsx("div",{className:"size-9 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden border border-slate-200 dark:border-slate-600 cursor-pointer",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-primary/40 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary",children:"person"})})})]})]})}),e.jsxs("main",{className:"flex-1 w-full max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm",children:[e.jsx("button",{onClick:()=>a("/dashboard"),className:"text-slate-500 dark:text-slate-400 hover:text-primary transition-colors",children:"Dashboard"}),e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"chevron_right"}),e.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:"Aturan Eskalasi AI"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-6 mb-8",children:[e.jsxs("div",{className:"max-w-3xl",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900 dark:text-white mb-2",children:"Manajemen Eskalasi Berbasis AI"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base leading-relaxed",children:"Konfigurasi aturan routing otomatis dan ambang batas klasifikasi AI. Kelola bagaimana sistem mengeskalasi tiket dari Petugas ke Direktur berdasarkan urgensi dan jenis."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>console.log("AI Settings clicked"),className:"flex items-center justify-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 text-slate-700 dark:text-slate-200 px-4 py-2.5 rounded-lg shadow-sm transition-all text-sm font-medium",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"tune"}),"Pengaturan AI"]}),e.jsxs("button",{onClick:()=>console.log("Create new rule clicked"),className:"flex items-center justify-center gap-2 bg-primary hover:bg-primary-dark text-white px-5 py-2.5 rounded-lg shadow-sm transition-all active:scale-95 font-semibold text-sm whitespace-nowrap",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"add_circle"}),"Aturan Eskalasi Baru"]})]})]}),d&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-6xl text-primary",children:"auto_mode"})}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium uppercase tracking-wider mb-1",children:"Auto-Eskalasi"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d.auto_escalated.toLocaleString()}),e.jsxs("span",{className:`text-xs font-bold flex items-center px-1.5 py-0.5 rounded ${d.monthly_trend>=0?"text-green-600 bg-green-100 dark:bg-green-900/30":"text-red-600 bg-red-100 dark:bg-red-900/30"}`,children:[d.monthly_trend>=0?"+":"",d.monthly_trend,"%"]})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Tiket diproses AI bulan ini"})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-6xl text-purple-500",children:"psychology"})}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium uppercase tracking-wider mb-1",children:"Skor Kepercayaan AI"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[d.ai_confidence.toFixed(1),"%"]}),e.jsxs("span",{className:`text-xs font-bold flex items-center px-1.5 py-0.5 rounded ${d.confidence_trend>=0?"text-green-600 bg-green-100 dark:bg-green-900/30":"text-red-600 bg-red-100 dark:bg-red-900/30"}`,children:[d.confidence_trend>=0?"+":"",d.confidence_trend.toFixed(1),"%"]})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Rata-rata akurasi klasifikasi"})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-6xl text-orange-500",children:"warning"})}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium uppercase tracking-wider mb-1",children:"SLA Berisiko"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d.sla_at_risk}),e.jsx("span",{className:"text-red-600 text-xs font-bold flex items-center bg-red-100 dark:bg-red-900/30 px-1.5 py-0.5 rounded",children:"-2%"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Menunggu trigger auto-eskalasi"})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-6xl text-blue-500",children:"rule"})}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium uppercase tracking-wider mb-1",children:"Aturan Aktif"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d.active_rules}),e.jsxs("span",{className:"text-slate-500 text-xs font-medium",children:["dari ",d.total_rules," Total"]})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Berjalan pada pipeline saat ini"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Alur Eskalasi Standar"}),e.jsx("button",{className:"text-sm text-primary font-medium hover:underline",children:"Lihat Detail SLA"})]}),e.jsxs("div",{className:"relative py-4",children:[e.jsx("div",{className:"absolute top-1/2 left-0 w-full h-1 bg-slate-100 dark:bg-slate-700 -translate-y-1/2 rounded z-0 hidden md:block"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 relative z-10",children:[{role:"Petugas",icon:"support_agent",color:"blue",time:"T < 2j",active:!0},{role:"Kepala Unit",icon:"supervisor_account",color:"indigo",time:"T < 24j",active:!1},{role:"Manager",icon:"admin_panel_settings",color:"purple",time:"T < 48j",active:!1},{role:"Direktur",icon:"local_police",color:"red",time:"Segera",active:!1}].map((o,i)=>e.jsxs("div",{className:"flex flex-col items-center text-center group",children:[e.jsxs("div",{className:`size-12 rounded-full bg-${o.color}-100 dark:bg-${o.color}-900/30 text-${o.color}-600 dark:text-${o.color}-400 border-4 border-surface-light dark:border-surface-dark flex items-center justify-center mb-3 shadow-sm relative`,children:[e.jsx("span",{className:"material-symbols-outlined",children:o.icon}),o.active&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-blue-500"})]})]}),e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm",children:o.role}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:i===0?"Penanganan Awal":i===1?"Eskalasi Pertama":i===2?"Tinjauan Strategis":"Keputusan Kritis"}),e.jsx("div",{className:"mt-2 px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded text-[10px] font-mono text-slate-500 border border-slate-200 dark:border-slate-700",children:o.time})]},i))})]})]}),e.jsxs("div",{className:"lg:col-span-1 bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Konfigurasi AI"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ambang Batas Kepercayaan Min."}),e.jsxs("span",{className:"text-xs font-bold text-primary bg-primary/10 px-2 py-0.5 rounded",children:[p.confidence_threshold,"%"]})]}),e.jsx("input",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-primary",max:"100",min:"0",type:"range",value:p.confidence_threshold,onChange:o=>r(i=>({...i,confidence_threshold:parseInt(o.target.value)}))}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Tiket di bawah skor ini memerlukan tinjauan manusia."})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block",children:"Pengingat Otomatis"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Beritahu petugas 1 jam sebelum pelanggaran SLA"})]}),e.jsx("button",{onClick:()=>r(o=>({...o,auto_reminder:!o.auto_reminder})),className:`w-10 h-6 rounded-full relative transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary ${p.auto_reminder?"bg-primary":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`block w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${p.auto_reminder?"translate-x-5":"translate-x-1"}`})})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-700",children:e.jsx("button",{onClick:x,className:"w-full py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Lihat Log Audit"})})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm mb-6 flex flex-col lg:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"relative w-full lg:max-w-md",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"search"})}),e.jsx("input",{className:"block w-full pl-10 pr-3 py-2.5 border border-slate-200 dark:border-slate-700 rounded-lg leading-5 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Cari aturan, klasifikasi, atau kondisi...",type:"text",value:g,onChange:o=>b(o.target.value)})]}),e.jsxs("div",{className:"flex w-full lg:w-auto items-center gap-3 overflow-x-auto pb-1 lg:pb-0",children:[e.jsx("div",{className:"flex items-center gap-2 border-r border-slate-200 dark:border-slate-700 pr-3 mr-1",children:e.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"filter_list"}),"Filter"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"hidden sm:block text-sm font-medium text-slate-500 dark:text-slate-400 mr-1",children:"Jenis:"}),e.jsxs("select",{className:"form-select block w-full pl-3 pr-10 py-2 text-base border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-lg bg-white dark:bg-slate-800 dark:text-white",value:h,onChange:o=>N(o.target.value),children:[e.jsx("option",{value:"all",children:"Semua Jenis"}),e.jsx("option",{value:"complaint",children:"Pengaduan"}),e.jsx("option",{value:"request",children:"Permintaan"}),e.jsx("option",{value:"suggestion",children:"Saran"})]})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-bold text-primary hover:bg-blue-50 dark:hover:bg-slate-700/50 transition-colors ml-auto lg:ml-0 whitespace-nowrap",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),e.jsx("span",{className:"hidden sm:inline",children:"Ekspor Laporan"})]})]})]}),e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-6 py-3 text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-800 mb-2",children:[e.jsx("div",{className:"col-span-4",children:"Aturan / Kondisi Klasifikasi"}),e.jsx("div",{className:"col-span-3",children:"Jalur Eskalasi"}),e.jsx("div",{className:"col-span-2",children:"Kepercayaan AI"}),e.jsx("div",{className:"col-span-2",children:"Status"}),e.jsx("div",{className:"col-span-1 text-right",children:"Aksi"})]}),e.jsx("div",{className:"space-y-3",children:y.map(o=>e.jsxs("div",{className:`group relative bg-surface-light dark:bg-surface-dark rounded-xl border shadow-sm hover:shadow-md transition-all p-4 md:p-0 md:grid md:grid-cols-12 md:gap-4 md:items-center ${o.priority_levels.includes("critical")?"border-l-4 border-l-red-500 border-y border-r border-slate-200 dark:border-slate-800 dark:border-r-slate-800":"border border-slate-200 dark:border-slate-800 hover:border-primary/30"}`,children:[e.jsxs("div",{className:"md:hidden flex justify-between items-start mb-4",children:[e.jsx("div",{className:`text-xs font-bold uppercase tracking-wider ${o.priority_levels.includes("critical")?"text-red-500":"text-slate-400"}`,children:o.priority_levels.includes("critical")?"Kritis":"Standar"}),e.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_(o.is_active)}`,children:o.is_active?"Aktif":"Tidak Aktif"})]}),e.jsx("div",{className:"col-span-4 md:pl-6 md:py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`hidden sm:flex size-10 rounded-lg items-center justify-center shrink-0 mt-1 ${o.priority_levels.includes("critical")?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"}`,children:e.jsx("span",{className:"material-symbols-outlined",children:o.service_types.includes("complaint")?"health_and_safety":o.service_types.includes("request")?"plumbing":"receipt_long"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white group-hover:text-primary transition-colors",children:o.name}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[o.service_types.map((i,n)=>e.jsxs("span",{className:"px-2 py-0.5 rounded text-[10px] font-semibold bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-600",children:["Jenis: ",i==="complaint"?"Pengaduan":i==="request"?"Permintaan":"Saran"]},n)),o.priority_levels.map((i,n)=>e.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-semibold ${c(i)}`,children:["Urgensi: ",i==="critical"?"Kritis":i==="high"?"Tinggi":"Sedang"]},n))]})]})]})}),e.jsxs("div",{className:"col-span-3 md:py-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:o.from_role==="staff"?"Petugas":o.from_role}),e.jsx("span",{className:"material-symbols-outlined text-xs text-slate-400",children:"arrow_forward"}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs font-bold ${o.to_role==="director"?"bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-300":"font-bold text-slate-900 dark:text-white"}`,children:o.to_role==="director"?"Direktur":o.to_role==="manager"?"Manager":"Kepala Unit"}),o.skip_levels&&e.jsx("span",{className:"material-symbols-outlined text-base text-amber-500",title:"Jalur Dipercepat",children:"bolt"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:o.skip_levels?"Melewati lapisan manajemen menengah":`SLA standar ${o.escalation_time_hours}j berlaku`})]}),e.jsx("div",{className:"col-span-2 md:py-4 mt-4 md:mt-0",children:e.jsxs("div",{className:"flex flex-col gap-1 w-full max-w-[120px]",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"Ambang Batas"}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[o.confidence_threshold,"%"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${o.confidence_threshold>=90?"bg-primary":o.confidence_threshold>=80?"bg-blue-500":"bg-orange-400"}`,style:{width:`${o.confidence_threshold}%`}})}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-0.5",children:["Auto-eskalasi: ",o.execution_count]})]})}),e.jsx("div",{className:"hidden md:flex col-span-2 md:py-4 items-center",children:e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${_(o.is_active)}`,children:[e.jsx("span",{className:`size-1.5 rounded-full ${m(o.is_active)} ${o.is_active?"":"animate-pulse"}`}),o.is_active?"Aktif":"Tidak Aktif"]})}),e.jsxs("div",{className:"col-span-1 md:pr-6 md:py-4 flex justify-end items-center gap-2 mt-4 md:mt-0 border-t border-slate-100 dark:border-slate-800 md:border-0 pt-3 md:pt-0",children:[e.jsx("button",{className:"p-2 text-slate-400 hover:text-primary hover:bg-blue-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:"Edit Aturan",children:e.jsx("span",{className:"material-symbols-outlined",children:"edit"})}),e.jsx("button",{onClick:()=>u(o.id,o.is_active),className:"p-2 text-slate-400 hover:text-primary hover:bg-blue-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:o.is_active?"Nonaktifkan":"Aktifkan",children:e.jsx("span",{className:"material-symbols-outlined",children:o.is_active?"pause":"play_arrow"})}),e.jsx("button",{className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})]})]},o.id))}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 dark:border-slate-800 mt-6 pt-4",children:[e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Menampilkan ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"1"})," sampai"," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:y.length})," dari"," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.length})," aturan"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm text-slate-500 dark:text-slate-400 border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!0,children:"Sebelumnya"}),e.jsx("button",{className:"px-3 py-1 text-sm text-slate-500 dark:text-slate-400 border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-50 dark:hover:bg-slate-800",children:"Selanjutnya"})]})]})]}),e.jsx("footer",{className:"bg-surface-light dark:bg-surface-dark border-t border-slate-200 dark:border-slate-800 py-6 mt-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-slate-500 dark:text-slate-400",children:[e.jsx("p",{children:"¬© 2024 Sistem Manajemen Pengaduan Pemerintah. Hak cipta dilindungi."}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("a",{className:"hover:text-primary",href:"#",children:"Kebijakan Privasi"}),e.jsx("a",{className:"hover:text-primary",href:"#",children:"Syarat Layanan"}),e.jsx("a",{className:"hover:text-primary",href:"#",children:"Dukungan"})]})]})})]})};class ja{async getRules(){try{return(await S.get("/escalation/rules")).data}catch(t){throw console.error("Error fetching escalation rules:",t),t}}async getRule(t){try{return(await S.get(`/escalation/rules/${t}`)).data}catch(s){throw console.error("Error fetching escalation rule:",s),s}}async createRule(t){try{return(await S.post("/escalation/rules",t)).data}catch(s){throw console.error("Error creating escalation rule:",s),s}}async updateRule(t,s){try{return(await S.put(`/escalation/rules/${t}`,s)).data}catch(d){throw console.error("Error updating escalation rule:",d),d}}async deleteRule(t){try{await S.delete(`/escalation/rules/${t}`)}catch(s){throw console.error("Error deleting escalation rule:",s),s}}async toggleRuleStatus(t,s){try{return(await S.patch(`/escalation/rules/${t}/toggle`,{is_active:s})).data}catch(d){throw console.error("Error toggling rule status:",d),d}}async getLogs(t,s){try{const d=new URLSearchParams;return t&&d.append("rule_id",t),s&&d.append("ticket_id",s),(await S.get(`/escalation/logs?${d.toString()}`)).data}catch(d){throw console.error("Error fetching escalation logs:",d),d}}async executeRule(t,s){try{await S.post(`/escalation/rules/${t}/execute`,{ticket_id:s})}catch(d){throw console.error("Error executing escalation rule:",d),d}}}const Me=new ja,ya=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(null);l.useEffect(()=>{f()},[]);const f=async()=>{try{d(!0),v(null);const b=await Me.getRules();t(b)}catch(b){console.error("Error fetching escalation rules:",b),v(b.message||"Failed to fetch escalation rules")}finally{d(!1)}},g=async(b,h)=>{try{await Me.updateRule(b,{is_active:!h}),await f()}catch(N){console.error("Error updating escalation rule:",N),v(N.message||"Failed to update escalation rule")}};return s?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Escalation Management"}),e.jsx("button",{onClick:()=>console.log("Add Rule clicked"),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Add Rule"})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:e.jsx("div",{className:"text-sm text-red-700",children:j})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Condition"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(b=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:b.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:JSON.stringify(b.trigger_conditions)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.actions.map(h=>h.type).join(", ")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>g(b.id,b.is_active),className:`mr-2 px-3 py-1 rounded text-xs ${b.is_active?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:b.is_active?"Deactivate":"Activate"})})]},b.id))})]})})})]})},va=()=>{const[a]=ge(),t=H(),s=a.get("qr")||a.get("token"),[d,j]=l.useState(!1),[v,f]=l.useState([]),[g,b]=l.useState([]),[h,N]=l.useState({overall_score:"",response_time_score:"",solution_quality_score:"",staff_courtesy_score:"",comments:"",unit_id:"",service_category_id:"",service_description:"",reporter_name:"",reporter_email:"",reporter_phone:"",is_anonymous:!1});l.useEffect(()=>{p()},[]);const p=async()=>{try{j(!0);const x=await fetch("/api/public/units");if(x.ok){const _=await x.json();f(_.data||[])}const y=await fetch("/api/public/service-categories");if(y.ok){const _=await y.json();b(_.data||[])}}catch(x){console.error("Error loading master data:",x)}finally{j(!1)}},r=async x=>{if(x.preventDefault(),!(h.overall_score||h.response_time_score||h.solution_quality_score||h.staff_courtesy_score)){alert("Mohon berikan minimal satu penilaian");return}if(!h.unit_id){alert("Mohon pilih unit/bagian yang memberikan layanan");return}if(!h.service_category_id){alert("Mohon pilih kategori layanan");return}if(!h.service_description.trim()){alert("Mohon deskripsikan layanan yang Anda terima");return}j(!0);try{const _={overall_score:h.overall_score?parseInt(h.overall_score):null,response_time_score:h.response_time_score?parseInt(h.response_time_score):null,solution_quality_score:h.solution_quality_score?parseInt(h.solution_quality_score):null,staff_courtesy_score:h.staff_courtesy_score?parseInt(h.staff_courtesy_score):null,comments:h.comments||null,unit_id:h.unit_id,service_category_id:h.service_category_id,service_description:h.service_description,reporter_name:h.is_anonymous?null:h.reporter_name||null,reporter_email:h.is_anonymous?null:h.reporter_email||null,reporter_phone:h.is_anonymous?null:h.reporter_phone||null,is_anonymous:h.is_anonymous,qr_token:s},m=await fetch("/api/public/surveys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}),c=await m.json();if(!m.ok)throw new Error(c.error||"Gagal mengirim survei");alert("Survei berhasil dikirim! Terima kasih atas feedback Anda."),N({overall_score:"",response_time_score:"",solution_quality_score:"",staff_courtesy_score:"",comments:"",unit_id:"",service_category_id:"",service_description:"",reporter_name:"",reporter_email:"",reporter_phone:"",is_anonymous:!1}),t("/survey?survey=success")}catch(_){console.error("Error submitting survey:",_),alert("Terjadi kesalahan: "+(_.response?.data?.error||_.message))}finally{j(!1)}},k=(x,y)=>{N(_=>({..._,[x]:y}))},u=({questionId:x,value:y})=>{const _=h[x]===y.toString(),m=["text-red-500","text-orange-500","text-yellow-500","text-lime-500","text-green-600"],c=["sentiment_very_dissatisfied","sentiment_dissatisfied","sentiment_neutral","sentiment_satisfied","sentiment_very_satisfied"];return e.jsxs("label",{className:"cursor-pointer group relative z-10",children:[e.jsx("input",{className:"peer sr-only",name:x,type:"radio",value:y,checked:_,onChange:o=>k(x,o.target.value)}),e.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center text-gray-400 bg-transparent peer-checked:bg-white peer-checked:${m[y-1]} peer-checked:shadow-sm transition-all hover:bg-white/50`,children:e.jsx("span",{className:`material-symbols-outlined text-lg ${_?m[y-1]:""}`,children:c[y-1]})})]})};return d&&v.length===0?e.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Memuat form survei..."})]})}):e.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark",children:[e.jsx("div",{className:"bg-surface-light dark:bg-surface-dark border-b border-slate-200 dark:border-slate-800 sticky top-0 z-50",children:e.jsx("div",{className:"max-w-[1200px] mx-auto px-4 md:px-8 py-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/"),className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10 text-primary hover:bg-primary/20 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"arrow_back"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold leading-tight text-slate-900 dark:text-white",children:"Survei Kepuasan"}),e.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Sistem Pengaduan Terintegrasi"})]})]})})}),e.jsxs("main",{className:"flex-grow w-full max-w-[960px] mx-auto px-4 py-8 md:px-8",children:[s&&e.jsx("div",{className:"mb-8 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-blue-100 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"qr_code"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:"Akses melalui QR Code"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:"Anda mengakses survei ini melalui QR Code. Silakan isi form di bawah ini."})]})]})}),e.jsxs("form",{onSubmit:r,className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-black tracking-tight text-slate-900 dark:text-white",children:"Survei Kepuasan Layanan"}),e.jsx("p",{className:"text-lg text-slate-500 dark:text-slate-400 max-w-2xl mx-auto",children:"Bantuan Anda sangat berharga untuk meningkatkan kualitas pelayanan kami. Mohon berikan penilaian yang objektif terhadap layanan yang telah Anda terima."})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Informasi Layanan"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Mohon isi informasi tentang layanan yang Anda terima"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-900 dark:text-white mb-2",children:["Unit/Bagian yang Memberikan Layanan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:"w-full rounded-xl border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:border-primary focus:ring-primary/20 text-sm p-4",value:h.unit_id,onChange:x=>k("unit_id",x.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Pilih Unit/Bagian"}),v.map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-900 dark:text-white mb-2",children:["Kategori Layanan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:"w-full rounded-xl border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:border-primary focus:ring-primary/20 text-sm p-4",value:h.service_category_id,onChange:x=>k("service_category_id",x.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Pilih Kategori Layanan"}),g.map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-900 dark:text-white mb-2",children:["Deskripsi Layanan yang Diterima ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{className:"w-full rounded-xl border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:border-primary focus:ring-primary/20 placeholder:text-slate-400 text-sm p-4",placeholder:"Jelaskan layanan apa yang Anda terima (contoh: Pendaftaran rawat jalan, Konsultasi dokter, dll.)",rows:3,value:h.service_description,onChange:x=>k("service_description",x.target.value),required:!0})]})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Informasi Pelapor"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Opsional - Anda dapat mengisi survei secara anonim"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"is_anonymous",className:"w-4 h-4 text-primary bg-slate-50 border-slate-300 rounded focus:ring-primary focus:ring-2",checked:h.is_anonymous,onChange:x=>k("is_anonymous",x.target.checked.toString())}),e.jsx("label",{htmlFor:"is_anonymous",className:"text-sm font-medium text-slate-900 dark:text-white",children:"Kirim survei secara anonim (tanpa identitas)"})]}),!h.is_anonymous&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-900 dark:text-white mb-2",children:"Nama Lengkap"}),e.jsx("input",{type:"text",className:"w-full rounded-xl border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:border-primary focus:ring-primary/20 placeholder:text-slate-400 text-sm p-4",placeholder:"Masukkan nama lengkap Anda",value:h.reporter_name,onChange:x=>k("reporter_name",x.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-900 dark:text-white mb-2",children:"Email"}),e.jsx("input",{type:"email",className:"w-full rounded-xl border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:border-primary focus:ring-primary/20 placeholder:text-slate-400 text-sm p-4",placeholder:"contoh@email.com",value:h.reporter_email,onChange:x=>k("reporter_email",x.target.value)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-900 dark:text-white mb-2",children:"Nomor Telepon"}),e.jsx("input",{type:"tel",className:"w-full rounded-xl border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:border-primary focus:ring-primary/20 placeholder:text-slate-400 text-sm p-4",placeholder:"08xxxxxxxxxx",value:h.reporter_phone,onChange:x=>k("reporter_phone",x.target.value)})]})]})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Penilaian Layanan"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Beri penilaian dari 1 (Sangat Buruk) hingga 5 (Sangat Baik)"})]}),e.jsxs("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-1",children:"Penilaian Keseluruhan"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"Secara keseluruhan, bagaimana tingkat kepuasan Anda terhadap layanan yang diberikan?"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 md:gap-4 min-w-[280px]",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"1"}),e.jsx("div",{className:"flex flex-1 justify-between bg-slate-100 dark:bg-slate-800 rounded-full p-1",children:[1,2,3,4,5].map(x=>e.jsx(u,{questionId:"overall_score",value:x},x))}),e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"5"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-1",children:"Kecepatan Respon"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"Bagaimana penilaian Anda terhadap kecepatan respon dan penanganan tiket?"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 md:gap-4 min-w-[280px]",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"1"}),e.jsx("div",{className:"flex flex-1 justify-between bg-slate-100 dark:bg-slate-800 rounded-full p-1",children:[1,2,3,4,5].map(x=>e.jsx(u,{questionId:"response_time_score",value:x},x))}),e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"5"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-1",children:"Kualitas Solusi"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"Bagaimana penilaian Anda terhadap kualitas solusi yang diberikan?"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 md:gap-4 min-w-[280px]",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"1"}),e.jsx("div",{className:"flex flex-1 justify-between bg-slate-100 dark:bg-slate-800 rounded-full p-1",children:[1,2,3,4,5].map(x=>e.jsx(u,{questionId:"solution_quality_score",value:x},x))}),e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"5"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-1",children:"Keramahan Petugas"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"Bagaimana penilaian Anda terhadap keramahan dan profesionalitas petugas?"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 md:gap-4 min-w-[280px]",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"1"}),e.jsx("div",{className:"flex flex-1 justify-between bg-slate-100 dark:bg-slate-800 rounded-full p-1",children:[1,2,3,4,5].map(x=>e.jsx(u,{questionId:"staff_courtesy_score",value:x},x))}),e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"5"})]})]})})]})]}),e.jsx("section",{className:"bg-surface-light dark:bg-surface-dark rounded-2xl border border-slate-200 dark:border-slate-700 p-6",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-900 dark:text-white mb-2",children:"Komentar dan Saran (Opsional)"}),e.jsx("textarea",{className:"w-full rounded-xl border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:border-primary focus:ring-primary/20 placeholder:text-slate-400 text-sm p-4",placeholder:"Berikan komentar, saran, atau masukan untuk perbaikan layanan kami...",rows:4,value:h.comments,onChange:x=>k("comments",x.target.value)})]})})}),e.jsx("div",{className:"flex justify-end pt-4 pb-12",children:e.jsx("button",{className:"w-full md:w-auto px-8 py-3 bg-primary hover:bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-primary/30 transition-all flex items-center justify-center gap-2 group transform active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed",type:"submit",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Mengirim..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Kirim Survei"}),e.jsx("span",{className:"material-symbols-outlined group-hover:translate-x-1 transition-transform",children:"send"})]})})})]})]}),e.jsx("footer",{className:"bg-surface-light dark:bg-surface-dark border-t border-slate-200 dark:border-slate-800 mt-auto py-8",children:e.jsx("div",{className:"max-w-[960px] mx-auto px-4 md:px-8 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"¬© 2024 Sistem Pengaduan Terintegrasi. Hak Cipta Dilindungi Undang-undang."})})})]})},Ie=()=>{const a=H(),[t]=ge(),[s,d]=l.useState([]),[j,v]=l.useState(!0),[f,g]=l.useState(""),[b,h]=l.useState(""),N=t.get("survey")==="success";l.useEffect(()=>{p()},[]);const p=async()=>{try{v(!0);const{data:u,error:x}=await B.from("tickets").select(`
                    id,
                    ticket_number,
                    title,
                    status,
                    resolved_at,
                    units (name),
                    service_categories (name)
                `).eq("status","resolved").not("resolved_at","is",null).order("resolved_at",{ascending:!1}).limit(10);if(x)throw x;const y=(u||[]).map(_=>({..._,units:_.units?_.units[0]:null,service_categories:_.service_categories?_.service_categories[0]:null}));d(y)}catch(u){console.error("Error loading tickets:",u)}finally{v(!1)}},r=async()=>{if(!f.trim()){h("Mohon masukkan nomor tiket");return}h(""),v(!0);try{const{data:u,error:x}=await B.from("tickets").select("id, ticket_number, status, resolved_at").eq("ticket_number",f.trim()).single();if(x||!u){h("Tiket tidak ditemukan");return}if(u.status!=="resolved"){h("Survei hanya dapat diisi untuk tiket yang sudah diselesaikan");return}a(`/survey/form?ticketId=${u.id}`)}catch{h("Terjadi kesalahan saat mencari tiket")}finally{v(!1)}},k=u=>{a(`/survey/form?ticketId=${u}`)};return e.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark",children:[e.jsx("div",{className:"bg-surface-light dark:bg-surface-dark border-b border-slate-200 dark:border-slate-800",children:e.jsx("div",{className:"max-w-[1200px] mx-auto px-4 md:px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>a("/"),className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10 text-primary hover:bg-primary/20 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"arrow_back"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold leading-tight text-slate-900 dark:text-white",children:"Survei Kepuasan"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Berikan penilaian terhadap layanan yang telah Anda terima"})]})]})})}),e.jsxs("main",{className:"flex-grow w-full max-w-[960px] mx-auto px-4 py-8 md:px-8",children:[N&&e.jsx("div",{className:"mb-8 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-green-100 text-green-600",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:"Survei Berhasil Dikirim!"}),e.jsx("p",{className:"text-green-700 dark:text-green-300",children:"Terima kasih atas feedback Anda. Penilaian Anda sangat membantu kami untuk meningkatkan kualitas layanan."})]})]})}),e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-black tracking-tight text-slate-900 dark:text-white",children:"Akses Survei Kepuasan"}),e.jsx("p",{className:"text-lg text-slate-500 dark:text-slate-400 max-w-2xl mx-auto",children:"Pilih tiket yang sudah diselesaikan untuk memberikan penilaian terhadap layanan yang Anda terima."})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm p-6 mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4",children:"Cari Tiket Anda"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",placeholder:"Masukkan nomor tiket (contoh: TKT-2024-0001)",className:"w-full rounded-xl border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:border-primary focus:ring-primary/20 placeholder:text-slate-400 text-sm p-4",value:f,onChange:u=>g(u.target.value),onKeyPress:u=>u.key==="Enter"&&r()}),b&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:b})]}),e.jsx("button",{onClick:r,disabled:j,className:"px-6 py-4 bg-primary hover:bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-primary/30 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Mencari..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Cari Tiket"}),e.jsx("span",{className:"material-symbols-outlined",children:"search"})]})})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Tiket yang Baru Diselesaikan"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Pilih tiket untuk mengisi survei kepuasan"})]}),e.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:j?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Memuat tiket..."})]}):s.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-2xl",children:"inbox"})}),e.jsx("h4",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Tidak Ada Tiket"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Belum ada tiket yang diselesaikan untuk survei."})]}):s.map(u=>e.jsx("div",{className:"p-6 hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"text-lg font-bold text-slate-900 dark:text-white",children:u.ticket_number}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"Diselesaikan"})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-2",children:u.title}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-500",children:[u.units&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"business"}),u.units.name]}),u.service_categories&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"category"}),u.service_categories.name]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),"Diselesaikan: ",new Date(u.resolved_at).toLocaleDateString("id-ID")]})]})]}),e.jsxs("button",{onClick:()=>k(u.id),className:"ml-4 px-4 py-2 bg-primary hover:bg-blue-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[e.jsx("span",{children:"Isi Survei"}),e.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_forward"})]})]})},u.id))})]})]}),e.jsx("footer",{className:"bg-surface-light dark:bg-surface-dark border-t border-slate-200 dark:border-slate-800 mt-auto py-8",children:e.jsx("div",{className:"max-w-[960px] mx-auto px-4 md:px-8 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"¬© 2024 Sistem Pengaduan Terintegrasi. Hak Cipta Dilindungi Undang-undang."})})})]})},Na=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(null),[j,v]=l.useState(!0),[f,g]=l.useState(null),[b,h]=l.useState({start:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]});l.useEffect(()=>{N()},[b]);const N=async()=>{try{v(!0),g(null);const[r,k]=await Promise.all([J.getSurveyReports(b.start,b.end),J.getSurveyStats(b.start,b.end)]);t(r||[]),d(k||{total_surveys:0,total_responses:0,average_completion_rate:0,active_surveys:0})}catch(r){console.error("Error fetching survey reports:",r),g(r.message||"Failed to fetch survey reports"),t([]),d({total_surveys:0,total_responses:0,average_completion_rate:0,active_surveys:0})}finally{v(!1)}},p=async()=>{try{await J.exportSurveyReport(b.start,b.end)}catch(r){console.error("Error exporting report:",r),g(r.message||"Failed to export report")}};return j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Survey Reports"}),e.jsx("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",children:"Export Report"})]}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:e.jsx("div",{className:"text-sm text-red-700",children:f})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),e.jsx("input",{type:"date",value:b.start,onChange:r=>h({...b,start:r.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),e.jsx("input",{type:"date",value:b.end,onChange:r=>h({...b,end:r.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.total_surveys}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Surveys"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.total_responses}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Responses"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[s.average_completion_rate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Completion Rate"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.active_surveys}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Surveys"})]})]}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Survey Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Responses"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.length>0?a.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:r.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.responses}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[r.completion_rate.toFixed(1),"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(r.created_at).toLocaleDateString()})]},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No survey data available for the selected date range"})})})]})})})]})},Fe=()=>{const[a]=ge(),t=H(),s=a.get("qr")||a.get("qrCode"),[d,j]=l.useState({unit_tujuan:"Poli Penyakit Dalam - Gedung A",service_type:"",full_name:"",is_anonymous:!1,phone:"",email:"",job:"",provinsi:"",kota_kabupaten:"",kecamatan:"",kelurahan:"",age:"",gender:"",q1:"",q2:"",q3:"",q4:"",q5:"",q6:"",q7:"",q8:"",overall_satisfaction:"",suggestions:"",date:new Date().toISOString().split("T")[0]}),[v,f]=l.useState(!1),[g,b]=l.useState(!1),[h,N]=l.useState(""),p=x=>{const{name:y,value:_,type:m}=x.target,c=x.target.checked;j(o=>({...o,[y]:m==="checkbox"?c:_}))},r=(x,y)=>{j(_=>({..._,[x]:y}))},k=async x=>{x.preventDefault(),N(""),f(!0);try{const y=await fetch("/api/public/survey/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...d,qr_code:s})}),_=await y.json();if(!y.ok)throw new Error(_.error||"Gagal mengirim survei");b(!0),window.scrollTo(0,0)}catch(y){console.error("Error submitting survey:",y),N(y.message||"Terjadi kesalahan saat mengirim survei"),window.scrollTo(0,0)}finally{f(!1)}};if(g)return e.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center font-display",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400 text-4xl",children:"check_circle"})}),e.jsx("h2",{className:"text-3xl font-black text-text-main dark:text-white mb-3",children:"Terima Kasih!"}),e.jsx("p",{className:"text-lg text-text-sub dark:text-gray-400 mb-8 leading-relaxed",children:"Survei Anda telah berhasil dikirim. Masukan Anda sangat berharga bagi peningkatan kualitas layanan kami."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{b(!1),j(x=>({...x,service_type:"",full_name:"",is_anonymous:!1,phone:"",email:"",job:"",age:"",gender:"",q1:"",q2:"",q3:"",q4:"",q5:"",q6:"",q7:"",q8:"",overall_satisfaction:"",suggestions:""})),window.scrollTo(0,0)},className:"w-full px-6 py-4 bg-primary hover:bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-primary/30 transition-all",children:"Isi Survei Lagi"}),e.jsx("button",{onClick:()=>t("/"),className:"w-full px-6 py-4 bg-white dark:bg-surface-dark border border-border-light dark:border-border-dark text-text-main dark:text-white font-bold rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all",children:"Kembali ke Beranda"})]})]})});const u=[{id:"q1",code:"U1",title:"Persyaratan",text:"Bagaimana pendapat Anda tentang kesesuaian persyaratan pelayanan dengan jenis pelayanannya?"},{id:"q2",code:"U2",title:"Prosedur",text:"Bagaimana kemudahan prosedur pelayanan di unit ini?"},{id:"q3",code:"U3",title:"Waktu Pelayanan",text:"Bagaimana kecepatan waktu dalam memberikan pelayanan?"},{id:"q4",code:"U4",title:"Biaya / Tarif",text:"Bagaimana kewajaran biaya/tarif dalam pelayanan?"},{id:"q5",code:"U5",title:"Produk Spesifikasi",text:"Bagaimana kesesuaian produk pelayanan antara yang tercantum dalam standar pelayanan dengan hasil yang diberikan?"},{id:"q6",code:"U6",title:"Kompetensi",text:"Bagaimana kompetensi/kemampuan petugas dalam pelayanan?"},{id:"q7",code:"U7",title:"Perilaku",text:"Bagaimana perilaku petugas dalam pelayanan terkait kesopanan dan keramahan?"},{id:"q8",code:"U8",title:"Pengaduan",text:"Bagaimana kualitas penanganan pengaduan, saran dan masukan?"}];return e.jsxs("div",{className:"bg-background-light dark:bg-background-dark font-display text-text-main antialiased min-h-screen flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 w-full bg-surface-light dark:bg-surface-dark border-b border-border-light dark:border-border-dark shadow-sm",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 md:px-8 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10 text-primary",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"local_hospital"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold leading-tight text-text-main dark:text-white",children:"Sistem Pengaduan RSUD"}),e.jsx("p",{className:"text-xs text-text-sub font-medium",children:"Layanan Publik Terintegrasi"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-background-light dark:bg-background-dark hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-text-main dark:text-white",children:e.jsx("span",{className:"material-symbols-outlined",children:"language"})}),e.jsx("button",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-background-light dark:bg-background-dark hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-text-main dark:text-white",children:e.jsx("span",{className:"material-symbols-outlined",children:"help"})})]})]})}),e.jsxs("main",{className:"flex-grow w-full max-w-[960px] mx-auto px-4 py-8 md:px-8",children:[e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200",children:"Edisi 2024"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-black tracking-tight text-text-main dark:text-white",children:"Survei Kepuasan Masyarakat (SKM)"}),e.jsx("p",{className:"text-lg text-text-sub dark:text-gray-400 max-w-2xl",children:"Partisipasi Anda sangat berharga bagi kami. Bantu kami meningkatkan kualitas pelayanan kesehatan RSUD dengan mengisi survei singkat ini secara objektif."})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("details",{className:"group border border-border-light dark:border-border-dark rounded-xl bg-surface-light dark:bg-surface-dark overflow-hidden transition-all duration-300",children:[e.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-4 p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-text-sub",children:"gavel"}),e.jsx("span",{className:"text-sm font-semibold text-text-main dark:text-white",children:"Dasar Hukum & Kerahasiaan Data"})]}),e.jsx("span",{className:"material-symbols-outlined text-text-sub transition-transform group-open:rotate-180",children:"expand_more"})]}),e.jsx("div",{className:"px-4 pb-4 pt-0 text-sm text-text-sub dark:text-gray-400 border-t border-transparent group-open:border-border-light dark:group-open:border-border-dark",children:e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{children:"Survei ini dilaksanakan berdasarkan Peraturan Menteri Pendayagunaan Aparatur Negara dan Reformasi Birokrasi Nomor 14 Tahun 2017 tentang Pedoman Penyusunan Survei Kepuasan Masyarakat Unit Penyelenggara Pelayanan Publik."}),e.jsx("p",{className:"font-medium text-primary",children:"Privasi Anda terjaga. Data yang dikumpulkan hanya digunakan untuk keperluan evaluasi dan peningkatan layanan."})]})})]})})]}),h&&e.jsxs("div",{className:"mb-8 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl p-4 flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300 font-medium",children:h})]}),e.jsxs("form",{onSubmit:k,className:"space-y-8",children:[e.jsxs("section",{className:"bg-blue-50/50 dark:bg-blue-900/10 rounded-2xl border border-blue-100 dark:border-blue-800 p-6 flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-white dark:bg-surface-dark rounded-xl shadow-sm text-primary",children:e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"qr_code_scanner"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("label",{className:"block text-xs font-bold uppercase tracking-wider text-primary mb-1",children:"Unit Tujuan (Otomatis)"}),e.jsxs("div",{className:"text-xl font-bold text-text-main dark:text-white flex items-center gap-2",children:[e.jsx("span",{children:d.unit_tujuan}),e.jsx("span",{className:"material-symbols-outlined text-green-500 text-lg",title:"Terverifikasi",children:"verified"})]}),e.jsx("p",{className:"text-sm text-text-sub",children:"Unit terdeteksi otomatis dari kode QR lokasi."}),e.jsx("input",{type:"hidden",name:"unit_tujuan",value:d.unit_tujuan})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-2xl border border-border-light dark:border-border-dark shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-border-light dark:border-border-dark bg-gray-50/50 dark:bg-gray-800/50 flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/20 text-primary",children:e.jsx("span",{className:"material-symbols-outlined text-sm font-bold",children:"person"})}),e.jsx("h3",{className:"text-xl font-bold text-text-main dark:text-white",children:"Data Responden"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-bold text-text-main dark:text-white",children:["Jenis Layanan yang Diterima ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["rawat_jalan","rawat_inap","darurat","lainnya"].map(x=>e.jsxs("label",{className:"cursor-pointer relative",children:[e.jsx("input",{type:"radio",name:"service_type",value:x,checked:d.service_type===x,onChange:y=>r("service_type",y.target.value),className:"custom-radio sr-only"}),e.jsxs("div",{className:`flex items-center justify-center gap-2 p-3 rounded-xl border transition-all h-full ${d.service_type===x?"border-primary bg-primary/5 text-primary":"border-border-light dark:border-border-dark bg-white dark:bg-surface-dark hover:border-primary/50"}`,children:[e.jsx("div",{className:`radio-dot w-4 h-4 rounded-full border-2 flex-shrink-0 transition-all ${d.service_type===x?"border-primary bg-primary shadow-[0_0_0_3px_rgba(19,127,236,0.2)]":"border-gray-300 dark:border-gray-600 bg-transparent"}`}),e.jsx("span",{className:"text-sm font-medium capitalize",children:x.replace("_"," ")})]})]},x))})]}),e.jsx("hr",{className:"border-border-light dark:border-border-dark"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"block text-sm font-bold text-text-main dark:text-white",htmlFor:"full_name",children:"Nama Lengkap"}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"is_anonymous",checked:d.is_anonymous,onChange:p,className:"rounded border-gray-300 text-primary focus:ring-primary h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm text-text-sub",children:"Kirim sebagai Anonim"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-sub",children:"badge"}),e.jsx("input",{type:"text",id:"full_name",name:"full_name",value:d.full_name,onChange:p,disabled:d.is_anonymous,placeholder:"Masukkan nama lengkap Anda",className:"w-full pl-10 rounded-xl border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary focus:ring-primary/20 text-sm h-11 disabled:opacity-50"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-bold text-text-main dark:text-white",htmlFor:"phone",children:["Nomor HP (WhatsApp) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-sub",children:"smartphone"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:d.phone,onChange:p,required:!0,placeholder:"08xxxxxxxxxx",className:"w-full pl-10 rounded-xl border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary focus:ring-primary/20 text-sm h-11"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-bold text-text-main dark:text-white",htmlFor:"email",children:["Email ",e.jsx("span",{className:"text-text-sub font-normal",children:"(Opsional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-sub",children:"mail"}),e.jsx("input",{type:"email",id:"email",name:"email",value:d.email,onChange:p,placeholder:"contoh@email.com",className:"w-full pl-10 rounded-xl border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary focus:ring-primary/20 text-sm h-11"})]})]}),e.jsxs("div",{className:"space-y-3 md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-bold text-text-main dark:text-white",htmlFor:"job",children:["Pekerjaan ",e.jsx("span",{className:"text-text-sub font-normal",children:"(Opsional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-sub",children:"work"}),e.jsx("input",{type:"text",id:"job",name:"job",value:d.job,onChange:p,placeholder:"PNS, Swasta, Wiraswasta, dll",className:"w-full pl-10 rounded-xl border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary focus:ring-primary/20 text-sm h-11"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-bold text-text-main dark:text-white",children:"Alamat Domisili"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("select",{name:"provinsi",value:d.provinsi,onChange:p,className:"rounded-xl border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary focus:ring-primary/20 text-sm h-11 text-text-main dark:text-white",children:[e.jsx("option",{value:"",children:"Pilih Provinsi"}),e.jsx("option",{value:"Jawa Tengah",children:"Jawa Tengah"}),e.jsx("option",{value:"Jawa Barat",children:"Jawa Barat"}),e.jsx("option",{value:"Jawa Timur",children:"Jawa Timur"}),e.jsx("option",{value:"DKI Jakarta",children:"DKI Jakarta"}),e.jsx("option",{value:"DI Yogyakarta",children:"DI Yogyakarta"})]}),e.jsxs("select",{name:"kota_kabupaten",value:d.kota_kabupaten,onChange:p,className:"rounded-xl border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary focus:ring-primary/20 text-sm h-11 text-text-main dark:text-white",children:[e.jsx("option",{value:"",children:"Pilih Kota/Kabupaten"}),e.jsx("option",{value:"Kota Semarang",children:"Kota Semarang"}),e.jsx("option",{value:"Kabupaten Semarang",children:"Kabupaten Semarang"})]}),e.jsx("select",{name:"kecamatan",value:d.kecamatan,onChange:p,className:"rounded-xl border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary focus:ring-primary/20 text-sm h-11 text-text-main dark:text-white",children:e.jsx("option",{value:"",children:"Pilih Kecamatan"})}),e.jsx("select",{name:"kelurahan",value:d.kelurahan,onChange:p,className:"rounded-xl border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark focus:border-primary focus:ring-primary/20 text-sm h-11 text-text-main dark:text-white",children:e.jsx("option",{value:"",children:"Pilih Kelurahan/Desa"})})]})]}),e.jsx("hr",{className:"border-border-light dark:border-border-dark"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-bold text-text-main dark:text-white",children:"Usia Responden"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["< 20 Th","20 - 40 Th","41 - 60 Th","> 60 Th"].map(x=>e.jsxs("label",{className:"cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"age",value:x,checked:d.age===x,onChange:y=>r("age",y.target.value),className:"peer sr-only"}),e.jsx("span",{className:"inline-flex px-4 py-2 rounded-lg border border-border-light dark:border-border-dark bg-white dark:bg-surface-dark text-sm font-medium text-text-sub peer-checked:bg-primary peer-checked:text-white peer-checked:border-primary transition-all",children:x})]},x))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-bold text-text-main dark:text-white",children:"Jenis Kelamin"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:"flex-1 cursor-pointer relative",children:[e.jsx("input",{type:"radio",name:"gender",value:"male",checked:d.gender==="male",onChange:x=>r("gender",x.target.value),className:"custom-radio sr-only"}),e.jsxs("div",{className:`flex items-center justify-center gap-2 p-2.5 rounded-lg border transition-all ${d.gender==="male"?"border-primary bg-primary/5 text-primary":"border-border-light dark:border-border-dark bg-white dark:bg-surface-dark hover:border-primary/50"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-text-sub",children:"male"}),e.jsx("span",{className:"text-sm font-medium",children:"Laki-laki"})]})]}),e.jsxs("label",{className:"flex-1 cursor-pointer relative",children:[e.jsx("input",{type:"radio",name:"gender",value:"female",checked:d.gender==="female",onChange:x=>r("gender",x.target.value),className:"custom-radio sr-only"}),e.jsxs("div",{className:`flex items-center justify-center gap-2 p-2.5 rounded-lg border transition-all ${d.gender==="female"?"border-primary bg-primary/5 text-primary":"border-border-light dark:border-border-dark bg-white dark:bg-surface-dark hover:border-primary/50"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-text-sub",children:"female"}),e.jsx("span",{className:"text-sm font-medium",children:"Perempuan"})]})]})]})]})]})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-2xl border border-border-light dark:border-border-dark shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-5 border-b border-border-light dark:border-border-dark bg-gray-50/50 dark:bg-gray-800/50 flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/20 text-primary",children:e.jsx("span",{className:"material-symbols-outlined text-sm font-bold",children:"analytics"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-text-main dark:text-white",children:"Penilaian Layanan"}),e.jsx("p",{className:"text-xs text-text-sub",children:"Beri penilaian dari 1 (Sangat Buruk) hingga 5 (Sangat Baik)"})]})]})}),e.jsx("div",{className:"divide-y divide-border-light dark:divide-border-dark",children:u.map(x=>e.jsx("div",{className:"p-6 hover:bg-gray-50 dark:hover:bg-gray-800/30 transition-colors",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"text-xs font-bold text-primary uppercase tracking-wider mb-1 block",children:[x.code," - ",x.title]}),e.jsx("p",{className:"text-sm font-medium text-text-main dark:text-white leading-relaxed",children:x.text})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 md:gap-4 min-w-[320px]",children:[1,2,3,4,5].map(y=>{const _=["text-red-600","text-orange-500","text-yellow-400","text-green-500","text-blue-600"],m=["bg-red-50","bg-orange-50","bg-yellow-50","bg-green-50","bg-blue-50"],c=["border-red-500/50","border-orange-500/50","border-yellow-400/50","border-green-500/50","border-blue-600/50"],o=["sentiment_very_dissatisfied","sentiment_dissatisfied","sentiment_neutral","sentiment_satisfied","sentiment_very_satisfied"],i=d[x.id]===y.toString();return e.jsxs("label",{className:"cursor-pointer group relative flex flex-col items-center",children:[e.jsx("input",{type:"radio",name:x.id,value:y,checked:i,onChange:n=>r(x.id,n.target.value),className:"rating-input sr-only"}),e.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 rounded-full border flex items-center justify-center transition-all duration-300 ${i?`${c[y-1]} ${m[y-1]} ${_[y-1]} shadow-lg`:"border-gray-200 bg-white dark:bg-surface-dark text-gray-300 group-hover:bg-gray-50"}`,children:e.jsx("span",{className:`rating-icon material-symbols-outlined text-3xl md:text-4xl transition-transform duration-200 ${i?"scale-110":""}`,children:o[y-1]})})]},y)})})]})},x.id))})]}),e.jsxs("section",{className:"grid md:grid-cols-12 gap-6",children:[e.jsxs("div",{className:"md:col-span-12 bg-white dark:bg-surface-dark rounded-2xl p-6 md:p-8 border border-border-light dark:border-border-dark shadow-md relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-indigo-50/50 dark:from-blue-900/10 dark:to-indigo-900/10 pointer-events-none"}),e.jsxs("div",{className:"relative z-10 text-center mb-10",children:[e.jsx("h3",{className:"text-2xl font-black text-text-main dark:text-white mb-2",children:"Kepuasan Keseluruhan Layanan"}),e.jsx("p",{className:"text-text-sub dark:text-gray-400",children:"Secara umum, bagaimana tingkat kepuasan Anda terhadap pelayanan kami?"})]}),e.jsx("div",{className:"relative z-10 flex flex-wrap justify-center gap-4 md:gap-10",children:[{val:"sangat_tidak_puas",label:"Sangat Buruk",icon:"sentiment_very_dissatisfied",color:"red"},{val:"tidak_puas",label:"Buruk",icon:"sentiment_dissatisfied",color:"orange"},{val:"kurang_puas",label:"Cukup",icon:"sentiment_neutral",color:"yellow"},{val:"puas",label:"Baik",icon:"sentiment_satisfied",color:"green"},{val:"sangat_puas",label:"Sangat Baik",icon:"sentiment_very_satisfied",color:"blue"}].map(x=>{const y=d.overall_satisfaction===x.val;return e.jsxs("label",{className:"cursor-pointer group flex flex-col items-center gap-3",children:[e.jsx("input",{type:"radio",name:"overall_satisfaction",value:x.val,checked:y,onChange:_=>r("overall_satisfaction",_.target.value),className:"rating-input sr-only"}),e.jsx("div",{className:`w-16 h-16 md:w-20 md:h-20 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${y?`border-${x.color}-500/50 bg-${x.color}-50 text-${x.color}-600 shadow-xl`:"border-gray-100 bg-white dark:bg-surface-dark text-gray-300 group-hover:bg-gray-50"}`,children:e.jsx("span",{className:"rating-icon material-symbols-outlined text-4xl md:text-5xl",children:x.icon})}),e.jsx("span",{className:`text-xs font-bold transition-colors ${y?`text-${x.color}-600`:"text-gray-400 group-hover:text-gray-500"}`,children:x.label})]},x.val)})})]}),e.jsxs("div",{className:"md:col-span-12 bg-surface-light dark:bg-surface-dark rounded-2xl border border-border-light dark:border-border-dark p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-text-main dark:text-white mb-2",htmlFor:"suggestions",children:"Saran dan Keluhan"}),e.jsx("textarea",{id:"suggestions",name:"suggestions",value:d.suggestions,onChange:p,rows:4,placeholder:"Tuliskan saran atau keluhan Anda di sini untuk perbaikan pelayanan kami...",className:"w-full rounded-xl border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-main dark:text-white focus:border-primary focus:ring-primary/20 placeholder:text-gray-400 text-sm p-4"})]}),e.jsxs("div",{className:"pt-4 border-t border-border-light dark:border-border-dark",children:[e.jsx("label",{className:"block text-xs font-bold uppercase tracking-wider text-text-sub mb-2",htmlFor:"date",children:"Tanggal Survei"}),e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-sub text-lg",children:"calendar_today"}),e.jsx("input",{type:"date",id:"date",name:"date",value:d.date,onChange:p,className:"w-full pl-10 rounded-lg border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-main dark:text-white focus:border-primary focus:ring-primary/20 text-sm h-11"})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 pb-12",children:e.jsx("button",{type:"submit",disabled:v,className:"w-full md:w-auto px-8 py-3 bg-primary hover:bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-primary/30 transition-all flex items-center justify-center gap-2 group transform active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Mengirim..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Kirim Survei"}),e.jsx("span",{className:"material-symbols-outlined group-hover:translate-x-1 transition-transform",children:"send"})]})})})]})]}),e.jsx("footer",{className:"bg-surface-light dark:bg-surface-dark border-t border-border-light dark:border-border-dark mt-auto py-8",children:e.jsxs("div",{className:"max-w-[960px] mx-auto px-4 md:px-8 text-center",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 mb-4 opacity-50 grayscale hover:grayscale-0 transition-all",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"apartment"})}),e.jsx("span",{className:"text-sm font-semibold text-text-main dark:text-white",children:"RSUD Kabupaten"})]}),e.jsxs("p",{className:"text-xs text-text-sub",children:["¬© 2024 RSUD Kabupaten. Hak Cipta Dilindungi Undang-undang.",e.jsx("br",{}),"Sistem Survei Kepuasan Masyarakat Elektronik (e-SKM) v2.0"]})]})})]})};class wa{async getUsers(){try{return(await S.get("/users")).data?.data||[]}catch(t){return console.error("Error fetching users:",t),[]}}async getUnits(){try{return(await S.get("/users/units")).data?.data||[]}catch(t){console.warn("Primary endpoint /users/units failed, trying public fallback...",t);try{const s=await S.get("/public/units");return Array.isArray(s.data)?s.data:s.data?.data||[]}catch(s){return console.error("Public fallback /public/units also failed:",s),[]}}}async getRoles(){try{return(await S.get("/users/roles")).data?.data||[]}catch(t){console.warn("Primary endpoint /users/roles failed, trying public fallback...",t);try{const s=await S.get("/public/roles");return Array.isArray(s.data)?s.data:s.data?.data||[]}catch(s){return console.error("Public fallback /public/roles also failed:",s),[]}}}async createUser(t){return(await S.post("/users",t)).data?.data}async updateUser(t,s){return(await S.put(`/users/${t}`,s)).data?.data}async deleteUser(t){await S.delete(`/users/${t}`)}async getUserById(t){return(await S.get(`/users/${t}`)).data?.data}async assignRole(t,s){await S.post(`/users/${t}/roles`,{roleId:s})}async removeRole(t,s){await S.delete(`/users/${t}/roles/${s}`)}}const ee=new wa,_a=()=>{const[a,t]=l.useState([]),[s,d]=l.useState([]),[j,v]=l.useState(!0),[f,g]=l.useState(""),[b,h]=l.useState(""),[N,p]=l.useState(""),[r,k]=l.useState(""),[u,x]=l.useState(1),[y,_]=l.useState(!1),[m,c]=l.useState(!1),[o,i]=l.useState(null),[n,w]=l.useState({full_name:"",email:"",employee_id:"",phone:"",unit_id:"",role:"staff",password:""}),E=10;l.useEffect(()=>{P()},[]);const P=async()=>{v(!0);try{const[A,O]=await Promise.all([ee.getUsers(),ee.getUnits()]);t(A),d(O)}catch(A){console.error("Error fetching data:",A),alert("Gagal memuat data pengguna.")}finally{v(!1)}},K=async()=>{try{const A={full_name:n.full_name,email:n.email,employee_id:n.employee_id||void 0,phone:n.phone||void 0,unit_id:n.unit_id||void 0,role:n.role,password:n.password,create_admin_account:!!n.password};await ee.createUser(A),alert("Pengguna berhasil ditambahkan."),_(!1),M(),P()}catch(A){console.error("Error adding user:",A),alert("Gagal menambahkan pengguna: "+A.message)}},L=async()=>{if(o)try{const A={full_name:n.full_name,email:n.email,employee_id:n.employee_id||void 0,phone:n.phone||void 0,unit_id:n.unit_id||void 0,role:n.role,password:n.password,update_admin_password:!!n.password};await ee.updateUser(o.id,A),alert("Pengguna berhasil diperbarui."),c(!1),i(null),M(),P()}catch(A){console.error("Error updating user:",A),alert("Gagal memperbarui pengguna: "+A.message)}},C=async A=>{if(confirm("Apakah Anda yakin ingin menonaktifkan pengguna ini?"))try{await ee.deleteUser(A),alert("Pengguna berhasil dinonaktifkan."),P()}catch(O){console.error("Error deleting user:",O),alert("Gagal menonaktifkan pengguna.")}},D=A=>{i(A),w({full_name:A.full_name,email:A.email,employee_id:A.employee_id||"",phone:A.phone||"",unit_id:A.unit_id||"",role:A.role,password:""}),c(!0)},M=()=>{w({full_name:"",email:"",employee_id:"",phone:"",unit_id:"",role:"staff",password:""})},T=(Array.isArray(a)?a:[]).filter(A=>{const O=A.full_name.toLowerCase().includes(f.toLowerCase())||A.email.toLowerCase().includes(f.toLowerCase())||A.employee_id&&A.employee_id.includes(f),Oe=b?A.role===b:!0,ze=N?A.unit_id===N:!0,qe=r?r==="active"?A.is_active:!A.is_active:!0;return O&&Oe&&ze&&qe}),R=Math.ceil(T.length/E),F=T.slice((u-1)*E,u*E);return e.jsxs("div",{className:"flex flex-col h-full min-w-0 bg-background-light dark:bg-background-dark",children:[e.jsxs("header",{className:"bg-surface-light dark:bg-surface-dark flex items-center justify-between whitespace-nowrap border-b border-border-color dark:border-slate-800 px-6 py-3 h-16 shrink-0 z-10 rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center gap-4 text-text-main lg:hidden",children:[e.jsx("button",{className:"text-text-secondary hover:text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"menu"})}),e.jsx("h2",{className:"text-text-main dark:text-white text-lg font-bold leading-tight",children:"Portal Admin"})]}),e.jsx("div",{className:"hidden lg:block"}),e.jsxs("div",{className:"flex flex-1 justify-end gap-6 items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"relative flex size-10 cursor-pointer items-center justify-center overflow-hidden rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-text-main dark:text-white transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-text-secondary dark:text-slate-400",children:"notifications"}),e.jsx("span",{className:"absolute top-2 right-2 size-2 bg-red-500 rounded-full border-2 border-surface-light dark:border-surface-dark"})]}),e.jsx("button",{className:"flex size-10 cursor-pointer items-center justify-center overflow-hidden rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-text-main dark:text-white transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-text-secondary dark:text-slate-400",children:"chat"})})]}),e.jsxs("div",{className:"flex items-center gap-3 pl-6 border-l border-border-color dark:border-slate-800",children:[e.jsxs("div",{className:"flex flex-col items-end hidden md:flex",children:[e.jsx("span",{className:"text-sm font-bold text-text-main dark:text-white",children:"Super Admin"}),e.jsx("span",{className:"text-xs text-text-secondary dark:text-slate-400",children:"Administrator"})]}),e.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 border-2 border-white dark:border-slate-700 shadow-sm cursor-pointer bg-primary flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold",children:"SA"})})]})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-background-light dark:bg-background-dark p-6 lg:px-10 py-8",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto flex flex-col gap-6",children:[e.jsxs("nav",{className:"flex text-sm font-medium text-text-secondary dark:text-slate-400",children:[e.jsx("a",{className:"hover:text-primary transition-colors",href:"/",children:"Beranda"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("a",{className:"hover:text-primary transition-colors",href:"/settings",children:"Pengaturan"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-text-main dark:text-white",children:"Manajemen Pengguna"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-text-main dark:text-white text-3xl font-black tracking-tight",children:"Manajemen Pengguna"}),e.jsx("p",{className:"text-text-secondary dark:text-slate-400 text-base font-normal max-w-2xl",children:"Kelola akses, peran, dan unit kerja pengguna dalam sistem penanganan keluhan."})]}),e.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 bg-primary hover:bg-primary-dark text-white px-5 py-2.5 rounded-lg shadow-sm shadow-blue-200 dark:shadow-none transition-all font-bold text-sm whitespace-nowrap w-fit",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"add"}),"Tambah Pengguna"]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark p-4 rounded-xl border border-border-color dark:border-slate-800 shadow-sm flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-text-secondary dark:text-slate-400",children:"search"})}),e.jsx("input",{className:"block w-full pl-10 pr-3 py-2.5 border border-border-color dark:border-slate-700 rounded-lg leading-5 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white placeholder-text-secondary dark:placeholder-slate-500 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm transition-shadow",placeholder:"Cari nama, email, atau NIP...",type:"text",value:f,onChange:A=>g(A.target.value)})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative min-w-[140px]",children:[e.jsxs("select",{className:"block w-full pl-3 pr-10 py-2.5 text-sm border border-border-color dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary appearance-none cursor-pointer",value:b,onChange:A=>h(A.target.value),children:[e.jsx("option",{value:"",children:"Semua Peran"}),e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"supervisor",children:"Supervisor"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"director",children:"Director"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-text-secondary dark:text-slate-400 text-sm",children:"expand_more"})})]}),e.jsxs("div",{className:"relative min-w-[140px]",children:[e.jsxs("select",{className:"block w-full pl-3 pr-10 py-2.5 text-sm border border-border-color dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary appearance-none cursor-pointer",value:N,onChange:A=>p(A.target.value),children:[e.jsx("option",{value:"",children:"Semua Unit"}),s.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-text-secondary dark:text-slate-400 text-sm",children:"expand_more"})})]}),e.jsxs("div",{className:"relative min-w-[140px]",children:[e.jsxs("select",{className:"block w-full pl-3 pr-10 py-2.5 text-sm border border-border-color dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary appearance-none cursor-pointer",value:r,onChange:A=>k(A.target.value),children:[e.jsx("option",{value:"",children:"Status"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Nonaktif"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-text-secondary dark:text-slate-400 text-sm",children:"expand_more"})})]}),e.jsxs("button",{onClick:()=>{g(""),h(""),p(""),k("")},className:"px-4 py-2.5 text-text-secondary dark:text-slate-400 hover:text-text-main dark:hover:text-white font-medium text-sm border border-transparent hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors flex items-center justify-center gap-2 whitespace-nowrap",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"restart_alt"}),"Reset"]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-border-color dark:border-slate-800 shadow-sm overflow-hidden flex flex-col",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/80 dark:bg-slate-800/80 border-b border-border-color dark:border-slate-700 text-xs uppercase tracking-wider text-text-secondary dark:text-slate-400 font-bold",children:[e.jsx("th",{className:"p-4 w-12 text-center",children:e.jsx("input",{className:"rounded border-gray-300 dark:border-slate-600 text-primary focus:ring-primary/20 size-4 bg-white dark:bg-slate-700",type:"checkbox"})}),e.jsx("th",{className:"p-4 min-w-[250px]",children:"Nama Pengguna"}),e.jsx("th",{className:"p-4 min-w-[200px]",children:"Kontak / NIP"}),e.jsx("th",{className:"p-4",children:"Peran"}),e.jsx("th",{className:"p-4",children:"Unit Kerja"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4 text-right",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-border-color dark:divide-slate-700 text-sm",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-500",children:"Memuat data pengguna..."})}):F.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-500",children:"Tidak ada pengguna ditemukan."})}):F.map(A=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsx("td",{className:"p-4 text-center",children:e.jsx("input",{className:"rounded border-gray-300 dark:border-slate-600 text-primary focus:ring-primary/20 size-4 bg-white dark:bg-slate-700",type:"checkbox"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-primary rounded-full size-10 flex-shrink-0 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:A.full_name.charAt(0)})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-text-main dark:text-white",children:A.full_name}),e.jsx("span",{className:"text-xs text-text-secondary dark:text-slate-400",children:A.created_at?`Bergabung: ${new Date(A.created_at).toLocaleDateString()}`:"Baru bergabung"})]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-text-main dark:text-white",children:A.email}),A.employee_id&&e.jsxs("span",{className:"text-xs text-text-secondary dark:text-slate-400",children:["NIP: ",A.employee_id]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold border ${A.role==="admin"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-800":A.role==="manager"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800":A.role==="supervisor"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-600"}`,children:A.role})}),e.jsx("td",{className:"p-4 text-text-main dark:text-white font-medium",children:A.units?.name||"-"}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`relative inline-flex rounded-full h-2.5 w-2.5 ${A.is_active?"bg-emerald-500":"bg-slate-400"}`}),e.jsx("span",{className:`font-medium text-xs px-2 py-0.5 rounded-md border ${A.is_active?"text-emerald-700 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/30 border-emerald-100 dark:border-emerald-800":"text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 border-slate-200 dark:border-slate-600"}`,children:A.is_active?"Aktif":"Nonaktif"})]})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>D(A),className:"size-8 flex items-center justify-center rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 text-text-secondary dark:text-slate-400 hover:text-primary dark:hover:text-primary transition-colors",title:"Edit",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx("button",{onClick:()=>C(A.id),className:"size-8 flex items-center justify-center rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 text-text-secondary dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Nonaktifkan",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"block"})})]})})]},A.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-border-color dark:border-slate-700 bg-white dark:bg-surface-dark",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary dark:text-slate-400",children:[e.jsx("span",{children:"Menampilkan"}),e.jsxs("span",{className:"font-bold text-text-main dark:text-white",children:[T.length>0?(u-1)*E+1:0,"-",Math.min(u*E,T.length)]}),e.jsx("span",{children:"dari"}),e.jsx("span",{className:"font-bold text-text-main dark:text-white",children:T.length}),e.jsx("span",{children:"pengguna"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>x(A=>Math.max(1,A-1)),disabled:u===1,className:"size-9 flex items-center justify-center rounded-lg border border-transparent text-text-secondary dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-text-main dark:hover:text-white disabled:opacity-50 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_left"})}),Array.from({length:R},(A,O)=>O+1).map(A=>e.jsx("button",{onClick:()=>x(A),className:`size-9 flex items-center justify-center rounded-lg font-medium text-sm transition-colors ${u===A?"bg-primary text-white shadow-sm shadow-blue-200 dark:shadow-none":"border border-transparent text-text-secondary dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-text-main dark:hover:text-white"}`,children:A},A)),e.jsx("button",{onClick:()=>x(A=>Math.min(R,A+1)),disabled:u===R,className:"size-9 flex items-center justify-center rounded-lg border border-transparent text-text-secondary dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-text-main dark:hover:text-white disabled:opacity-50 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_right"})})]})]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Tambah Pengguna Baru"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nama Lengkap"}),e.jsx("input",{type:"text",value:n.full_name,onChange:A=>w({...n,full_name:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Masukkan nama lengkap"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:n.email,onChange:A=>w({...n,email:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Masukkan email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"NIP"}),e.jsx("input",{type:"text",value:n.employee_id,onChange:A=>w({...n,employee_id:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Masukkan NIP (opsional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Telepon"}),e.jsx("input",{type:"text",value:n.phone,onChange:A=>w({...n,phone:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Masukkan nomor telepon"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Unit Kerja"}),e.jsxs("select",{value:n.unit_id,onChange:A=>w({...n,unit_id:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",children:[e.jsx("option",{value:"",children:"Pilih Unit Kerja"}),s.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Peran"}),e.jsxs("select",{value:n.role,onChange:A=>w({...n,role:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"supervisor",children:"Supervisor"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"director",children:"Director"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Password (Opsional)"}),e.jsx("input",{type:"password",value:n.password,onChange:A=>w({...n,password:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Masukkan password untuk akses login"})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>{_(!1),M()},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 font-medium",children:"Batal"}),e.jsx("button",{onClick:K,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark font-medium",children:"Tambah Pengguna"})]})]})}),m&&o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Edit Pengguna"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nama Lengkap"}),e.jsx("input",{type:"text",value:n.full_name,onChange:A=>w({...n,full_name:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:n.email,onChange:A=>w({...n,email:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"NIP"}),e.jsx("input",{type:"text",value:n.employee_id,onChange:A=>w({...n,employee_id:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Telepon"}),e.jsx("input",{type:"text",value:n.phone,onChange:A=>w({...n,phone:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Unit Kerja"}),e.jsxs("select",{value:n.unit_id,onChange:A=>w({...n,unit_id:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",children:[e.jsx("option",{value:"",children:"Pilih Unit Kerja"}),s.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Peran"}),e.jsxs("select",{value:n.role,onChange:A=>w({...n,role:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"supervisor",children:"Supervisor"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"director",children:"Director"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Password Baru (Opsional)"}),e.jsx("input",{type:"password",value:n.password,onChange:A=>w({...n,password:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Kosongkan jika tidak ingin mengubah password"})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>{c(!1),i(null),M()},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 font-medium",children:"Batal"}),e.jsx("button",{onClick:L,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark font-medium",children:"Simpan Perubahan"})]})]})})]})},Sa=()=>e.jsx("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-white transition-colors duration-200",children:e.jsx("div",{className:"layout-container flex h-full grow flex-col",children:e.jsx("div",{className:"px-4 md:px-10 lg:px-40 flex flex-1 justify-center py-5",children:e.jsxs("div",{className:"layout-content-container flex flex-col max-w-[960px] flex-1 w-full",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 px-4 py-2",children:[e.jsx("a",{className:"text-slate-500 hover:text-primary dark:text-slate-400 dark:hover:text-primary text-sm font-medium leading-normal transition-colors",href:"#",children:"Beranda"}),e.jsx("span",{className:"text-slate-400 dark:text-slate-600 text-sm font-medium leading-normal",children:"/"}),e.jsx("span",{className:"text-slate-900 dark:text-slate-100 text-sm font-medium leading-normal",children:"Profil Pengguna"})]}),e.jsx("div",{className:"flex flex-wrap justify-between gap-3 px-4 pt-4 pb-2",children:e.jsxs("div",{className:"flex min-w-72 flex-col gap-2",children:[e.jsx("h1",{className:"text-slate-900 dark:text-white text-3xl md:text-4xl font-bold leading-tight tracking-[-0.033em]",children:"Pengaturan Profil"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base font-normal leading-normal",children:"Kelola informasi pribadi, unit kerja, dan preferensi akun Anda."})]})}),e.jsx("div",{className:"mx-4 mt-6 mb-4 p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center md:items-start",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full h-24 w-24 md:h-32 md:w-32 ring-4 ring-slate-50 dark:ring-slate-700","data-alt":"Portrait of a professional man in a suit",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuDHhFErpqL1patZIsAAfh3uODm8dFjHn_UT_o8SlUEArxnC9vPeHdgGj4rjgK5uYVbk0BYpKwRCthLPHfBRRZ-E8jctMoTUv6Wg1peS63XQFaHTx3PEWMnkQkDq0x3MFzUePX204ETznHCIWwIIGgDudNzKhiMK8eY2sRkjOmMR2gM71LmbG8I7eE1J1FjrTNbcErMsGNvVaw1N6SOqcL2pF3C-VA7ZEZU9lfOJRzOKgZgiPFbJfg1KnZw7UiWD_9ZbKU1CFAoB8rdG")'}}),e.jsx("button",{"aria-label":"Change Photo",className:"absolute bottom-0 right-0 bg-primary hover:bg-blue-600 text-white p-2 rounded-full shadow-lg transition-colors flex items-center justify-center border-2 border-white dark:border-slate-800",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"photo_camera"})})]}),e.jsxs("div",{className:"flex flex-col justify-center text-center md:text-left flex-1",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-4 mb-1",children:[e.jsx("h2",{className:"text-slate-900 dark:text-white text-2xl font-bold leading-tight",children:"Budi Santoso, S.Kom"}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:"Akun Aktif"})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-300 text-base font-medium",children:"Kepala Unit Radiologi"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 mt-3 text-sm text-slate-500 dark:text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"badge"}),e.jsx("span",{children:"NIP: 19800101 200501 1 003"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"apartment"}),e.jsx("span",{children:"RSUD Kota Harapan"})]})]})]}),e.jsx("div",{className:"flex items-center h-full",children:e.jsxs("button",{className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"logout"}),"Keluar"]})})]})}),e.jsx("div",{className:"px-4 mt-2",children:e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsxs("nav",{"aria-label":"Tabs",className:"-mb-px flex space-x-8",children:[e.jsxs("a",{className:"border-primary text-primary whitespace-nowrap py-4 px-1 border-b-[3px] font-semibold text-sm flex items-center gap-2",href:"#",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"person"}),"Data Diri"]}),e.jsxs("a",{className:"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300 hover:border-slate-300 whitespace-nowrap py-4 px-1 border-b-[3px] font-medium text-sm flex items-center gap-2 transition-colors",href:"#",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"lock"}),"Keamanan"]}),e.jsxs("a",{className:"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300 hover:border-slate-300 whitespace-nowrap py-4 px-1 border-b-[3px] font-medium text-sm flex items-center gap-2 transition-colors",href:"#",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"notifications"}),"Preferensi"]})]})})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-5 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold leading-6 text-slate-900 dark:text-white",children:"Informasi Dasar"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Perbarui detail foto dan informasi pribadi Anda di sini."})]})}),e.jsx("div",{className:"p-6 space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold leading-6 text-slate-900 dark:text-white mb-2",htmlFor:"full-name",children:"Nama Lengkap"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"block w-full rounded-lg border-0 py-2.5 px-3 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-primary dark:bg-slate-900 dark:ring-slate-700 dark:text-white sm:text-sm sm:leading-6",id:"full-name",name:"full-name",type:"text",defaultValue:"Budi Santoso"}),e.jsx("span",{className:"material-symbols-outlined absolute right-3 top-2.5 text-slate-400 text-[20px]",children:"edit"})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold leading-6 text-slate-900 dark:text-white mb-2",htmlFor:"nip",children:"Nomor Induk Pegawai (NIP)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"block w-full rounded-lg border-0 py-2.5 px-3 text-slate-500 shadow-sm ring-1 ring-inset ring-slate-200 bg-slate-50 dark:bg-slate-800/50 dark:ring-slate-700 dark:text-slate-400 sm:text-sm sm:leading-6 cursor-not-allowed",disabled:!0,id:"nip",name:"nip",type:"text",defaultValue:"19800101 200501 1 003"}),e.jsx("span",{className:"material-symbols-outlined absolute right-3 top-2.5 text-slate-400 text-[20px]",children:"lock"})]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-500",children:"Hubungi admin untuk mengubah NIP."})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold leading-6 text-slate-900 dark:text-white mb-2",htmlFor:"email",children:"Alamat Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-2.5 text-slate-400 text-[20px]",children:"mail"}),e.jsx("input",{className:"block w-full rounded-lg border-0 py-2.5 pl-10 pr-3 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-primary dark:bg-slate-900 dark:ring-slate-700 dark:text-white sm:text-sm sm:leading-6",id:"email",name:"email",type:"email",defaultValue:"budi.santoso@rsud.go.id"})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-semibold leading-6 text-slate-900 dark:text-white mb-2",htmlFor:"phone",children:"Nomor Telepon / WhatsApp"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-2.5 text-slate-400 text-[20px]",children:"call"}),e.jsx("input",{className:"block w-full rounded-lg border-0 py-2.5 pl-10 pr-3 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-primary dark:bg-slate-900 dark:ring-slate-700 dark:text-white sm:text-sm sm:leading-6",id:"phone",name:"phone",type:"tel",defaultValue:"+62 812 3456 7890"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold leading-6 text-slate-900 dark:text-white mb-2",htmlFor:"unit",children:"Unit Kerja"}),e.jsxs("select",{className:"block w-full rounded-lg border-0 py-2.5 pl-3 pr-10 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 focus:ring-2 focus:ring-inset focus:ring-primary dark:bg-slate-900 dark:ring-slate-700 dark:text-white sm:text-sm sm:leading-6",id:"unit",name:"unit",children:[e.jsx("option",{children:"Unit Radiologi"}),e.jsx("option",{children:"Unit Gawat Darurat (IGD)"}),e.jsx("option",{children:"Administrasi & Keuangan"}),e.jsx("option",{children:"Poliklinik Umum"}),e.jsx("option",{children:"Instalasi Farmasi"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold leading-6 text-slate-900 dark:text-white mb-2",htmlFor:"about",children:"Catatan Tambahan (Opsional)"}),e.jsx("textarea",{className:"block w-full rounded-lg border-0 py-2.5 px-3 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-primary dark:bg-slate-900 dark:ring-slate-700 dark:text-white sm:text-sm sm:leading-6",id:"about",name:"about",placeholder:"Tuliskan catatan singkat tentang peran Anda...",rows:3})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex items-center justify-end gap-x-4",children:[e.jsx("button",{className:"text-sm font-semibold leading-6 text-slate-900 dark:text-white hover:underline",type:"button",children:"Batal"}),e.jsxs("button",{className:"rounded-lg bg-primary px-5 py-2.5 text-sm font-bold text-white shadow-sm hover:bg-blue-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary transition-colors flex items-center gap-2",type:"submit",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"save"}),"Simpan Perubahan"]})]})]}),e.jsx("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden opacity-60 hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"px-6 py-5 flex justify-between items-center cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-full text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"lock_reset"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold leading-6 text-slate-900 dark:text-white",children:"Keamanan Akun"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Ubah kata sandi dan pengaturan autentikasi 2 faktor."})]})]}),e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"chevron_right"})]})})]})]})})})}),Ca=[{key:"tickets.read",label:"Melihat Tiket",category:"Tiket"},{key:"tickets.create",label:"Membuat Tiket",category:"Tiket"},{key:"tickets.update",label:"Mengupdate Tiket",category:"Tiket"},{key:"tickets.delete",label:"Menghapus Tiket",category:"Tiket"},{key:"tickets.assign",label:"Assign Tiket",category:"Tiket"},{key:"tickets.escalate",label:"Eskalasi Tiket",category:"Tiket"},{key:"reports.read",label:"Melihat Laporan",category:"Laporan"},{key:"reports.export",label:"Export Laporan",category:"Laporan"},{key:"users.read",label:"Melihat Pengguna",category:"Pengguna"},{key:"users.create",label:"Membuat Pengguna",category:"Pengguna"},{key:"users.update",label:"Mengupdate Pengguna",category:"Pengguna"},{key:"users.delete",label:"Menghapus Pengguna",category:"Pengguna"},{key:"settings.read",label:"Melihat Pengaturan",category:"Pengaturan"},{key:"settings.update",label:"Mengubah Pengaturan",category:"Pengaturan"},{key:"master_data.read",label:"Melihat Master Data",category:"Master Data"},{key:"master_data.create",label:"Membuat Master Data",category:"Master Data"},{key:"master_data.update",label:"Mengupdate Master Data",category:"Master Data"},{key:"master_data.delete",label:"Menghapus Master Data",category:"Master Data"}],Ta=({isOpen:a,onClose:t,onSave:s,role:d,mode:j})=>{const[v,f]=l.useState({name:"",code:"",description:"",permissions:{},is_active:!0}),[g,b]=l.useState([]),[h,N]=l.useState(!1);l.useEffect(()=>{if(d&&j==="edit")if(f({name:d.name,code:d.code,description:d.description,permissions:d.permissions||{},is_system_role:d.is_system_role,is_active:d.is_active??!0}),d.permissions?.all)N(!0),b([]);else{N(!1);const y=[];Object.keys(d.permissions||{}).forEach(_=>{d.permissions[_]===!0&&y.push(_)}),b(y)}else f({name:"",code:"",description:"",permissions:{},is_active:!0}),b([]),N(!1)},[d,j,a]);const p=y=>{const{name:_,value:m}=y.target;f(c=>({...c,[_]:m}))},r=y=>{h||b(_=>_.includes(y)?_.filter(m=>m!==y):[..._,y])},k=()=>{N(!h),h||b([])},u=y=>{y.preventDefault();let _={};h?_={all:!0}:g.forEach(c=>{_={..._,[c]:!0}});const m={...v,permissions:_,code:v.code.toUpperCase()};s(m)},x=Ca.reduce((y,_)=>(y[_.category]||(y[_.category]=[]),y[_.category].push(_),y),{});return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:j==="create"?"Tambah Peran Baru":"Edit Peran"}),e.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nama Peran *"}),e.jsx("input",{type:"text",name:"name",value:v.name,onChange:p,required:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-slate-700 dark:text-white",placeholder:"Masukkan nama peran"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Kode Peran *"}),e.jsx("input",{type:"text",name:"code",value:v.code,onChange:p,required:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-slate-700 dark:text-white",placeholder:"Masukkan kode peran (contoh: STAFF)",style:{textTransform:"uppercase"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Deskripsi"}),e.jsx("textarea",{name:"description",value:v.description,onChange:p,rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-slate-700 dark:text-white",placeholder:"Masukkan deskripsi peran"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-4",children:"Hak Akses"}),e.jsx("div",{className:"mb-4 p-4 bg-slate-50 dark:bg-slate-700 rounded-lg",children:e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:k,className:"w-4 h-4 text-primary border-slate-300 rounded focus:ring-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"Semua Hak Akses"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Memberikan akses penuh ke semua fitur sistem"})]})]})}),!h&&e.jsx("div",{className:"space-y-4",children:Object.entries(x).map(([y,_])=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-slate-900 dark:text-white mb-3",children:y}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:_.map(m=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g.includes(m.key),onChange:()=>r(m.key),className:"w-4 h-4 text-primary border-slate-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:m.label})]},m.key))})]},y))})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-slate-200 dark:border-slate-600",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:j==="create"?"Tambah Peran":"Simpan Perubahan"})]})]})]})}):null},de=()=>{const[a,t]=l.useState([]),[s,d]=l.useState([]),[j,v]=l.useState(!0),[f,g]=l.useState(null),[b,h]=l.useState(!1),[N,p]=l.useState(null),[r,k]=l.useState("create"),u=async()=>{try{v(!0),g(null);const n=await S.get("/roles");if(n.data.success)t(n.data.data||[]);else throw new Error(n.data.message||"Failed to fetch roles")}catch(n){console.error("Error fetching roles:",n),g("Gagal memuat data peran dari server"),t([{id:"aa5687ff-8ed3-40d0-bc83-db052b72e481",name:"Administrator",code:"ADMIN",description:"Administrator sistem dengan akses penuh",permissions:{all:!0},is_system_role:!0,is_active:!0,created_at:"2025-12-30T23:03:39.527264Z",updated_at:"2025-12-30T23:03:39.527264Z"},{id:"38eb526f-e29c-424e-a613-2bc16bb2ec7f",name:"Supervisor",code:"SUPERVISOR",description:"Supervisor unit dengan akses manajemen",permissions:{manage_unit:!0,view_reports:!0},is_system_role:!1,is_active:!0,created_at:"2025-12-30T23:03:39.527264Z",updated_at:"2025-12-30T23:03:39.527264Z"},{id:"75d38d48-5aaf-4014-b910-debf9f34d1fd",name:"Staff",code:"STAFF",description:"Staff operasional",permissions:{create_ticket:!0,respond_ticket:!0},is_system_role:!1,is_active:!0,created_at:"2025-12-30T23:03:39.527264Z",updated_at:"2025-12-30T23:03:39.527264Z"},{id:"ddf6228b-2c10-4ff6-b980-c73fbe765744",name:"Manager",code:"MANAGER",description:"Manager dengan akses luas",permissions:{escalate:!0,manage_unit:!0,view_reports:!0},is_system_role:!1,is_active:!0,created_at:"2025-12-30T23:03:39.527264Z",updated_at:"2025-12-30T23:03:39.527264Z"}])}finally{v(!1)}};l.useEffect(()=>{u(),d([{id:"1",name:"tickets.read",description:"Melihat tiket",category:"Tiket"},{id:"2",name:"tickets.write",description:"Membuat tiket",category:"Tiket"},{id:"3",name:"tickets.update",description:"Mengupdate tiket",category:"Tiket"},{id:"4",name:"tickets.delete",description:"Menghapus tiket",category:"Tiket"},{id:"5",name:"reports.read",description:"Melihat laporan",category:"Laporan"},{id:"6",name:"users.manage",description:"Mengelola pengguna",category:"Pengguna"},{id:"7",name:"settings.manage",description:"Mengelola pengaturan",category:"Pengaturan"}])},[]);const x=()=>{p(null),k("create"),h(!0)},y=n=>{if(n.is_system_role){alert("Peran sistem tidak dapat diedit");return}p(n),k("edit"),h(!0)},_=async(n,w)=>{try{const E=await S.get(`/roles/${n}/users`);if(E.data.success){const P=E.data.data||[];if(P.length===0)alert(`Tidak ada pengguna yang menggunakan peran "${w}"`);else{const K=P.map(L=>`- ${L.full_name} (${L.email})`).join(`
`);alert(`Pengguna dengan peran "${w}" (${P.length} orang):

${K}`)}}else throw new Error(E.data.message||"Failed to fetch users")}catch(E){console.error("Error fetching users by role:",E),alert("Gagal memuat data pengguna")}},m=async n=>{try{let w;if(r==="create"?w=await S.post("/roles",n):w=await S.put(`/roles/${N?.id}`,n),w.data.success)await u(),alert(w.data.message||`Peran berhasil ${r==="create"?"dibuat":"diupdate"}`);else throw new Error(w.data.message||`Failed to ${r} role`)}catch(w){throw console.error(`Error ${r} role:`,w),alert(w instanceof Error?w.message:`Gagal ${r==="create"?"membuat":"mengupdate"} peran`),w}},c=async n=>{const w=a.find(E=>E.id===n);if(w){if(w.is_system_role){alert("Peran sistem tidak dapat dihapus");return}if(window.confirm(`Apakah Anda yakin ingin menghapus peran "${w.name}"?`))try{const E=await S.delete(`/roles/${n}`);if(E.data.success)t(a.filter(P=>P.id!==n)),alert(E.data.message||"Peran berhasil dihapus");else throw new Error(E.data.message||"Failed to delete role")}catch(E){console.error("Error deleting role:",E),alert(E instanceof Error?E.message:"Gagal menghapus peran")}}},o=async n=>{try{const w=a.find(P=>P.id===n);if(!w)return;const E=await S.put(`/roles/${n}`,{is_active:!w.is_active});if(E.data.success)t(a.map(P=>P.id===n?{...P,is_active:!P.is_active}:P));else throw new Error(E.data.message||"Failed to update role status")}catch(w){console.error("Error updating role status:",w),alert(w instanceof Error?w.message:"Gagal mengubah status peran")}},i=n=>{if(!n||typeof n!="object")return e.jsx("span",{className:"text-xs text-slate-500",children:"Tidak ada akses"});if(n.all)return e.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 rounded-full",children:"Semua Akses"});const w=Object.keys(n),E=w.slice(0,2);return e.jsxs("div",{className:"flex flex-wrap gap-1",children:[E.map((P,K)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 rounded-full",children:P},K)),w.length>2&&e.jsxs("span",{className:"px-2 py-1 text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded-full",children:["+",w.length-2," lainnya"]})]})};return j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[f&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400",children:"error"}),e.jsx("p",{className:"text-red-800 dark:text-red-200",children:f})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{children:e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Tambah Peran"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400",children:"group"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Peran"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:a.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Peran Aktif"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:a.filter(n=>n.is_active).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600 dark:text-purple-400",children:"security"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Hak Akses"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:s.length})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Daftar Peran"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nama Peran"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Deskripsi"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Hak Akses"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(n=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-sm",children:"badge"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:n.name}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:n.code})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 max-w-xs truncate",children:n.description})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:i(n.permissions)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>o(n.id),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.is_active?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"}`,children:n.is_active?"Aktif":"Nonaktif"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(n.id,n.name),className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300",title:"Lihat pengguna dengan peran ini",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"group"})}),e.jsx("button",{onClick:()=>y(n),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.is_system_role,title:n.is_system_role?"Peran sistem tidak dapat diedit":"Edit peran",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),e.jsx("button",{onClick:()=>c(n.id),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.is_system_role,title:n.is_system_role?"Peran sistem tidak dapat dihapus":"Hapus peran",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})})]},n.id))})]})})]}),e.jsx(Ta,{isOpen:b,onClose:()=>h(!1),onSave:m,role:N,mode:r})]})},be=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(""),[f,g]=l.useState(!1),[b,h]=l.useState(null),[N,p]=l.useState({name:"",subject:"",content:"",category:"AUTO_REPLY",variables:[],is_active:!0});l.useEffect(()=>{r()},[]);const r=async()=>{try{d(!0);const c=await S.get("/response-templates");if(c.data.success)t(c.data.data);else throw new Error(c.data.message||"Failed to fetch templates")}catch(c){console.error("Error fetching templates:",c),t([{id:"2529dc85-41e4-4426-8ebb-d5a823f18656",name:"Konfirmasi Penerimaan",subject:"Tiket Anda Telah Diterima",content:"Terima kasih telah menghubungi kami. Tiket Anda dengan nomor {{ticket_number}} telah diterima dan akan segera ditindaklanjuti.",category:"AUTO_REPLY",variables:["ticket_number","submitter_name"],is_active:!0,created_by:null,created_at:"2025-12-30T23:03:39.527264Z",updated_at:"2025-12-30T23:03:39.527264Z"},{id:"7b6067cb-d8b5-4f88-beee-5c5951ccf5c2",name:"Permintaan Informasi Tambahan",subject:"Informasi Tambahan Diperlukan",content:"Untuk menindaklanjuti tiket {{ticket_number}}, kami memerlukan informasi tambahan dari Anda.",category:"FOLLOW_UP",variables:["ticket_number","additional_info"],is_active:!0,created_by:null,created_at:"2025-12-30T23:03:39.527264Z",updated_at:"2025-12-30T23:03:39.527264Z"},{id:"edd83672-5ee8-4de2-adec-0da9f9ce344b",name:"Penyelesaian Tiket",subject:"Tiket Anda Telah Diselesaikan",content:"Tiket {{ticket_number}} telah diselesaikan. Terima kasih atas kesabaran Anda.",category:"RESOLUTION",variables:["ticket_number","resolution_details"],is_active:!0,created_by:null,created_at:"2025-12-30T23:03:39.527264Z",updated_at:"2025-12-30T23:03:39.527264Z"}])}finally{d(!1)}},k=a.filter(c=>c.name.toLowerCase().includes(j.toLowerCase())||c.subject.toLowerCase().includes(j.toLowerCase())),u=()=>{h(null),p({name:"",subject:"",content:"",category:"AUTO_REPLY",variables:[],is_active:!0}),g(!0)},x=c=>{h(c),p({name:c.name,subject:c.subject,content:c.content,category:c.category,variables:c.variables,is_active:c.is_active}),g(!0)},y=async c=>{c.preventDefault();try{b?(await S.put(`/response-templates/${b.id}`,N)).data.success&&(await r(),g(!1)):(await S.post("/response-templates",N)).data.success&&(await r(),g(!1))}catch(o){console.error("Error saving template:",o)}},_=async c=>{if(window.confirm("Apakah Anda yakin ingin menghapus template ini?"))try{(await S.delete(`/response-templates/${c}`)).data.success&&await r()}catch(o){console.error("Error deleting template:",o)}},m=c=>{const o=c.split(",").map(i=>i.trim()).filter(i=>i);p({...N,variables:o})};return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{children:e.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Tambah Template"]})})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",children:"search"}),e.jsx("input",{type:"text",placeholder:"Cari template...",value:j,onChange:c=>v(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:k.map(c=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:c.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c.is_active?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"}`,children:c.is_active?"Aktif":"Nonaktif"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600 dark:text-slate-400 mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-xs",children:"category"}),c.category]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-xs",children:"code"}),c.variables.length," variabel"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x(c),className:"p-2 text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),e.jsx("button",{onClick:()=>_(c.id),className:"p-2 text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Subject"}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mt-1 font-medium",children:c.subject})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Content Preview"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1 bg-slate-50 dark:bg-slate-900/50 rounded-lg p-3 max-h-32 overflow-y-auto",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-xs leading-relaxed",children:c.content.length>200?c.content.substring(0,200)+"...":c.content})})]})]})]}),e.jsx("div",{className:"px-6 py-3 bg-slate-50 dark:bg-slate-900/50 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{children:["Dibuat: ",new Date(c.created_at).toLocaleDateString("id-ID")]}),e.jsxs("span",{children:["Diupdate: ",new Date(c.updated_at).toLocaleDateString("id-ID")]})]})})]},c.id))}),k.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-2xl",children:"description"})}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:"Tidak ada template ditemukan"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Coba ubah filter atau buat template baru"})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:b?"Edit Template":"Tambah Template Baru"}),e.jsx("button",{onClick:()=>g(!1),className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nama Template"}),e.jsx("input",{type:"text",value:N.name,onChange:c=>p({...N,name:c.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Kategori"}),e.jsxs("select",{value:N.category,onChange:c=>p({...N,category:c.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"AUTO_REPLY",children:"Auto Reply"}),e.jsx("option",{value:"FOLLOW_UP",children:"Follow Up"}),e.jsx("option",{value:"RESOLUTION",children:"Resolution"}),e.jsx("option",{value:"ESCALATION",children:"Escalation"}),e.jsx("option",{value:"SURVEY",children:"Survey"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Subject"}),e.jsx("input",{type:"text",value:N.subject,onChange:c=>p({...N,subject:c.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Content"}),e.jsx("textarea",{value:N.content,onChange:c=>p({...N,content:c.target.value}),rows:6,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"Gunakan {{variable_name}} untuk variabel dinamis",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Variabel (pisahkan dengan koma)"}),e.jsx("input",{type:"text",value:N.variables.join(", "),onChange:c=>m(c.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-white",placeholder:"ticket_number, submitter_name, resolution_details"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Contoh: ticket_number, submitter_name, resolution_details"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:N.is_active,onChange:c=>p({...N,is_active:c.target.checked}),className:"h-4 w-4 text-primary focus:ring-primary border-slate-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-slate-700 dark:text-slate-300",children:"Template aktif"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:b?"Update":"Simpan"})]})]})]})})})]})},fe=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(null),[j,v]=l.useState(null),[f,g]=l.useState(!0),[b,h]=l.useState(75);l.useEffect(()=>{(async()=>{try{g(!0);const i=await fetch("/api/master-data/ai-trust-settings");if(i.ok){const n=await i.json();if(n.success&&n.data.length>0){const w=n.data[0];d(w),h(Number(w.confidence_threshold))}}}catch(i){console.error("Error fetching AI settings:",i);const n={id:"c54d3993-9f4c-4744-8580-28dfddb57669",setting_name:"default",confidence_threshold:85,auto_routing_enabled:!0,auto_classification_enabled:!0,manual_review_required:!1,description:"Pengaturan default untuk klasifikasi AI",is_active:!0,updated_by:null,created_at:"2025-12-30T22:58:12.471073Z",updated_at:"2025-12-30T22:58:12.471073Z"};d(n),h(n.confidence_threshold)}const c=[{id:"1",name:"Klasifikasi Prioritas Tinggi",description:"Aturan untuk mengklasifikasikan keluhan dengan prioritas tinggi",category:"classification",confidenceThreshold:85,isActive:!0,autoApprove:!1,requireHumanReview:!0,createdAt:"2024-01-01"},{id:"2",name:"Deteksi Sentimen Negatif",description:"Mendeteksi keluhan dengan sentimen sangat negatif",category:"sentiment",confidenceThreshold:80,isActive:!0,autoApprove:!0,requireHumanReview:!1,createdAt:"2024-01-01"},{id:"3",name:"Kategorisasi Otomatis",description:"Mengkategorikan keluhan berdasarkan konten",category:"categorization",confidenceThreshold:70,isActive:!0,autoApprove:!0,requireHumanReview:!1,createdAt:"2024-01-01"},{id:"4",name:"Eskalasi Otomatis",description:"Menentukan keluhan yang perlu dieskalasi",category:"escalation",confidenceThreshold:90,isActive:!1,autoApprove:!1,requireHumanReview:!0,createdAt:"2024-01-01"}],o={totalPredictions:1247,accuracyRate:87.5,falsePositives:23,falseNegatives:18,averageConfidence:82.3};t(c),v(o),g(!1)})()},[]);const N=m=>{window.confirm("Apakah Anda yakin ingin menghapus aturan ini?")&&t(a.filter(c=>c.id!==m))},p=m=>{t(a.map(c=>c.id===m?{...c,isActive:!c.isActive}:c))},r=m=>{t(a.map(c=>c.id===m?{...c,autoApprove:!c.autoApprove}:c))},k=m=>{console.log("Edit rule:",m)},u=async m=>{try{s&&(await fetch(`/api/master-data/ai-trust-settings/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({confidence_threshold:m})})).ok&&(h(m),d({...s,confidence_threshold:m,updated_at:new Date().toISOString()}))}catch(c){console.error("Error updating threshold:",c)}},x=(m,c)=>{t(a.map(o=>o.id===m?{...o,confidenceThreshold:c}:o))},y=m=>({classification:"Klasifikasi",sentiment:"Analisis Sentimen",categorization:"Kategorisasi",escalation:"Eskalasi"})[m]||m,_=m=>({classification:"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",sentiment:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300",categorization:"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300",escalation:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"})[m]||"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-300";return f?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Pengaturan AI Trust"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Kelola tingkat kepercayaan dan aturan AI"})]}),e.jsxs("button",{onClick:()=>{console.log("Tambah aturan baru")},className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Tambah Aturan"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Pengaturan Global"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Threshold Kepercayaan Global"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"0",max:"100",value:b,onChange:m=>{const c=Number(m.target.value);h(c)},onMouseUp:m=>{const c=Number(m.target.value);u(c)},className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white w-12",children:[b,"%"]})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Minimum tingkat kepercayaan untuk semua prediksi AI"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"Mode Pembelajaran"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"AI terus belajar dari feedback pengguna"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/30 rounded-full peer dark:bg-slate-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-slate-600 peer-checked:bg-primary"})]})]})]})]}),j&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400",children:"psychology"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Prediksi"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:j.totalPredictions})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Akurasi"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[j.accuracyRate,"%"]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-orange-600 dark:text-orange-400",children:"warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"False Positive"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:j.falsePositives})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400",children:"error"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"False Negative"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:j.falseNegatives})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600 dark:text-purple-400",children:"trending_up"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Rata-rata Confidence"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[j.averageConfidence,"%"]})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Aturan Kepercayaan AI"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Aturan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Kategori"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Threshold"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Auto Approve"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(m=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:m.name}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:m.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_(m.category)}`,children:y(m.category)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"range",min:"0",max:"100",value:m.confidenceThreshold,onChange:c=>x(m.id,Number(c.target.value)),className:"w-20"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white w-8",children:[m.confidenceThreshold,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:m.autoApprove,onChange:()=>r(m.id)}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/30 rounded-full peer dark:bg-slate-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-slate-600 peer-checked:bg-primary"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>p(m.id),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.isActive?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"}`,children:m.isActive?"Aktif":"Nonaktif"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>k(m),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),e.jsx("button",{onClick:()=>N(m.id),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})})]},m.id))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Panduan Tingkat Kepercayaan"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"0-25%"})]}),e.jsx("p",{className:"text-xs text-red-700 dark:text-red-400",children:"Kepercayaan Rendah - Selalu butuh review manual"})]}),e.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-orange-800 dark:text-orange-300",children:"26-50%"})]}),e.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-400",children:"Kepercayaan Sedang - Perlu verifikasi tambahan"})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"51-75%"})]}),e.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-400",children:"Kepercayaan Baik - Dapat disetujui otomatis"})]}),e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:"76-100%"})]}),e.jsx("p",{className:"text-xs text-green-700 dark:text-green-400",children:"Kepercayaan Tinggi - Otomatis disetujui dan dijalankan"})]})]})]})]})},V=(a,t="success")=>{const s=document.createElement("div");s.className=`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${t==="success"?"bg-green-500":"bg-red-500"} text-white`,s.textContent=a,document.body.appendChild(s),setTimeout(()=>{document.body.removeChild(s)},3e3)},Aa=()=>{const[a,t]=l.useState({app_name:"",app_logo:"",app_footer:"",institution_name:"",institution_address:"",institution_logo:"",manager_name:"",manager_position:"",job_title:"",logo_url:"",description:"",address:"",contact_email:"",contact_phone:"",website:""}),[s,d]=l.useState(!0),[j,v]=l.useState(!1);l.useEffect(()=>{f()},[]);const f=async()=>{try{const p=localStorage.getItem("token"),r=await fetch("/api/app-settings",{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(r.ok){const k=await r.json(),u={};k.forEach(x=>{u[x.setting_key]=x.setting_value}),t({app_name:u.app_name||"Sistem Pengaduan Masyarakat Terpadu",app_logo:u.app_logo||"",app_footer:u.app_footer||"Copyright ¬© 2025 Sistem Pengaduan Masyarakat Terpadu. Semua hak dilindungi.",institution_name:u.institution_name||"RSUD Sehat Sentosa",institution_address:u.institution_address||u.address||"",institution_logo:u.institution_logo||u.logo_url||"",manager_name:u.manager_name||"",manager_position:u.manager_position||"",job_title:u.job_title||"",logo_url:u.logo_url||u.institution_logo||"",description:u.description||"",address:u.address||"",contact_email:u.contact_email||"",contact_phone:u.contact_phone||"",website:u.website||""})}}catch(p){console.error("Error fetching settings:",p),V("Gagal memuat pengaturan aplikasi","error")}finally{d(!1)}},g=async p=>{p.preventDefault(),v(!0);try{const r=localStorage.getItem("token");if((await fetch("/api/app-settings",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)V("Pengaturan aplikasi berhasil disimpan");else throw new Error("Failed to save settings")}catch(r){console.error("Error saving settings:",r),V("Gagal menyimpan pengaturan aplikasi","error")}finally{v(!1)}},b=(p,r)=>{t(k=>({...k,[p]:r}))},h=async(p,r="logo_url")=>{const k=p.target.files?.[0];if(!k)return;if(k.size>2*1024*1024){V("Ukuran file maksimal 2MB","error");return}if(!["image/jpeg","image/png","image/svg+xml"].includes(k.type)){V("Format file harus JPG, PNG, atau SVG","error");return}const u=new FileReader;u.onload=x=>{const y=x.target?.result;b(r,y),V(`${r==="app_logo"?"Logo aplikasi":"Logo instansi"} berhasil diunggah`)},u.readAsDataURL(k)},N=(p="logo_url")=>{b(p,""),V(`${p==="app_logo"?"Logo aplikasi":"Logo instansi"} berhasil dihapus`)};return s?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):e.jsxs("div",{className:"max-w-[1000px] mx-auto w-full px-6 py-8 md:px-10 md:py-10",children:[e.jsx("nav",{"aria-label":"Breadcrumb",className:"flex mb-6",children:e.jsxs("ol",{className:"flex items-center gap-2",children:[e.jsx("li",{children:e.jsx("a",{className:"text-slate-500 hover:text-primary dark:text-slate-400 dark:hover:text-primary transition-colors text-sm font-medium",href:"/dashboard",children:"Dashboard"})}),e.jsx("li",{className:"text-slate-400 dark:text-slate-600",children:"/"}),e.jsx("li",{children:e.jsx("a",{className:"text-slate-500 hover:text-primary dark:text-slate-400 dark:hover:text-primary transition-colors text-sm font-medium",href:"/settings",children:"Pengaturan"})}),e.jsx("li",{className:"text-slate-400 dark:text-slate-600",children:"/"}),e.jsx("li",{"aria-current":"page",className:"text-slate-900 dark:text-white text-sm font-semibold",children:"Aplikasi"})]})}),e.jsxs("div",{className:"flex flex-col gap-2 mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight text-slate-900 dark:text-white",children:"Pengaturan Aplikasi"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base max-w-2xl",children:"Kelola identitas aplikasi utama dan detail organisasi. Informasi ini akan digunakan oleh sistem AI untuk header laporan dan respons otomatis."})]}),e.jsxs("form",{onSubmit:g,className:"flex flex-col gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-[#1e2936] rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:"Logo Aplikasi"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Logo ini akan ditampilkan pada header aplikasi dan branding utama."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-6",children:[e.jsx("div",{className:"relative group shrink-0",children:e.jsx("div",{className:"w-32 h-32 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 flex items-center justify-center overflow-hidden relative",children:a.app_logo?e.jsx("img",{src:a.app_logo,alt:"Logo Aplikasi",className:"w-full h-full object-contain p-2"}):e.jsxs("div",{className:"text-slate-400 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"apps"}),e.jsx("span",{className:"text-xs",children:"Belum ada logo"})]})})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:"inline-flex items-center justify-center px-4 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors cursor-pointer",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"upload"}),"Unggah Logo Aplikasi",e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/svg+xml",onChange:p=>h(p,"app_logo"),className:"hidden"})]}),a.app_logo&&e.jsx("button",{type:"button",onClick:()=>N("app_logo"),className:"inline-flex items-center justify-center px-4 py-2 bg-transparent border border-transparent rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none transition-colors",children:"Hapus"})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Format file yang didukung: JPG, PNG, atau SVG. Ukuran maksimal 2MB. Dimensi yang disarankan 256x256px."})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-[#1e2936] rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:"Logo Instansi"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Logo ini akan ditampilkan pada halaman login dan kop surat laporan."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-6",children:[e.jsx("div",{className:"relative group shrink-0",children:e.jsx("div",{className:"w-32 h-32 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 flex items-center justify-center overflow-hidden relative",children:a.logo_url?e.jsx("img",{src:a.logo_url,alt:"Logo Instansi",className:"w-full h-full object-contain p-2"}):e.jsxs("div",{className:"text-slate-400 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"image"}),e.jsx("span",{className:"text-xs",children:"Belum ada logo"})]})})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:"inline-flex items-center justify-center px-4 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors cursor-pointer",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"upload"}),"Unggah Logo Instansi",e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/svg+xml",onChange:p=>h(p,"logo_url"),className:"hidden"})]}),a.logo_url&&e.jsx("button",{type:"button",onClick:()=>N("logo_url"),className:"inline-flex items-center justify-center px-4 py-2 bg-transparent border border-transparent rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none transition-colors",children:"Hapus"})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Format file yang didukung: JPG, PNG, atau SVG. Ukuran maksimal 2MB. Dimensi yang disarankan 512x512px."})]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-[#1e2936] rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700/50",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Informasi Umum"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Detail ini digunakan untuk identifikasi sistem."})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"app_name",children:"Nama Aplikasi"}),e.jsx("input",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm py-2.5 px-3",id:"app_name",name:"app_name",type:"text",value:a.app_name,onChange:p=>b("app_name",p.target.value),required:!0}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Nama yang muncul di tab browser dan judul dashboard."})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"app_footer",children:"Footer Aplikasi"}),e.jsx("textarea",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm py-2.5 px-3",id:"app_footer",name:"app_footer",rows:2,placeholder:"Copyright ¬© 2025 Sistem Pengaduan Masyarakat Terpadu. Semua hak dilindungi.",value:a.app_footer,onChange:p=>b("app_footer",p.target.value)}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Teks footer yang ditampilkan di bagian bawah halaman aplikasi."})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"inst_name",children:"Nama Instansi"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"apartment"})}),e.jsx("input",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm pl-10 py-2.5 px-3",id:"inst_name",name:"inst_name",type:"text",value:a.institution_name,onChange:p=>b("institution_name",p.target.value),required:!0})]}),e.jsxs("div",{className:"mt-2 flex gap-2 items-start p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-xs text-blue-700 dark:text-blue-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] shrink-0 mt-0.5",children:"info"}),e.jsx("span",{children:"Penting: Nama instansi digunakan oleh AI untuk men-generate surat tanggapan resmi secara otomatis."})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"manager_name",children:"Nama Pengelola Utama"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"person"})}),e.jsx("input",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm pl-10 py-2.5 px-3",id:"manager_name",name:"manager_name",placeholder:"Contoh: Dr. Budi Santoso",type:"text",value:a.manager_name,onChange:p=>b("manager_name",p.target.value)})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"manager_position",children:"Jabatan Pengelola"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"badge"})}),e.jsx("input",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm pl-10 py-2.5 px-3",id:"manager_position",name:"manager_position",placeholder:"Contoh: Kepala Bagian Humas",type:"text",value:a.manager_position,onChange:p=>b("manager_position",p.target.value)})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"job_title",children:"Jabatan Tambahan"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"work"})}),e.jsx("input",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm pl-10 py-2.5 px-3",id:"job_title",name:"job_title",placeholder:"Contoh: Koordinator Sistem Informasi",type:"text",value:a.job_title,onChange:p=>b("job_title",p.target.value)})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"description",children:"Deskripsi Instansi"}),e.jsx("textarea",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm py-2.5 px-3",id:"description",name:"description",rows:3,placeholder:"Deskripsi singkat tentang instansi...",value:a.description,onChange:p=>b("description",p.target.value)}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Deskripsi ini akan digunakan dalam laporan dan komunikasi resmi."})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"institution_address",children:"Alamat Instansi"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-0 pl-3 flex items-start pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"business"})}),e.jsx("textarea",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm pl-10 py-2.5 px-3",id:"institution_address",name:"institution_address",rows:3,placeholder:"Alamat lengkap instansi...",value:a.institution_address,onChange:p=>b("institution_address",p.target.value)})]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Alamat resmi instansi yang akan digunakan dalam dokumen formal."})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"app_footer",children:"Footer Aplikasi"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-0 pl-3 flex items-start pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"copyright"})}),e.jsx("textarea",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm pl-10 py-2.5 px-3",id:"app_footer",name:"app_footer",rows:2,placeholder:"Copyright ¬© 2025 Nama Instansi. Semua hak dilindungi.",value:a.app_footer,onChange:p=>b("app_footer",p.target.value)})]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Teks footer yang akan ditampilkan di bagian bawah halaman aplikasi."})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1e2936] rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700/50",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Informasi Kontak"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Detail kontak yang dapat dihubungi oleh masyarakat."})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"address",children:"Alamat Lengkap"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-0 pl-3 flex items-start pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"location_on"})}),e.jsx("textarea",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm pl-10 py-2.5 px-3",id:"address",name:"address",rows:3,placeholder:"Jl. Contoh No. 123, Kelurahan ABC, Kecamatan XYZ, Kota/Kabupaten, Provinsi 12345",value:a.address,onChange:p=>b("address",p.target.value)})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"contact_email",children:"Email Kontak"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"email"})}),e.jsx("input",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm pl-10 py-2.5 px-3",id:"contact_email",name:"contact_email",type:"email",placeholder:"info@instansi.go.id",value:a.contact_email,onChange:p=>b("contact_email",p.target.value)})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"contact_phone",children:"Nomor Telepon"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"phone"})}),e.jsx("input",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm pl-10 py-2.5 px-3",id:"contact_phone",name:"contact_phone",type:"tel",placeholder:"(021) 1234-5678",value:a.contact_phone,onChange:p=>b("contact_phone",p.target.value)})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",htmlFor:"website",children:"Website Resmi"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"language"})}),e.jsx("input",{className:"block w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm pl-10 py-2.5 px-3",id:"website",name:"website",type:"url",placeholder:"https://www.instansi.go.id",value:a.website,onChange:p=>b("website",p.target.value)})]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"URL lengkap website resmi instansi (termasuk https://)."})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",className:"px-5 py-2.5 text-sm font-medium text-slate-700 dark:text-slate-200 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-colors",onClick:()=>window.history.back(),children:"Batal"}),e.jsx("button",{type:"submit",disabled:j,className:"px-5 py-2.5 text-sm font-bold text-white bg-primary rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary shadow-sm hover:shadow transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Menyimpan..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"save"}),"Simpan Perubahan"]})})]})]})]})},Pa=()=>e.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Pengaturan Sistem"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Kelola pengaturan sistem, peran pengguna, dan konfigurasi aplikasi"})]}),e.jsxs(pe,{children:[e.jsx(U,{path:"/",element:e.jsx($e,{to:"/settings/app-settings",replace:!0})}),e.jsx(U,{path:"/app-settings",element:e.jsx(Aa,{})}),e.jsx(U,{path:"/roles-permissions",element:e.jsx(de,{})}),e.jsx(U,{path:"/response-templates",element:e.jsx(be,{})}),e.jsx(U,{path:"/ai-trust",element:e.jsx(fe,{})})]})]})}),le=({isOpen:a,onClose:t,onSave:s,unit:d,units:j,unitTypes:v})=>{const[f,g]=l.useState({name:"",code:"",description:"",unit_type_id:"",parent_unit_id:"",contact_email:"",contact_phone:"",sla_hours:24,is_active:!0}),[b,h]=l.useState(!1),[N,p]=l.useState({});l.useEffect(()=>{g(d?{name:d.name||"",code:d.code||"",description:d.description||"",unit_type_id:d.unit_type_id||"",parent_unit_id:d.parent_unit_id||"",contact_email:d.contact_email||"",contact_phone:d.contact_phone||"",sla_hours:d.sla_hours||24,is_active:d.is_active??!0}:{name:"",code:"",description:"",unit_type_id:"",parent_unit_id:"",contact_email:"",contact_phone:"",sla_hours:24,is_active:!0}),p({})},[d,a]);const r=()=>{const y={};return f.name?.trim()||(y.name="Nama unit wajib diisi"),f.code?.trim()?f.code.length<2&&(y.code="Kode unit minimal 2 karakter"):y.code="Kode unit wajib diisi",f.sla_hours&&(f.sla_hours<1||f.sla_hours>168)&&(y.sla_hours="SLA harus antara 1-168 jam"),f.contact_email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.contact_email)&&(y.contact_email="Format email tidak valid"),p(y),Object.keys(y).length===0},k=async y=>{if(y.preventDefault(),!!r()){h(!0);try{await s(f),t()}catch(_){console.error("Error saving unit:",_)}finally{h(!1)}}},u=(y,_)=>{g(m=>({...m,[y]:_})),N[y]&&p(m=>({...m,[y]:""}))},x=j.filter(y=>y.id!==d?.id&&y.parent_unit_id!==d?.id&&y.is_active);return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:d?"Edit Unit Kerja":"Tambah Unit Kerja Baru"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"close"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Nama Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:f.name||"",onChange:y=>u("name",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white ${N.name?"border-red-500":"border-slate-300"}`,placeholder:"Masukkan nama unit kerja"}),N.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Kode Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:f.code||"",onChange:y=>u("code",y.target.value.toUpperCase()),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white ${N.code?"border-red-500":"border-slate-300"}`,placeholder:"Contoh: ADM, IGD"}),N.code&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tipe Unit"}),e.jsxs("select",{value:f.unit_type_id||"",onChange:y=>u("unit_type_id",y.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Pilih tipe unit"}),v.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Unit Induk"}),e.jsxs("select",{value:f.parent_unit_id||"",onChange:y=>u("parent_unit_id",y.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Tidak ada (Unit utama)"}),x.map(y=>e.jsxs("option",{value:y.id,children:[y.name," (",y.code,")"]},y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target SLA (Jam)"}),e.jsx("input",{type:"number",min:"1",max:"168",value:f.sla_hours||24,onChange:y=>u("sla_hours",parseInt(y.target.value)),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white ${N.sla_hours?"border-red-500":"border-slate-300"}`}),N.sla_hours&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.sla_hours})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Deskripsi"}),e.jsx("textarea",{value:f.description||"",onChange:y=>u("description",y.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white",placeholder:"Deskripsi unit kerja (opsional)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email Kontak"}),e.jsx("input",{type:"email",value:f.contact_email||"",onChange:y=>u("contact_email",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white ${N.contact_email?"border-red-500":"border-slate-300"}`,placeholder:"email@example.com"}),N.contact_email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.contact_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Telepon Kontak"}),e.jsx("input",{type:"tel",value:f.contact_phone||"",onChange:y=>u("contact_phone",y.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:text-white",placeholder:"021-1234567"})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:f.is_active??!0,onChange:y=>u("is_active",y.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Unit aktif dan dapat menerima tiket"})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors",children:"Batal"}),e.jsxs("button",{type:"submit",disabled:b,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[b&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),d?"Perbarui":"Simpan"]})]})]})]})}):null},ie=({embedded:a=!1})=>{const[t,s]=l.useState([]),[d,j]=l.useState([]),[v,f]=l.useState(!0),[g,b]=l.useState(""),[h,N]=l.useState(""),[p,r]=l.useState(""),[k,u]=l.useState(null),[x,y]=l.useState(!1),[_,m]=l.useState(!1),[c,o]=l.useState(null);l.useEffect(()=>{i()},[]),l.useEffect(()=>{n()},[g,h,p]);const i=async()=>{try{f(!0),u(null);try{const[T,R]=await Promise.all([z.getUnits(),z.getUnitTypes()]);s(T.units||[]),j(R);return}catch(T){console.warn("API failed, falling back to direct Supabase:",T);const{data:R,error:F}=await B.from("units").select(`
                        *,
                        unit_type:unit_types(name, code, color)
                    `).order("created_at",{ascending:!1}),{data:A,error:O}=await B.from("unit_types").select("*").eq("is_active",!0).order("name");if(F)throw F;if(O)throw O;s(R||[]),j(A||[])}}catch(T){console.error("Error fetching data:",T),u("Gagal memuat data. Silakan coba lagi.")}finally{f(!1)}},n=async()=>{try{const T={};g&&(T.search=g),h&&(T.type=h),p&&(T.status=p);try{const R=await z.getUnits(T);s(R.units||[]);return}catch(R){console.warn("API failed, falling back to direct Supabase:",R);let F=B.from("units").select(`
                        *,
                        unit_type:unit_types(name, code, color)
                    `);g&&(F=F.or(`name.ilike.%${g}%,code.ilike.%${g}%,description.ilike.%${g}%`)),h&&(F=F.eq("unit_types.code",h)),p&&(p==="active"?F=F.eq("is_active",!0):p==="inactive"&&(F=F.eq("is_active",!1))),F=F.order("created_at",{ascending:!1});const{data:A,error:O}=await F;if(O)throw O;s(A||[])}}catch(T){console.error("Error fetching units:",T),u("Gagal memuat data unit kerja.")}},w=async T=>{if(confirm("Apakah Anda yakin ingin menghapus unit kerja ini?"))try{try{await z.deleteUnit(T)}catch(R){console.warn("API failed, using direct Supabase:",R);const{error:F}=await B.from("units").delete().eq("id",T);if(F)throw F}await n(),alert("Unit kerja berhasil dihapus.")}catch(R){console.error("Error deleting unit:",R);const F=R.message||"Gagal menghapus unit kerja.";alert(F)}},E=T=>{o(T),m(!0)},P=async T=>{try{try{c?await z.updateUnit(c.id,T):await z.createUnit(T)}catch(R){if(console.warn("API failed, using direct Supabase:",R),c){const{error:F}=await B.from("units").update({...T,updated_at:new Date().toISOString()}).eq("id",c.id);if(F)throw F}else{const{error:F}=await B.from("units").insert([{...T,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(F)throw F}}await n(),y(!1),m(!1),o(null)}catch(R){console.error("Error saving unit:",R);const F=R.message||"Gagal menyimpan unit kerja.";throw alert(F),R}},K=()=>{y(!1),m(!1),o(null)},L=T=>T<24?`${T} Jam`:`${Math.floor(T/24)} Hari`,C=T=>T?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-800",children:[e.jsx("span",{className:"size-1.5 rounded-full bg-emerald-500"}),"Aktif"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-amber-50 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 border border-amber-100 dark:border-amber-800",children:[e.jsx("span",{className:"size-1.5 rounded-full bg-amber-500"}),"Pemeliharaan"]}),D=T=>{if(!T)return e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-slate-100 dark:bg-slate-800 text-xs font-medium text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-700",children:"Tidak Diketahui"});const R={Administratif:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700","Layanan Medis":"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-blue-100 dark:border-blue-800/30","Penunjang Medis":"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 border-indigo-100 dark:border-indigo-800/30",Teknis:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700"},F=R[T.name]||R.Administratif;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium border ${F}`,children:T.name})},M=T=>{const R=!!T.parent_unit_id;return e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-slate-900 dark:text-white",children:R?e.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l-2 border-slate-200 dark:border-slate-700 ml-3 relative",children:[e.jsx("span",{className:"absolute -left-[2px] top-1/2 -translate-y-1/2 w-3 h-[2px] bg-slate-200 dark:bg-slate-700"}),e.jsx("span",{className:"ml-2",children:T.name})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-8 rounded bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"domain"})}),e.jsx("span",{children:T.name})]})}),e.jsx("td",{className:"px-6 py-4 text-slate-500 font-mono text-xs",children:T.code}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:D(T.unit_type)}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300 font-medium",children:L(T.sla_hours)}),e.jsx("td",{className:"px-6 py-4",children:C(T.is_active)}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"p-1.5 text-slate-400 hover:text-primary hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",onClick:()=>E(T),children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx("button",{className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Hapus",onClick:()=>w(T.id),children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})})]},T.id)};return k?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"error"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-800 dark:text-red-200",children:"Terjadi Kesalahan"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-300",children:k})]}),e.jsx("button",{onClick:i,className:"ml-auto px-3 py-1 bg-red-100 dark:bg-red-800 text-red-700 dark:text-red-200 rounded text-sm hover:bg-red-200 dark:hover:bg-red-700 transition-colors",children:"Coba Lagi"})]})})}):e.jsxs("div",{className:"space-y-6",children:[!a&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Manajemen Unit Kerja"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Kelola struktur organisasi, hierarki, dan detail unit kerja dalam sistem rumah sakit."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"file_download"}),"Ekspor"]}),e.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center justify-center gap-2 bg-primary hover:bg-primary-dark text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-md shadow-blue-500/20",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"add"}),"Tambah Unit Baru"]})]})]}),a&&e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-end justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"file_download"}),"Ekspor"]}),e.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center justify-center gap-2 bg-primary hover:bg-primary-dark text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-md shadow-blue-500/20",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"add"}),"Tambah Unit Baru"]})]})}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark p-1 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col md:flex-row gap-2 items-center",children:[e.jsxs("div",{className:"relative w-full md:flex-1 group p-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 group-focus-within:text-primary",children:"search"})}),e.jsx("input",{className:"block w-full pl-11 pr-3 py-2 border-none bg-transparent text-slate-900 dark:text-white placeholder-slate-400 focus:ring-0 text-sm",placeholder:"Cari nama, kode, atau unit induk...",type:"text",value:g,onChange:T=>b(T.target.value)})]}),e.jsx("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-700 hidden md:block"}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto p-1",children:[e.jsx("div",{className:"relative w-full md:w-auto",children:e.jsxs("select",{className:"form-select block w-full md:w-48 py-2 pl-3 pr-10 text-sm border-none rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-700 dark:text-slate-300 focus:ring-0 cursor-pointer font-medium hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",value:h,onChange:T=>N(T.target.value),children:[e.jsx("option",{value:"",children:"Semua Tipe"}),d.map(T=>e.jsx("option",{value:T.code,children:T.name},T.id))]})}),e.jsx("div",{className:"relative w-full md:w-auto",children:e.jsxs("select",{className:"form-select block w-full md:w-40 py-2 pl-3 pr-10 text-sm border-none rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-700 dark:text-slate-300 focus:ring-0 cursor-pointer font-medium hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",value:p,onChange:T=>r(T.target.value),children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Tidak Aktif"}),e.jsx("option",{value:"maintenance",children:"Pemeliharaan"})]})})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs font-semibold text-slate-500 uppercase bg-slate-50/80 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",scope:"col",children:"Nama Unit (Hierarki)"}),e.jsx("th",{className:"px-6 py-4",scope:"col",children:"Kode"}),e.jsx("th",{className:"px-6 py-4",scope:"col",children:"Tipe"}),e.jsx("th",{className:"px-6 py-4",scope:"col",children:"Target SLA"}),e.jsx("th",{className:"px-6 py-4",scope:"col",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right",scope:"col",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:v?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),"Memuat data..."]})})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:"Tidak ada data unit kerja"})}):t.map(T=>M(T))})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/20",children:[e.jsxs("span",{className:"text-sm text-slate-500",children:["Menampilkan 1 sampai ",t.length," dari ",t.length," entri"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1.5 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-white dark:hover:bg-slate-800 shadow-sm disabled:opacity-50 transition-all",disabled:!0,children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_left"})}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("button",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-medium bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-primary shadow-sm",children:"1"})}),e.jsx("button",{className:"p-1.5 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-white dark:hover:bg-slate-800 shadow-sm transition-all",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"})})]})]})]}),e.jsx(le,{isOpen:x,onClose:K,onSave:P,units:t,unitTypes:d}),e.jsx(le,{isOpen:_,onClose:K,onSave:P,unit:c,units:t,unitTypes:d})]})},ke=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(""),[f,g]=l.useState("all"),[b,h]=l.useState(!1),[N,p]=l.useState(null),[r,k]=l.useState({name:"",code:"",description:"",icon:"corporate_fare",color:"#3B82F6",is_active:!0});l.useEffect(()=>{u()},[]);const u=async()=>{try{d(!0);const o=await $.getUnitTypes();t(o)}catch(o){console.error("Error fetching unit types:",o)}finally{d(!1)}},x=async o=>{o.preventDefault();try{N?await $.updateUnitType(N.id,r):await $.createUnitType(r),await u(),m()}catch(i){console.error("Error saving unit type:",i)}},y=o=>{p(o),k({name:o.name,code:o.code,description:o.description||"",icon:o.icon||"corporate_fare",color:o.color||"#3B82F6",is_active:o.is_active}),h(!0)},_=async o=>{if(window.confirm("Apakah Anda yakin ingin menghapus tipe unit ini?"))try{await $.deleteUnitType(o),await u()}catch(i){console.error("Error deleting unit type:",i)}},m=()=>{h(!1),p(null),k({name:"",code:"",description:"",icon:"corporate_fare",color:"#3B82F6",is_active:!0})},c=a.filter(o=>{const i=o.name.toLowerCase().includes(j.toLowerCase())||o.code.toLowerCase().includes(j.toLowerCase()),n=f==="all"||f==="active"&&o.is_active||f==="inactive"&&!o.is_active;return i&&n});return e.jsxs("div",{className:"flex flex-col gap-6 p-6 md:p-8 max-w-[1600px] mx-auto",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"file_download"}),"Ekspor"]}),e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center justify-center gap-2 bg-primary hover:bg-blue-600 text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-sm shadow-blue-500/20",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"add"}),"Tambah Tipe Baru"]})]})}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative w-full md:w-96 group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 group-focus-within:text-primary",children:"search"})}),e.jsx("input",{className:"block w-full pl-10 pr-3 py-2.5 border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder-slate-400 focus:border-primary focus:ring-1 focus:ring-primary text-sm transition-shadow",placeholder:"Cari nama atau kode tipe...",type:"text",value:j,onChange:o=>v(o.target.value)})]}),e.jsx("div",{className:"flex items-center gap-2 w-full md:w-auto md:ml-auto",children:e.jsxs("select",{className:"form-select block w-full md:w-auto py-2.5 pl-3 pr-10 text-sm border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-700 dark:text-slate-300 focus:border-primary focus:ring-primary cursor-pointer",value:f,onChange:o=>g(o.target.value),children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Tidak Aktif"})]})})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Nama Tipe"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Kode"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Deskripsi"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Icon"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Warna"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Status"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-right",scope:"col",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2",children:"Memuat data..."})]})})}):c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:"Tidak ada data tipe unit"})}):c.map(o=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-slate-900 dark:text-white",children:o.name}),e.jsx("td",{className:"px-6 py-4 text-slate-500 font-mono text-xs",children:o.code}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:o.description||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined",style:{color:o.color},children:o.icon}),e.jsx("span",{className:"text-xs text-slate-500",children:o.icon})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:o.color}}),e.jsx("span",{className:"text-xs font-mono text-slate-500",children:o.color})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${o.is_active?"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border-emerald-100 dark:border-emerald-800":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-red-100 dark:border-red-800"}`,children:[e.jsx("span",{className:`size-1.5 rounded-full ${o.is_active?"bg-emerald-500":"bg-red-500"}`}),o.is_active?"Aktif":"Tidak Aktif"]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>y(o),className:"p-1.5 text-slate-400 hover:text-primary hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx("button",{onClick:()=>_(o.id),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})})]},o.id))})]})}),e.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:e.jsxs("span",{className:"text-sm text-slate-500",children:["Menampilkan ",c.length," dari ",a.length," entri"]})})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:N?"Edit Tipe Unit":"Tambah Tipe Unit"}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nama Tipe *"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.name,onChange:o=>k({...r,name:o.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Kode *"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.code,onChange:o=>k({...r,code:o.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Deskripsi"}),e.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.description,onChange:o=>k({...r,description:o.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Icon"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.icon,onChange:o=>k({...r,icon:o.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Warna"}),e.jsx("input",{type:"color",className:"w-full h-10 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",value:r.color,onChange:o=>k({...r,color:o.target.value})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"is_active",className:"rounded border-slate-300 text-primary focus:ring-primary",checked:r.is_active,onChange:o=>k({...r,is_active:o.target.checked})}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Status Aktif"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"flex-1 px-4 py-2 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600 transition-colors",children:N?"Update":"Simpan"})]})]})]})})]})},je=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(""),[f,g]=l.useState("all"),[b,h]=l.useState(!1),[N,p]=l.useState(null),[r,k]=l.useState({name:"",code:"",description:"",default_sla_hours:24,requires_attachment:!1,is_active:!0});l.useEffect(()=>{u()},[]);const u=async()=>{try{d(!0);const o=await $.getServiceCategories();t(o)}catch(o){console.error("Error fetching service categories:",o)}finally{d(!1)}},x=async o=>{o.preventDefault();try{N?await $.updateServiceCategory(N.id,r):await $.createServiceCategory(r),await u(),m()}catch(i){console.error("Error saving service category:",i)}},y=o=>{p(o),k({name:o.name,code:o.code,description:o.description||"",default_sla_hours:o.default_sla_hours,requires_attachment:o.requires_attachment,is_active:o.is_active}),h(!0)},_=async o=>{if(window.confirm("Apakah Anda yakin ingin menghapus kategori layanan ini?"))try{await $.deleteServiceCategory(o),await u()}catch(i){console.error("Error deleting service category:",i)}},m=()=>{h(!1),p(null),k({name:"",code:"",description:"",default_sla_hours:24,requires_attachment:!1,is_active:!0})},c=a.filter(o=>{const i=o.name.toLowerCase().includes(j.toLowerCase())||o.code.toLowerCase().includes(j.toLowerCase()),n=f==="all"||f==="active"&&o.is_active||f==="inactive"&&!o.is_active;return i&&n});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"file_download"}),"Ekspor"]}),e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center justify-center gap-2 bg-primary hover:bg-blue-600 text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-sm shadow-blue-500/20",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"add"}),"Tambah Kategori Baru"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Kategori Layanan"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Kelola kategori layanan untuk sistem keluhan"})]}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Tambah Kategori"]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col md:flex-row gap-4 items-center mb-6",children:[e.jsxs("div",{className:"relative w-full md:w-96 group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 group-focus-within:text-primary",children:"search"})}),e.jsx("input",{className:"block w-full pl-10 pr-3 py-2.5 border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder-slate-400 focus:border-primary focus:ring-1 focus:ring-primary text-sm transition-shadow",placeholder:"Cari nama atau kode kategori...",type:"text",value:j,onChange:o=>v(o.target.value)})]}),e.jsx("div",{className:"flex items-center gap-2 w-full md:w-auto md:ml-auto",children:e.jsxs("select",{className:"form-select block w-full md:w-auto py-2.5 pl-3 pr-10 text-sm border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-700 dark:text-slate-300 focus:border-primary focus:ring-primary cursor-pointer",value:f,onChange:o=>g(o.target.value),children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Tidak Aktif"})]})})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Nama Kategori"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Kode"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"SLA Default"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Lampiran"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Status"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-right",scope:"col",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2",children:"Memuat data..."})]})})}):c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:"Tidak ada data kategori layanan"})}):c.map(o=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-slate-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-lg",children:"category"}),e.jsxs("div",{children:[e.jsx("div",{children:o.name}),o.description&&e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:o.description})]})]})}),e.jsx("td",{className:"px-6 py-4 text-slate-500 font-mono text-xs",children:o.code}),e.jsxs("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:[o.default_sla_hours," Jam"]}),e.jsx("td",{className:"px-6 py-4",children:o.requires_attachment?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 border border-blue-100 dark:border-blue-800",children:[e.jsx("span",{className:"material-symbols-outlined text-xs",children:"attach_file"}),"Wajib"]}):e.jsx("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-slate-50 text-slate-700 dark:bg-slate-900/30 dark:text-slate-400 border border-slate-100 dark:border-slate-800",children:"Opsional"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${o.is_active?"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border-emerald-100 dark:border-emerald-800":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-red-100 dark:border-red-800"}`,children:[e.jsx("span",{className:`size-1.5 rounded-full ${o.is_active?"bg-emerald-500":"bg-red-500"}`}),o.is_active?"Aktif":"Tidak Aktif"]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>y(o),className:"p-1.5 text-slate-400 hover:text-primary hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx("button",{onClick:()=>_(o.id),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})})]},o.id))})]})}),e.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:e.jsxs("span",{className:"text-sm text-slate-500",children:["Menampilkan ",c.length," dari ",a.length," entri"]})})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:N?"Edit Kategori Layanan":"Tambah Kategori Layanan"}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nama Kategori *"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.name,onChange:o=>k({...r,name:o.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Kode *"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.code,onChange:o=>k({...r,code:o.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Deskripsi"}),e.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.description,onChange:o=>k({...r,description:o.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"SLA Default (Jam) *"}),e.jsx("input",{type:"number",required:!0,min:"1",className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.default_sla_hours,onChange:o=>k({...r,default_sla_hours:parseInt(o.target.value)})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"requires_attachment",className:"rounded border-slate-300 text-primary focus:ring-primary",checked:r.requires_attachment,onChange:o=>k({...r,requires_attachment:o.target.checked})}),e.jsx("label",{htmlFor:"requires_attachment",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Wajib Lampiran"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"is_active",className:"rounded border-slate-300 text-primary focus:ring-primary",checked:r.is_active,onChange:o=>k({...r,is_active:o.target.checked})}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Status Aktif"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"flex-1 px-4 py-2 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600 transition-colors",children:N?"Update":"Simpan"})]})]})]})})]})},ye=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(""),[f,g]=l.useState("all"),[b,h]=l.useState(!1),[N,p]=l.useState(null),[r,k]=l.useState({name:"",code:"",description:"",icon:"confirmation_number",color:"#3B82F6",default_priority:"medium",default_sla_hours:24,is_active:!0});l.useEffect(()=>{u()},[]);const u=async()=>{try{d(!0);const i=await $.getTicketTypes();t(i)}catch(i){console.error("Error fetching ticket types:",i)}finally{d(!1)}},x=async i=>{i.preventDefault();try{N?await $.updateTicketType(N.id,r):await $.createTicketType(r),await u(),m()}catch(n){console.error("Error saving ticket type:",n)}},y=i=>{p(i),k({name:i.name,code:i.code,description:i.description||"",icon:i.icon||"confirmation_number",color:i.color||"#3B82F6",default_priority:i.default_priority,default_sla_hours:i.default_sla_hours,is_active:i.is_active}),h(!0)},_=async i=>{if(window.confirm("Apakah Anda yakin ingin menghapus tipe tiket ini?"))try{await $.deleteTicketType(i),await u()}catch(n){console.error("Error deleting ticket type:",n)}},m=()=>{h(!1),p(null),k({name:"",code:"",description:"",icon:"confirmation_number",color:"#3B82F6",default_priority:"medium",default_sla_hours:24,is_active:!0})},c=i=>{const n={low:"bg-slate-50 text-slate-700 border-slate-100",medium:"bg-blue-50 text-blue-700 border-blue-100",high:"bg-amber-50 text-amber-700 border-amber-100",critical:"bg-red-50 text-red-700 border-red-100"},w={low:"Rendah",medium:"Sedang",high:"Tinggi",critical:"Kritis"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${n[i]}`,children:w[i]})},o=a.filter(i=>{const n=i.name.toLowerCase().includes(j.toLowerCase())||i.code.toLowerCase().includes(j.toLowerCase()),w=f==="all"||f==="active"&&i.is_active||f==="inactive"&&!i.is_active;return n&&w});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"file_download"}),"Ekspor"]}),e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center justify-center gap-2 bg-primary hover:bg-blue-600 text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-sm shadow-blue-500/20",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"add"}),"Tambah Tipe Baru"]})]})}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative w-full md:w-96 group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 group-focus-within:text-primary",children:"search"})}),e.jsx("input",{className:"block w-full pl-10 pr-3 py-2.5 border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder-slate-400 focus:border-primary focus:ring-1 focus:ring-primary text-sm transition-shadow",placeholder:"Cari nama atau kode tipe...",type:"text",value:j,onChange:i=>v(i.target.value)})]}),e.jsx("div",{className:"flex items-center gap-2 w-full md:w-auto md:ml-auto",children:e.jsxs("select",{className:"form-select block w-full md:w-auto py-2.5 pl-3 pr-10 text-sm border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-700 dark:text-slate-300 focus:border-primary focus:ring-primary cursor-pointer",value:f,onChange:i=>g(i.target.value),children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Tidak Aktif"})]})})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Nama Tipe"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Kode"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Icon"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Prioritas Default"}),e.jsx("th",{className:"px-6 py-4 font-semibold",scope:"col",children:"Status"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-right",scope:"col",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2",children:"Memuat data..."})]})})}):o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:"Tidak ada data tipe tiket"})}):o.map(i=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-slate-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",style:{color:i.color},children:i.icon}),e.jsxs("div",{children:[e.jsx("div",{children:i.name}),i.description&&e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:i.description})]})]})}),e.jsx("td",{className:"px-6 py-4 text-slate-500 font-mono text-xs",children:i.code}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:i.color}}),e.jsx("span",{className:"text-xs font-mono text-slate-500",children:i.color})]})}),e.jsx("td",{className:"px-6 py-4",children:c(i.default_priority)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${i.is_active?"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border-emerald-100 dark:border-emerald-800":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-red-100 dark:border-red-800"}`,children:[e.jsx("span",{className:`size-1.5 rounded-full ${i.is_active?"bg-emerald-500":"bg-red-500"}`}),i.is_active?"Aktif":"Tidak Aktif"]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>y(i),className:"p-1.5 text-slate-400 hover:text-primary hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx("button",{onClick:()=>_(i.id),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})})]},i.id))})]})}),e.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:e.jsxs("span",{className:"text-sm text-slate-500",children:["Menampilkan ",o.length," dari ",a.length," entri"]})})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:N?"Edit Tipe Tiket":"Tambah Tipe Tiket"}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nama Tipe *"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.name,onChange:i=>k({...r,name:i.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Kode *"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.code,onChange:i=>k({...r,code:i.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Deskripsi"}),e.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.description,onChange:i=>k({...r,description:i.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Icon"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.icon,onChange:i=>k({...r,icon:i.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Warna"}),e.jsx("input",{type:"color",className:"w-full h-10 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",value:r.color,onChange:i=>k({...r,color:i.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"SLA Default (Jam) *"}),e.jsx("input",{type:"number",required:!0,min:"1",className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.default_sla_hours,onChange:i=>k({...r,default_sla_hours:parseInt(i.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Prioritas Default"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",value:r.default_priority,onChange:i=>k({...r,default_priority:i.target.value}),children:[e.jsx("option",{value:"low",children:"Rendah"}),e.jsx("option",{value:"medium",children:"Sedang"}),e.jsx("option",{value:"high",children:"Tinggi"}),e.jsx("option",{value:"critical",children:"Kritis"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"is_active",className:"rounded border-slate-300 text-primary focus:ring-primary",checked:r.is_active,onChange:i=>k({...r,is_active:i.target.checked})}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Status Aktif"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"flex-1 px-4 py-2 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600 transition-colors",children:N?"Update":"Simpan"})]})]})]})})]})},ve=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(""),[f,g]=l.useState("all"),[b,h]=l.useState(!1),[N,p]=l.useState(null),[r,k]=l.useState({name:"",code:"",description:"",parent_classification_id:"",level:1,is_active:!0});l.useEffect(()=>{u()},[]);const u=async()=>{try{d(!0);const n=await $.getTicketClassifications();t(n)}catch(n){console.error("Error fetching ticket classifications:",n)}finally{d(!1)}},x=async n=>{n.preventDefault();try{const w={...r,parent_classification_id:r.parent_classification_id||void 0};N?await $.updateTicketClassification(N.id,w):await $.createTicketClassification(w),await u(),m()}catch(w){console.error("Error saving ticket classification:",w)}},y=n=>{p(n),k({name:n.name,code:n.code,description:n.description||"",parent_classification_id:n.parent_classification_id||"",level:n.level,is_active:n.is_active}),h(!0)},_=async n=>{if(window.confirm("Apakah Anda yakin ingin menghapus klasifikasi tiket ini?"))try{await $.deleteTicketClassification(n),await u()}catch(w){console.error("Error deleting ticket classification:",w)}},m=()=>{h(!1),p(null),k({name:"",code:"",description:"",parent_classification_id:"",level:1,is_active:!0})},c=a.filter(n=>{const w=n.name.toLowerCase().includes(j.toLowerCase())||n.code.toLowerCase().includes(j.toLowerCase()),E=f==="all"||f==="active"&&n.is_active||f==="inactive"&&!n.is_active;return w&&E}),o=n=>{if(!n)return"-";const w=a.find(E=>E.id===n);return w?w.name:"-"},i=()=>a.filter(n=>!n.parent_classification_id);return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Cari klasifikasi tiket...",value:j,onChange:n=>v(n.target.value),className:"pl-10 pr-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-2.5 text-slate-400 text-sm",children:"search"})]}),e.jsxs("select",{value:f,onChange:n=>g(n.target.value),className:"px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Tidak Aktif"})]})]}),e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 bg-primary hover:bg-blue-600 text-white font-medium px-4 py-2 rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Tambah Klasifikasi"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Kode"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Parent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:c.map(n=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{style:{paddingLeft:`${(n.level-1)*20}px`},children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:n.name}),n.description&&e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:n.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-mono text-slate-600 dark:text-slate-300",children:n.code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Level ",n.level]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-white",children:o(n.parent_classification_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:n.is_active?"Aktif":"Tidak Aktif"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>y(n),className:"text-primary hover:text-blue-600 p-1",title:"Edit",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),e.jsx("button",{onClick:()=>_(n.id),className:"text-red-600 hover:text-red-700 p-1",title:"Hapus",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})})]},n.id))})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-4",children:N?"Edit Klasifikasi Tiket":"Tambah Klasifikasi Tiket"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nama"}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:n=>k({...r,name:n.target.value}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Kode"}),e.jsx("input",{type:"text",required:!0,value:r.code,onChange:n=>k({...r,code:n.target.value}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Deskripsi"}),e.jsx("textarea",{value:r.description,onChange:n=>k({...r,description:n.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Klasifikasi Parent"}),e.jsxs("select",{value:r.parent_classification_id,onChange:n=>k({...r,parent_classification_id:n.target.value,level:n.target.value?2:1}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"",children:"-- Tidak ada parent (Level 1) --"}),i().map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Level"}),e.jsx("input",{type:"number",min:"1",max:"5",value:r.level,onChange:n=>k({...r,level:parseInt(n.target.value)}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",disabled:!!r.parent_classification_id})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:r.is_active,onChange:n=>k({...r,is_active:n.target.checked}),className:"h-4 w-4 text-primary focus:ring-primary border-slate-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-slate-700 dark:text-slate-300",children:"Aktif"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg transition-colors",children:N?"Perbarui":"Simpan"})]})]})]})})]})},Ne=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(""),[f,g]=l.useState("all"),[b,h]=l.useState(!1),[N,p]=l.useState(null),[r,k]=l.useState({name:"",code:"",description:"",status_type:"open",color:"#6B7280",is_final:!1,display_order:0,is_active:!0});l.useEffect(()=>{u()},[]);const u=async()=>{try{d(!0);const i=await $.getTicketStatuses();t(i)}catch(i){console.error("Error fetching ticket statuses:",i)}finally{d(!1)}},x=async i=>{i.preventDefault();try{N?await $.updateTicketStatus(N.id,r):await $.createTicketStatus(r),await u(),m()}catch(n){console.error("Error saving ticket status:",n)}},y=i=>{p(i),k({name:i.name,code:i.code,description:i.description||"",status_type:i.status_type,color:i.color||"#6B7280",is_final:i.is_final,display_order:i.display_order,is_active:i.is_active}),h(!0)},_=async i=>{if(window.confirm("Apakah Anda yakin ingin menghapus status tiket ini?"))try{await $.deleteTicketStatus(i),await u()}catch(n){console.error("Error deleting ticket status:",n)}},m=()=>{h(!1),p(null),k({name:"",code:"",description:"",status_type:"open",color:"#6B7280",is_final:!1,display_order:0,is_active:!0})},c=a.filter(i=>{const n=i.name.toLowerCase().includes(j.toLowerCase())||i.code.toLowerCase().includes(j.toLowerCase()),w=f==="all"||f==="active"&&i.is_active||f==="inactive"&&!i.is_active;return n&&w}),o=i=>({open:"Terbuka",in_progress:"Dalam Proses",resolved:"Terselesaikan",closed:"Ditutup",cancelled:"Dibatalkan"})[i]||i;return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Cari status tiket...",value:j,onChange:i=>v(i.target.value),className:"pl-10 pr-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-2.5 text-slate-400 text-sm",children:"search"})]}),e.jsxs("select",{value:f,onChange:i=>g(i.target.value),className:"px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Tidak Aktif"})]})]}),e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 bg-primary hover:bg-blue-600 text-white font-medium px-4 py-2 rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Tambah Status Tiket"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Kode"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipe"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Urutan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:c.map(i=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:i.color}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:i.name}),i.description&&e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:i.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-mono text-slate-600 dark:text-slate-300",children:i.code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:o(i.status_type)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-white",children:[i.display_order,i.is_final&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:"Final"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:i.is_active?"Aktif":"Tidak Aktif"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>y(i),className:"text-primary hover:text-blue-600 p-1",title:"Edit",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),e.jsx("button",{onClick:()=>_(i.id),className:"text-red-600 hover:text-red-700 p-1",title:"Hapus",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})})]},i.id))})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-4",children:N?"Edit Status Tiket":"Tambah Status Tiket"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nama"}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:i=>k({...r,name:i.target.value}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Kode"}),e.jsx("input",{type:"text",required:!0,value:r.code,onChange:i=>k({...r,code:i.target.value}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Deskripsi"}),e.jsx("textarea",{value:r.description,onChange:i=>k({...r,description:i.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipe Status"}),e.jsxs("select",{value:r.status_type,onChange:i=>k({...r,status_type:i.target.value}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"open",children:"Terbuka"}),e.jsx("option",{value:"in_progress",children:"Dalam Proses"}),e.jsx("option",{value:"resolved",children:"Terselesaikan"}),e.jsx("option",{value:"closed",children:"Ditutup"}),e.jsx("option",{value:"cancelled",children:"Dibatalkan"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Warna"}),e.jsx("input",{type:"color",value:r.color,onChange:i=>k({...r,color:i.target.value}),className:"w-full h-10 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Urutan Tampil"}),e.jsx("input",{type:"number",min:"0",value:r.display_order,onChange:i=>k({...r,display_order:parseInt(i.target.value)}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_final",checked:r.is_final,onChange:i=>k({...r,is_final:i.target.checked}),className:"h-4 w-4 text-primary focus:ring-primary border-slate-300 rounded"}),e.jsx("label",{htmlFor:"is_final",className:"ml-2 block text-sm text-slate-700 dark:text-slate-300",children:"Status Final"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:r.is_active,onChange:i=>k({...r,is_active:i.target.checked}),className:"h-4 w-4 text-primary focus:ring-primary border-slate-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-slate-700 dark:text-slate-300",children:"Aktif"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg transition-colors",children:N?"Perbarui":"Simpan"})]})]})]})})]})},we=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(""),[f,g]=l.useState("all"),[b,h]=l.useState(!1),[N,p]=l.useState(null),[r,k]=l.useState({name:"",code:"",description:"",priority_level:3,default_sla_hours:24,is_active:!0});l.useEffect(()=>{u()},[]);const u=async()=>{try{d(!0);const w=await $.getPatientTypes();t(Array.isArray(w)?w:[])}catch(w){console.error("Error fetching patient types:",w),t([])}finally{d(!1)}},x=async w=>{w.preventDefault();try{N?await $.updatePatientType(N.id,r):await $.createPatientType(r),await u(),m()}catch(E){console.error("Error saving patient type:",E)}},y=w=>{p(w),k({name:w.name,code:w.code,description:w.description||"",priority_level:w.priority_level,default_sla_hours:w.default_sla_hours,is_active:w.is_active}),h(!0)},_=async w=>{if(window.confirm("Apakah Anda yakin ingin menghapus jenis pasien ini?"))try{await $.deletePatientType(w),await u()}catch(E){console.error("Error deleting patient type:",E)}},m=()=>{h(!1),p(null),k({name:"",code:"",description:"",priority_level:3,default_sla_hours:24,is_active:!0})},o=(Array.isArray(a)?a:[]).filter(w=>{const E=w.name.toLowerCase().includes(j.toLowerCase())||w.code.toLowerCase().includes(j.toLowerCase()),P=f==="all"||f==="active"&&w.is_active||f==="inactive"&&!w.is_active;return E&&P}),i=w=>({1:"Sangat Rendah",2:"Rendah",3:"Normal",4:"Tinggi",5:"Sangat Tinggi"})[w]||"Normal",n=w=>({1:"bg-gray-100 text-gray-800",2:"bg-blue-100 text-blue-800",3:"bg-green-100 text-green-800",4:"bg-yellow-100 text-yellow-800",5:"bg-red-100 text-red-800"})[w]||"bg-green-100 text-green-800";return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Cari jenis pasien...",value:j,onChange:w=>v(w.target.value),className:"pl-10 pr-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-2.5 text-slate-400 text-sm",children:"search"})]}),e.jsxs("select",{value:f,onChange:w=>g(w.target.value),className:"px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Tidak Aktif"})]})]}),e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 bg-primary hover:bg-blue-600 text-white font-medium px-4 py-2 rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Tambah Jenis Pasien"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Kode"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Prioritas"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"SLA Default"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.map(w=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:w.name}),w.description&&e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:w.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-mono text-slate-600 dark:text-slate-300",children:w.code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n(w.priority_level)}`,children:i(w.priority_level)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-white",children:[w.default_sla_hours," jam"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:w.is_active?"Aktif":"Tidak Aktif"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>y(w),className:"text-primary hover:text-blue-600 p-1",title:"Edit",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),e.jsx("button",{onClick:()=>_(w.id),className:"text-red-600 hover:text-red-700 p-1",title:"Hapus",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})})]},w.id))})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-4",children:N?"Edit Jenis Pasien":"Tambah Jenis Pasien"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nama"}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:w=>k({...r,name:w.target.value}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Kode"}),e.jsx("input",{type:"text",required:!0,value:r.code,onChange:w=>k({...r,code:w.target.value}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Deskripsi"}),e.jsx("textarea",{value:r.description,onChange:w=>k({...r,description:w.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Level Prioritas"}),e.jsxs("select",{value:r.priority_level,onChange:w=>k({...r,priority_level:parseInt(w.target.value)}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:1,children:"1 - Sangat Rendah"}),e.jsx("option",{value:2,children:"2 - Rendah"}),e.jsx("option",{value:3,children:"3 - Normal"}),e.jsx("option",{value:4,children:"4 - Tinggi"}),e.jsx("option",{value:5,children:"5 - Sangat Tinggi"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"SLA Default (jam)"}),e.jsx("input",{type:"number",min:"1",required:!0,value:r.default_sla_hours,onChange:w=>k({...r,default_sla_hours:parseInt(w.target.value)}),className:"w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:r.is_active,onChange:w=>k({...r,is_active:w.target.checked}),className:"h-4 w-4 text-primary focus:ring-primary border-slate-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-slate-700 dark:text-slate-300",children:"Aktif"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg transition-colors",children:N?"Perbarui":"Simpan"})]})]})]})})]})};class Da{async getSLASettings(){console.log("SLAService: Getting SLA settings...");try{let t;try{t=await S.get("/master-data/sla-settings")}catch{console.log("Main endpoint failed, trying public endpoint..."),t=await S.get("/master-data/public/sla-settings")}return console.log("SLAService: SLA settings response:",t.data),t.data||[]}catch(t){return console.error("SLAService: Error getting SLA settings:",t),[]}}async createSLASetting(t){return(await S.post("/master-data/sla-settings",t)).data}async updateSLASetting(t,s){return(await S.put(`/master-data/sla-settings/${t}`,s)).data}async deleteSLASetting(t){await S.delete(`/master-data/sla-settings/${t}`)}async getUnitTypes(){return(await S.get("/master-data/unit-types")).data}async getServiceCategories(){return(await S.get("/master-data/service-categories")).data}async getPatientTypes(){return(await S.get("/master-data/patient-types")).data}}const q=new Da,La=({isOpen:a,onClose:t,onSave:s,sla:d,mode:j})=>{const[v,f]=l.useState({name:"",unit_type_id:"",service_category_id:"",patient_type_id:"",priority_level:"medium",response_time_hours:4,resolution_time_hours:24,escalation_time_hours:48,business_hours_only:!0,is_active:!0}),[g,b]=l.useState({unitTypes:[],serviceCategories:[],patientTypes:[]}),[h,N]=l.useState(!1);l.useEffect(()=>{a&&(p(),f(j==="edit"&&d?{name:d.name,unit_type_id:d.unit_type_id||"",service_category_id:d.service_category_id||"",patient_type_id:d.patient_type_id||"",priority_level:d.priority_level,response_time_hours:d.response_time_hours,resolution_time_hours:d.resolution_time_hours,escalation_time_hours:d.escalation_time_hours||48,business_hours_only:d.business_hours_only,is_active:d.is_active}:{name:"",unit_type_id:"",service_category_id:"",patient_type_id:"",priority_level:"medium",response_time_hours:4,resolution_time_hours:24,escalation_time_hours:48,business_hours_only:!0,is_active:!0}))},[a,j,d]);const p=async()=>{try{const[x,y,_]=await Promise.all([q.getUnitTypes(),q.getServiceCategories(),q.getPatientTypes()]);b({unitTypes:x,serviceCategories:y,patientTypes:_})}catch(x){console.error("Error loading dropdown data:",x)}},r=async x=>{x.preventDefault(),N(!0);try{const y={...v,unit_type_id:v.unit_type_id||void 0,service_category_id:v.service_category_id||void 0,patient_type_id:v.patient_type_id||void 0,escalation_time_hours:v.escalation_time_hours||void 0};s(y),t()}catch(y){console.error("Error saving SLA setting:",y)}finally{N(!1)}},k=x=>{const{name:y,value:_,type:m}=x.target;f(c=>({...c,[y]:m==="checkbox"?x.target.checked:m==="number"?parseInt(_)||0:_}))},u=[{value:"low",label:"Rendah",color:"text-green-600"},{value:"medium",label:"Sedang",color:"text-yellow-600"},{value:"high",label:"Tinggi",color:"text-orange-600"},{value:"critical",label:"Kritis",color:"text-red-600"}];return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:j==="create"?"Tambah Pengaturan SLA":"Edit Pengaturan SLA"}),e.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 p-1",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]}),e.jsxs("form",{onSubmit:r,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nama Pengaturan SLA *"}),e.jsx("input",{type:"text",name:"name",value:v.name,onChange:k,required:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-slate-700 dark:text-white",placeholder:"Masukkan nama pengaturan SLA"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tipe Unit"}),e.jsxs("select",{name:"unit_type_id",value:v.unit_type_id,onChange:k,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Pilih Tipe Unit"}),g.unitTypes.map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Kategori Layanan"}),e.jsxs("select",{name:"service_category_id",value:v.service_category_id,onChange:k,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Pilih Kategori Layanan"}),g.serviceCategories.map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tipe Pasien"}),e.jsxs("select",{name:"patient_type_id",value:v.patient_type_id,onChange:k,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Pilih Tipe Pasien"}),g.patientTypes.map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Level Prioritas *"}),e.jsx("select",{name:"priority_level",value:v.priority_level,onChange:k,required:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:u.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Waktu Respon (Jam) *"}),e.jsx("input",{type:"number",name:"response_time_hours",value:v.response_time_hours,onChange:k,required:!0,min:"1",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Waktu Penyelesaian (Jam) *"}),e.jsx("input",{type:"number",name:"resolution_time_hours",value:v.resolution_time_hours,onChange:k,required:!0,min:"1",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Waktu Eskalasi (Jam)"}),e.jsx("input",{type:"number",name:"escalation_time_hours",value:v.escalation_time_hours,onChange:k,min:"1",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"business_hours_only",checked:v.business_hours_only,onChange:k,className:"rounded border-slate-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-slate-700 dark:text-slate-300",children:"Hanya Jam Kerja"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:v.is_active,onChange:k,className:"rounded border-slate-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-slate-700 dark:text-slate-300",children:"Aktif"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Menyimpan...":j==="create"?"Tambah":"Simpan"})]})]})]})}):null},_e=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(null),[f,g]=l.useState(!1),[b,h]=l.useState(null),[N,p]=l.useState("create"),[r,k]=l.useState("");l.useEffect(()=>{console.log("SLASettings component mounted"),u()},[]);const u=async()=>{try{console.log("Loading SLA settings..."),d(!0),v(null);const i=await q.getSLASettings();console.log("SLA settings loaded successfully:",i),t(i)}catch(i){console.error("Error loading SLA settings:",i),v("Gagal memuat pengaturan SLA")}finally{d(!1),console.log("SLA settings loading finished")}},x=()=>{h(null),p("create"),g(!0)},y=i=>{h(i),p("edit"),g(!0)},_=async i=>{try{N==="create"?await q.createSLASetting(i):b&&await q.updateSLASetting(b.id,i),await u(),g(!1)}catch(n){console.error("Error saving SLA setting:",n),v("Gagal menyimpan pengaturan SLA")}},m=async i=>{if(window.confirm("Apakah Anda yakin ingin menghapus pengaturan SLA ini?"))try{await q.deleteSLASetting(i),await u()}catch(n){console.error("Error deleting SLA setting:",n),v("Gagal menghapus pengaturan SLA")}},c=i=>{const n={low:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",high:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",critical:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},w={low:"Rendah",medium:"Sedang",high:"Tinggi",critical:"Kritis"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${n[i]||n.medium}`,children:w[i]||i})},o=a.filter(i=>i.name.toLowerCase().includes(r.toLowerCase())||i.unit_types?.name?.toLowerCase().includes(r.toLowerCase())||i.service_categories?.name?.toLowerCase().includes(r.toLowerCase())||i.patient_types?.name?.toLowerCase().includes(r.toLowerCase()));return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[j&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"material-symbols-outlined text-red-400 mr-3",children:"error"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:j})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",children:"search"}),e.jsx("input",{type:"text",placeholder:"Cari pengaturan SLA...",value:r,onChange:i=>k(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})}),e.jsxs("button",{onClick:x,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined mr-2",children:"add"}),"Tambah SLA"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow",children:o.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-4xl mb-4 block",children:"settings"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:r?"Tidak ada hasil yang ditemukan":"Belum ada pengaturan SLA"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:r?"Coba ubah kata kunci pencarian Anda":"Mulai dengan menambahkan pengaturan SLA pertama Anda"}),!r&&e.jsxs("button",{onClick:x,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined mr-2",children:"add"}),"Tambah SLA"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Prioritas"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Waktu Respon"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.map(i=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:i.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c(i.priority_level)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i.response_time_hours,"h"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}`,children:i.is_active?"Aktif":"Nonaktif"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[e.jsx("button",{onClick:()=>y(i),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 p-1 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Edit",children:e.jsx("span",{className:"material-symbols-outlined text-xs",children:"edit"})}),e.jsx("button",{onClick:()=>m(i.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Hapus",children:e.jsx("span",{className:"material-symbols-outlined text-xs",children:"delete"})})]})})]},i.id))})]})})}),f&&e.jsx(La,{isOpen:f,onClose:()=>g(!1),onSave:_,sla:b,mode:N})]})},Ea=()=>{const[a,t]=l.useState("units"),s=[{id:"units",name:"Unit Kerja",icon:"domain"},{id:"unit-types",name:"Tipe Unit Kerja",icon:"corporate_fare"},{id:"service-categories",name:"Kategori Layanan",icon:"category"}],d=[{id:"ticket-types",name:"Tipe Tiket",icon:"confirmation_number"},{id:"ticket-classifications",name:"Klasifikasi",icon:"segment"},{id:"ticket-statuses",name:"Status Tiket",icon:"flag"},{id:"patient-types",name:"Jenis Pasien",icon:"accessibility_new"},{id:"sla-settings",name:"Pengaturan SLA",icon:"timer"}],j=[{id:"roles-permissions",name:"Peran & Akses",icon:"admin_panel_settings"},{id:"response-templates",name:"Template Respon",icon:"chat"},{id:"ai-trust",name:"Pengaturan AI",icon:"psychology"}],v=()=>{switch(a){case"units":return e.jsx(ie,{embedded:!0});case"unit-types":return e.jsx(ke,{});case"service-categories":return e.jsx(je,{});case"ticket-types":return e.jsx(ye,{});case"ticket-classifications":return e.jsx(ve,{});case"ticket-statuses":return e.jsx(Ne,{});case"patient-types":return e.jsx(we,{});case"sla-settings":return e.jsx(_e,{});case"roles-permissions":return e.jsx(de,{});case"response-templates":return e.jsx(be,{});case"ai-trust":return e.jsx(fe,{});default:return e.jsx(ie,{embedded:!0})}},f=()=>[...s,...d,...j].find(b=>b.id===a)?.name||"Unit Kerja";return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Master Data"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Kelola data master sistem"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-64 border-r border-gray-200 bg-gray-50",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Organisasi"}),e.jsx("div",{className:"space-y-1",children:s.map(g=>e.jsx("button",{onClick:()=>t(g.id),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${a===g.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:g.name},g.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Tiket"}),e.jsx("div",{className:"space-y-1",children:d.map(g=>e.jsx("button",{onClick:()=>t(g.id),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${a===g.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:g.name},g.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Sistem"}),e.jsx("div",{className:"space-y-1",children:j.map(g=>e.jsx("button",{onClick:()=>t(g.id),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${a===g.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:g.name},g.id))})]})]})})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:f()})}),v()]})})]})]})})})},Ra=()=>{const[a,t]=l.useState("units"),[s,d]=l.useState(!0),j=[{id:"units",name:"Unit Kerja",icon:"domain"},{id:"unit-types",name:"Tipe Unit Kerja",icon:"corporate_fare"},{id:"service-categories",name:"Kategori Layanan",icon:"category"}],v=[{id:"ticket-types",name:"Tipe Tiket",icon:"confirmation_number"},{id:"ticket-classifications",name:"Klasifikasi",icon:"segment"},{id:"ticket-statuses",name:"Status Tiket",icon:"flag"},{id:"patient-types",name:"Jenis Pasien",icon:"accessibility_new"},{id:"sla-settings",name:"Pengaturan SLA",icon:"timer"}],f=[{id:"roles-permissions",name:"Peran & Akses",icon:"admin_panel_settings"},{id:"response-templates",name:"Template Respon",icon:"chat"},{id:"ai-trust",name:"Pengaturan AI",icon:"psychology"}],g=()=>{switch(a){case"units":return e.jsx(ie,{embedded:!0});case"unit-types":return e.jsx(ke,{});case"service-categories":return e.jsx(je,{});case"ticket-types":return e.jsx(ye,{});case"ticket-classifications":return e.jsx(ve,{});case"ticket-statuses":return e.jsx(Ne,{});case"patient-types":return e.jsx(we,{});case"sla-settings":return e.jsx(_e,{});case"roles-permissions":return e.jsx(de,{});case"response-templates":return e.jsx(be,{});case"ai-trust":return e.jsx(fe,{});default:return e.jsx(ie,{embedded:!0})}},b=()=>[...j,...v,...f].find(N=>N.id===a)?.name||"Unit Kerja";return e.jsxs("div",{className:"flex h-screen w-full",children:[e.jsxs("aside",{className:"w-[280px] bg-surface-light dark:bg-surface-dark border-r border-slate-200 dark:border-slate-800 flex flex-col flex-shrink-0 z-30 transition-all",children:[e.jsx("div",{className:"h-16 flex items-center px-6 border-b border-slate-100 dark:border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-3 text-slate-900 dark:text-white",children:[e.jsx("div",{className:"size-8 rounded-lg bg-primary flex items-center justify-center text-white shadow-lg shadow-blue-500/20",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"local_hospital"})}),e.jsx("h1",{className:"text-lg font-bold tracking-tight",children:"CMS Admin"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto py-6 px-4 flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"px-3 text-[11px] font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Layanan Publik"}),e.jsxs("nav",{className:"flex flex-col gap-1",children:[e.jsxs("a",{className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",href:"/dashboard",children:[e.jsx("span",{className:"material-symbols-outlined",children:"dashboard"}),e.jsx("span",{className:"text-sm font-medium",children:"Dashboard"})]}),e.jsxs("a",{className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",href:"/tickets",children:[e.jsx("span",{className:"material-symbols-outlined",children:"inbox"}),e.jsx("span",{className:"text-sm font-medium",children:"Keluhan"})]}),e.jsxs("a",{className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",href:"/reports",children:[e.jsx("span",{className:"material-symbols-outlined",children:"analytics"}),e.jsx("span",{className:"text-sm font-medium",children:"Analitik"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"px-3 text-[11px] font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Manajemen"}),e.jsxs("nav",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex flex-col rounded-xl bg-slate-50/80 dark:bg-slate-800/40 border border-slate-100 dark:border-slate-700/50 overflow-hidden",children:[e.jsxs("button",{onClick:()=>d(!s),className:"flex items-center justify-between w-full gap-3 px-3 py-2.5 bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-white font-medium",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-primary font-variation-settings-'FILL'1",children:"database"}),e.jsx("span",{className:"text-sm",children:"Master Data"})]}),e.jsx("span",{className:`material-symbols-outlined text-slate-400 text-[18px] transition-transform ${s?"rotate-180":""}`,children:"expand_more"})]}),s&&e.jsxs("div",{className:"flex flex-col py-2",children:[e.jsx("div",{className:"px-4 py-1.5 mt-1 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Organisasi & Layanan"}),j.map(h=>e.jsxs("button",{onClick:()=>t(h.id),className:`flex items-center gap-3 px-4 py-2 mx-2 rounded-lg text-sm transition-colors ${a===h.id?"submenu-item-active text-primary bg-primary/8 font-semibold":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx("span",{className:`size-1.5 rounded-full ${a===h.id?"bg-primary":"bg-slate-300 dark:bg-slate-600"}`}),h.name]},h.id)),e.jsx("div",{className:"px-4 py-1.5 mt-3 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Tiket & SLA"}),v.map(h=>e.jsxs("button",{onClick:()=>t(h.id),className:`flex items-center gap-3 px-4 py-2 mx-2 rounded-lg text-sm transition-colors ${a===h.id?"submenu-item-active text-primary bg-primary/8 font-semibold":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx("span",{className:`size-1.5 rounded-full ${a===h.id?"bg-primary":"bg-slate-300 dark:bg-slate-600"}`}),h.name]},h.id)),e.jsx("div",{className:"px-4 py-1.5 mt-3 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Sistem"}),f.map(h=>e.jsxs("button",{onClick:()=>t(h.id),className:`flex items-center gap-3 px-4 py-2 mx-2 rounded-lg text-sm transition-colors ${a===h.id?"submenu-item-active text-primary bg-primary/8 font-semibold":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx("span",{className:`size-1.5 rounded-full ${a===h.id?"bg-primary":"bg-slate-300 dark:bg-slate-600"}`}),h.name]},h.id))]})]}),e.jsxs("a",{className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors mt-1",href:"/settings",children:[e.jsx("span",{className:"material-symbols-outlined",children:"settings"}),e.jsx("span",{className:"text-sm font-medium",children:"Pengaturan Sistem"})]})]})]})]}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors cursor-pointer",children:[e.jsx("div",{className:"size-10 rounded-full bg-slate-200 bg-cover bg-center ring-2 ring-white dark:ring-slate-700",style:{backgroundImage:"url('https://lh3.googleusercontent.com/aida-public/AB6AXuDhZWFLhjM26KGl8PZ-bgMlD2i-WuJg_0wfxqZ_0Hx4iouJVl_RBYuVGf-SGeZoox_u5G4q8Zo55URHEFZP_vCGvAwV0A_ug5og6CUTQf0tLmQ2Y1zQ1nGGo6I8oDU0c-jUS5GGHr1PMjM2l3eMZ1dKn5CN5zQwa-SYQIrhyudyHO676rMo8bbqIKs0SLoKFTHySO60vLvMx9-xhhGRitkSRlINSzCd-5wcsx59Vxf_IqjJd3sdKKKF0DUVbbiI5CKvnnSyrDuBPuE6')"}}),e.jsxs("div",{className:"flex flex-col overflow-hidden",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",children:"Admin User"}),e.jsx("span",{className:"text-xs text-slate-500 truncate",children:"System Administrator"})]}),e.jsx("span",{className:"material-symbols-outlined text-slate-400 ml-auto text-sm",children:"unfold_more"})]})})]}),e.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-background-light dark:bg-background-dark overflow-hidden",children:[e.jsxs("header",{className:"h-16 flex items-center justify-between px-8 bg-surface-light dark:bg-surface-dark border-b border-slate-200 dark:border-slate-800 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx("a",{className:"hover:text-primary transition-colors",href:"/settings",children:"Pengaturan"}),e.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),e.jsx("span",{className:"hover:text-primary transition-colors cursor-pointer",children:"Master Data"}),e.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),e.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:b()})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"relative p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined",children:"notifications"}),e.jsx("span",{className:"absolute top-2 right-2 size-2 bg-red-500 rounded-full border border-white dark:border-slate-900"})]}),e.jsx("div",{className:"h-4 w-px bg-slate-200 dark:bg-slate-700"}),e.jsx("button",{className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"help"})}),e.jsx("button",{className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"dark_mode"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:g()})})]})]})},Ua=({embedded:a=!1})=>{const[t,s]=l.useState([]),[d,j]=l.useState([]),[v,f]=l.useState(!0),[g,b]=l.useState(""),[h,N]=l.useState(""),[p,r]=l.useState(""),[k,u]=l.useState(null),[x,y]=l.useState(!1),[_,m]=l.useState(!1),[c,o]=l.useState(null);l.useEffect(()=>{i()},[]),l.useEffect(()=>{n()},[g,h,p]);const i=async()=>{try{f(!0),u(null);const T=await z.getUnits({search:g,type:h,status:p}),R=await z.getUnitTypes();s(T.units||[]),j(R||[])}catch(T){console.error("Error fetching data:",T),u("Gagal memuat data. Silakan coba lagi.")}finally{f(!1)}},n=async()=>{try{const T=await z.getUnits({search:g,type:h,status:p});s(T.units||[])}catch(T){console.error("Error fetching units:",T),u("Gagal memuat data unit kerja.")}},w=async T=>{if(confirm("Apakah Anda yakin ingin menghapus unit kerja ini?"))try{await z.deleteUnit(T),await n(),alert("Unit kerja berhasil dihapus.")}catch(R){console.error("Error deleting unit:",R);const F=R.message||"Gagal menghapus unit kerja.";alert(F)}},E=T=>{o(T),m(!0)},P=async T=>{try{if(c){const{error:R}=await B.from("units").update({...T,updated_at:new Date().toISOString()}).eq("id",c.id);if(R)throw R}else{const{error:R}=await B.from("units").insert([{...T,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(R)throw R}await n(),y(!1),m(!1),o(null)}catch(R){console.error("Error saving unit:",R);const F=R.message||"Gagal menyimpan unit kerja.";throw alert(F),R}},K=()=>{y(!1),m(!1),o(null)},L=T=>T<24?`${T} Jam`:`${Math.floor(T/24)} Hari`,C=T=>T?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-800",children:[e.jsx("span",{className:"size-1.5 rounded-full bg-emerald-500"}),"Aktif"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-amber-50 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 border border-amber-100 dark:border-amber-800",children:[e.jsx("span",{className:"size-1.5 rounded-full bg-amber-500"}),"Pemeliharaan"]}),D=T=>{if(!T)return e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-slate-100 dark:bg-slate-800 text-xs font-medium text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-700",children:"Tidak Diketahui"});const R={Administratif:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700","Layanan Medis":"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-blue-100 dark:border-blue-800/30","Penunjang Medis":"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 border-indigo-100 dark:border-indigo-800/30",Teknis:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700"},F=R[T.name]||R.Administratif;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium border ${F}`,children:T.name})},M=T=>{const R=!!T.parent_unit_id;return e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-slate-900 dark:text-white",children:R?e.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l-2 border-slate-200 dark:border-slate-700 ml-3 relative",children:[e.jsx("span",{className:"absolute -left-[2px] top-1/2 -translate-y-1/2 w-3 h-[2px] bg-slate-200 dark:bg-slate-700"}),e.jsx("span",{className:"ml-2",children:T.name})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-8 rounded bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"domain"})}),e.jsx("span",{children:T.name})]})}),e.jsx("td",{className:"px-6 py-4 text-slate-500 font-mono text-xs",children:T.code}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:D(T.unit_type)}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300 font-medium",children:L(T.sla_hours)}),e.jsx("td",{className:"px-6 py-4",children:C(T.is_active)}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",onClick:()=>E(T),children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx("button",{className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Hapus",onClick:()=>w(T.id),children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})})]},T.id)};return k?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"error"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-800 dark:text-red-200",children:"Terjadi Kesalahan"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-300",children:k})]}),e.jsx("button",{onClick:i,className:"ml-auto px-3 py-1 bg-red-100 dark:bg-red-800 text-red-700 dark:text-red-200 rounded text-sm hover:bg-red-200 dark:hover:bg-red-700 transition-colors",children:"Coba Lagi"})]})})}):e.jsxs("div",{className:"space-y-6",children:[!a&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Manajemen Unit Kerja"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Kelola struktur organisasi, hierarki, dan detail unit kerja dalam sistem rumah sakit."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"file_download"}),"Ekspor"]}),e.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-md shadow-blue-500/20",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"add"}),"Tambah Unit Baru"]})]})]}),a&&e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-end justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"file_download"}),"Ekspor"]}),e.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm shadow-md shadow-blue-500/20",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"add"}),"Tambah Unit Baru"]})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-1 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col md:flex-row gap-2 items-center",children:[e.jsxs("div",{className:"relative w-full md:flex-1 group p-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 group-focus-within:text-blue-600",children:"search"})}),e.jsx("input",{className:"block w-full pl-11 pr-3 py-2 border-none bg-transparent text-slate-900 dark:text-white placeholder-slate-400 focus:ring-0 text-sm",placeholder:"Cari nama, kode, atau unit induk...",type:"text",value:g,onChange:T=>b(T.target.value)})]}),e.jsx("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-700 hidden md:block"}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto p-1",children:[e.jsx("div",{className:"relative w-full md:w-auto",children:e.jsxs("select",{className:"form-select block w-full md:w-48 py-2 pl-3 pr-10 text-sm border-none rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-700 dark:text-slate-300 focus:ring-0 cursor-pointer font-medium hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",value:h,onChange:T=>N(T.target.value),children:[e.jsx("option",{value:"",children:"Semua Tipe"}),d.map(T=>e.jsx("option",{value:T.code,children:T.name},T.id))]})}),e.jsx("div",{className:"relative w-full md:w-auto",children:e.jsxs("select",{className:"form-select block w-full md:w-40 py-2 pl-3 pr-10 text-sm border-none rounded-lg bg-slate-50 dark:bg-slate-800/50 text-slate-700 dark:text-slate-300 focus:ring-0 cursor-pointer font-medium hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",value:p,onChange:T=>r(T.target.value),children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Tidak Aktif"}),e.jsx("option",{value:"maintenance",children:"Pemeliharaan"})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs font-semibold text-slate-500 uppercase bg-slate-50/80 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",scope:"col",children:"Nama Unit (Hierarki)"}),e.jsx("th",{className:"px-6 py-4",scope:"col",children:"Kode"}),e.jsx("th",{className:"px-6 py-4",scope:"col",children:"Tipe"}),e.jsx("th",{className:"px-6 py-4",scope:"col",children:"Target SLA"}),e.jsx("th",{className:"px-6 py-4",scope:"col",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right",scope:"col",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:v?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),"Memuat data..."]})})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:"Tidak ada data unit kerja"})}):t.map(T=>M(T))})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/20",children:[e.jsxs("span",{className:"text-sm text-slate-500",children:["Menampilkan 1 sampai ",t.length," dari ",t.length," entri"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1.5 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-white dark:hover:bg-slate-800 shadow-sm disabled:opacity-50 transition-all",disabled:!0,children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_left"})}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("button",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-medium bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-blue-600 shadow-sm",children:"1"})}),e.jsx("button",{className:"p-1.5 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-white dark:hover:bg-slate-800 shadow-sm transition-all",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"})})]})]})]}),e.jsx(le,{isOpen:x,onClose:K,onSave:P,units:t,unitTypes:d}),e.jsx(le,{isOpen:_,onClose:K,onSave:P,unit:c,units:t,unitTypes:d})]})},Ma=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Manajemen Unit Kerja"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Kelola semua organisasi, hierarki, dan detail unit kerja dalam sistem rumah sakit"})]})}),e.jsx(Ua,{embedded:!0})]}),Ia=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Tipe Unit Kerja"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Kelola tipe-tipe unit kerja yang tersedia dalam sistem"})]})}),e.jsx(ke,{})]}),Fa=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Kategori Layanan"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Kelola kategori layanan yang tersedia dalam sistem"})]})}),e.jsx(je,{})]}),Ka=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Tipe Tiket"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Kelola tipe-tipe tiket yang tersedia dalam sistem"})]})}),e.jsx(ye,{})]}),$a=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Klasifikasi Tiket"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Kelola klasifikasi tiket berdasarkan kategori dan prioritas"})]})}),e.jsx(ve,{})]}),Ba=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Status Tiket"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Kelola status tiket yang tersedia dalam sistem"})]})}),e.jsx(Ne,{})]}),Oa=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Jenis Pasien"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Kelola jenis-jenis pasien yang tersedia dalam sistem"})]})}),e.jsx(we,{})]}),za=()=>{const[a,t]=l.useState([]),[s,d]=l.useState(!0),[j,v]=l.useState(null);l.useEffect(()=>{f()},[]);const f=async()=>{try{d(!0),v(null),console.log("Loading SLA settings...");const g=await q.getSLASettings();console.log("SLA settings loaded:",g),t(g)}catch(g){console.error("Error loading SLA settings:",g),v(g.message||"Gagal memuat pengaturan SLA")}finally{d(!1)}};return s?e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("div",{children:"Loading SLA Settings..."}),e.jsx("div",{style:{marginTop:"10px",fontSize:"12px",color:"#666"},children:"Memuat data dari API..."})]}):j?e.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffebee",border:"1px solid #f44336",borderRadius:"4px"},children:[e.jsx("h3",{style:{color:"#d32f2f",margin:"0 0 10px 0"},children:"Error"}),e.jsx("p",{style:{color:"#d32f2f",margin:0},children:j}),e.jsx("button",{onClick:f,style:{marginTop:"10px",padding:"8px 16px",backgroundColor:"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Coba Lagi"})]}):e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h2",{style:{margin:0},children:["SLA Settings (",a.length," items)"]}),e.jsx("button",{style:{padding:"10px 20px",backgroundColor:"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+ Tambah SLA"})]}),a.length===0?e.jsxs("div",{style:{padding:"40px",textAlign:"center",backgroundColor:"#f5f5f5",borderRadius:"8px"},children:[e.jsx("h3",{children:"Belum ada pengaturan SLA"}),e.jsx("p",{children:"Mulai dengan menambahkan pengaturan SLA pertama Anda"})]}):e.jsx("div",{style:{backgroundColor:"white",border:"1px solid #ddd",borderRadius:"8px"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{style:{backgroundColor:"#f5f5f5"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Nama"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Prioritas"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Waktu Respon"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Status"}),e.jsx("th",{style:{padding:"12px",textAlign:"right",borderBottom:"1px solid #ddd"},children:"Aksi"})]})}),e.jsx("tbody",{children:a.map((g,b)=>e.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[e.jsx("td",{style:{padding:"12px"},children:e.jsx("strong",{children:g.name})}),e.jsx("td",{style:{padding:"12px"},children:e.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",backgroundColor:qa(g.priority_level),color:"white"},children:Ga(g.priority_level)})}),e.jsxs("td",{style:{padding:"12px"},children:[g.response_time_hours,"h"]}),e.jsx("td",{style:{padding:"12px"},children:e.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",backgroundColor:g.is_active?"#4caf50":"#9e9e9e",color:"white"},children:g.is_active?"Aktif":"Nonaktif"})}),e.jsxs("td",{style:{padding:"12px",textAlign:"right"},children:[e.jsx("button",{style:{marginRight:"4px",padding:"1px 4px",backgroundColor:"#2196f3",color:"white",border:"none",borderRadius:"2px",cursor:"pointer",fontSize:"10px",minWidth:"32px",height:"20px"},children:"Edit"}),e.jsx("button",{style:{padding:"1px 4px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"2px",cursor:"pointer",fontSize:"10px",minWidth:"32px",height:"20px"},children:"Hapus"})]})]},g.id||b))})]})})]})};function qa(a){switch(a){case"low":return"#4caf50";case"medium":return"#ff9800";case"high":return"#ff5722";case"critical":return"#f44336";default:return"#9e9e9e"}}function Ga(a){switch(a){case"low":return"Rendah";case"medium":return"Sedang";case"high":return"Tinggi";case"critical":return"Kritis";default:return a}}const Ha=()=>{const[a,t]=l.useState({}),[s,d]=l.useState(!0);l.useEffect(()=>{j()},[]);const j=async()=>{const v={timestamp:new Date().toISOString(),apiBaseUrl:window.location.origin,currentPath:window.location.pathname};try{v.apiTest="Testing API connection...";const f=await q.getSLASettings();v.slaData={success:!0,count:f.length,sample:f.slice(0,2)}}catch(f){v.slaData={success:!1,error:f.message}}try{const[f,g,b]=await Promise.all([q.getUnitTypes(),q.getServiceCategories(),q.getPatientTypes()]);v.dropdownData={unitTypes:{count:f.length,success:!0},serviceCategories:{count:g.length,success:!0},patientTypes:{count:b.length,success:!0}}}catch(f){v.dropdownData={error:f.message,success:!1}}v.localStorage={token:localStorage.getItem("token")?"Present":"Missing",user:localStorage.getItem("user")?"Present":"Missing"},t(v),d(!1)};return s?e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"SLA Debug - Loading..."}),e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-yellow-600"})]}):e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"SLA Settings Debug Info"}),e.jsx("pre",{className:"text-sm bg-white p-3 rounded border overflow-auto max-h-96",children:JSON.stringify(a,null,2)}),e.jsxs("div",{className:"mt-4 space-x-2",children:[e.jsx("button",{onClick:j,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Refresh Debug"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Reload Page"})]})]})},Qa=()=>{const a=window.location.search.includes("debug=true"),t=window.location.search.includes("simple=true");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Pengaturan SLA"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Kelola Service Level Agreement (SLA) untuk tiket dalam sistem"}),(a||t)&&e.jsxs("div",{className:"mt-2 text-sm text-blue-600",children:["Mode: ",a?"Debug":""," ",t?"Simple":"Normal"," | ",e.jsx("a",{href:"?simple=true",className:"underline",children:"Simple Mode"})," | ",e.jsx("a",{href:"?debug=true",className:"underline",children:"Debug Mode"})," | ",e.jsx("a",{href:"?",className:"underline",children:"Normal Mode"})]})]})}),a&&e.jsx(Ha,{}),t?e.jsx(za,{}):e.jsx(_e,{})]})},Ja=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Peran & Akses"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Kelola peran pengguna dan hak akses dalam sistem"})]})}),e.jsx(de,{})]});function Va(){return e.jsx(pt,{children:e.jsx(Je,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsxs(pe,{children:[e.jsx(U,{path:"/login",element:e.jsx(Nt,{})}),e.jsx(U,{path:"/ticket-tracker",element:e.jsx(pa,{})}),e.jsx(U,{path:"/tiket-eksternal",element:e.jsx(Re,{})}),e.jsx(U,{path:"/tiket-eksternal/:qrCode",element:e.jsx(Re,{})}),e.jsx(U,{path:"/survey/public",element:e.jsx(Fe,{})}),e.jsx(U,{path:"/survey/public/:qrCode",element:e.jsx(Fe,{})}),e.jsx(U,{path:"/buku-petunjuk",element:e.jsx(Pt,{})}),e.jsx(U,{path:"/*",element:e.jsx(ht,{requireAdmin:!0,children:e.jsx(bt,{children:e.jsxs(pe,{children:[e.jsx(U,{path:"/",element:e.jsx(Ee,{})}),e.jsx(U,{path:"/dashboard",element:e.jsx(Ee,{})}),e.jsx(U,{path:"/tickets",element:e.jsx(Dt,{})}),e.jsx(U,{path:"/tickets/:id",element:e.jsx(ma,{})}),e.jsx(U,{path:"/tickets/view",element:e.jsx(ua,{})}),e.jsx(U,{path:"/tickets/create/internal",element:e.jsx(ga,{})}),e.jsx(U,{path:"/tickets/tiket-eksternal",element:e.jsx(fa,{})}),e.jsx(U,{path:"/tickets/qr-management",element:e.jsx(Ue,{})}),e.jsx(U,{path:"/qr-codes",element:e.jsx(Ue,{})}),e.jsx(U,{path:"/tickets/ai-escalation",element:e.jsx(ka,{})}),e.jsx(U,{path:"/tickets/escalation",element:e.jsx(ya,{})}),e.jsx(U,{path:"/survey",element:e.jsx(Ie,{})}),e.jsx(U,{path:"/survey/admin",element:e.jsx(Ie,{})}),e.jsx(U,{path:"/survey/form",element:e.jsx(va,{})}),e.jsx(U,{path:"/survey/report",element:e.jsx(Na,{})}),e.jsx(U,{path:"/users",element:e.jsx(_a,{})}),e.jsx(U,{path:"/users/profile",element:e.jsx(Sa,{})}),e.jsx(U,{path:"/master-data",element:e.jsx(Ea,{})}),e.jsx(U,{path:"/master-data/units",element:e.jsx(Ma,{})}),e.jsx(U,{path:"/master-data/unit-types",element:e.jsx(Ia,{})}),e.jsx(U,{path:"/master-data/service-categories",element:e.jsx(Fa,{})}),e.jsx(U,{path:"/master-data/ticket-types",element:e.jsx(Ka,{})}),e.jsx(U,{path:"/master-data/ticket-classifications",element:e.jsx($a,{})}),e.jsx(U,{path:"/master-data/ticket-statuses",element:e.jsx(Ba,{})}),e.jsx(U,{path:"/master-data/patient-types",element:e.jsx(Oa,{})}),e.jsx(U,{path:"/master-data/roles-permissions",element:e.jsx(Ja,{})}),e.jsx(U,{path:"/master-data/sla-settings",element:e.jsx(Qa,{})}),e.jsx(U,{path:"/unified-master-data",element:e.jsx(Ra,{})}),e.jsx(U,{path:"/settings/*",element:e.jsx(Pa,{})}),e.jsx(U,{path:"/reports",element:e.jsx(_t,{})}),e.jsx(U,{path:"/realtime-notification",element:e.jsx(At,{})})]})})})})]})})})}console.log("üöÄ Starting KISS Application with refactored configuration...");it.createRoot(document.getElementById("root")).render(e.jsx(Ve.StrictMode,{children:e.jsx(Va,{})}));export{B as s};
